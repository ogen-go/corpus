{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/mavi888/sync-step-function"
		},
		"file": {
			"name": "template.yaml",
			"size": 0,
			"path": "template.yaml",
			"byteSize": 3891,
			"content": "AWSTemplateFormatVersion: '2010-09-09'\nTransform: AWS::Serverless-2016-10-31\n  \nResources:\n\n  SAMLogs:  \n    Type: AWS::Logs::LogGroup\n\n  OrdersApi:\n    Type: AWS::Serverless::HttpApi\n    Properties:\n      FailOnWarnings: True\n      DefinitionBody:\n        info:\n          version: '1.0'\n          title:\n            Ref: AWS::StackName\n        paths:\n          \"/order\":\n            post:\n              responses: \n                default:\n                  description: \"Default response for POST /\"\n              x-amazon-apigateway-integration:\n                integrationSubtype: \"StepFunctions-StartSyncExecution\"\n                credentials:\n                  Fn::GetAtt: [HttpApiRole, Arn]\n                requestParameters:\n                  Input: \"$request.body\"\n                  StateMachineArn: !Ref OrderStateMachine\n                payloadFormatVersion: \"1.0\"\n                type: \"aws_proxy\"\n                connectionType: \"INTERNET\"\n        openapi: 3.0.1\n        x-amazon-apigateway-cors:\n          allowMethods:\n            - \"POST\"\n          allowHeaders:\n            - \"content-type\"\n          maxAge: 0\n          allowCredentials: false\n          allowOrigins:\n          - \"*\"\n        x-amazon-apigateway-importexport-version: \"1.0\"\n\n  OrderStateMachine:\n    Type: AWS::Serverless::StateMachine\n    Properties:\n      Type: EXPRESS\n      DefinitionUri: order.asl.json\n      DefinitionSubstitutions:\n        MakePaymentFunctionArn: !GetAtt MakePaymentFunction.Arn\n        MakeOrderFunctionArn: !GetAtt MakeOrderFunction.Arn\n        OrderFailureFunctionArn: !GetAtt OrderFailureFunction.Arn\n      Logging:\n        Destinations:\n          - CloudWatchLogsLogGroup:\n              LogGroupArn: !GetAtt SAMLogs.Arn\n        IncludeExecutionData: true\n        Level: ALL\n      Policies:\n        - LambdaInvokePolicy:\n            FunctionName: !Ref MakePaymentFunction\n        - LambdaInvokePolicy:\n            FunctionName: !Ref MakeOrderFunction\n        - LambdaInvokePolicy:\n            FunctionName: !Ref OrderFailureFunction\n        - CloudWatchLogsFullAccess\n  \n  MakePaymentFunction:\n    Type: AWS::Serverless::Function \n    Properties:\n      CodeUri: ./makePaymentFunction\n      Handler: payment.handler\n      Runtime: nodejs12.x\n      Policies:\n        - DynamoDBCrudPolicy:\n            TableName: !Ref OrdersTable\n      Environment:\n        Variables:\n          ORDERS_TABLE: !Ref OrdersTable\n\n  MakeOrderFunction:\n    Type: AWS::Serverless::Function \n    Properties:\n      CodeUri: ./makeOrderFunction\n      Handler: order.handler\n      Runtime: nodejs12.x\n      Policies:\n        - DynamoDBCrudPolicy:\n            TableName: !Ref OrdersTable\n      Environment:\n        Variables:\n          ORDERS_TABLE: !Ref OrdersTable    \n\n  OrderFailureFunction:\n    Type: AWS::Serverless::Function \n    Properties:\n      CodeUri: ./orderFailureFunction\n      Handler: orderFailure.handler\n      Runtime: nodejs12.x\n      Policies:\n        - DynamoDBCrudPolicy:\n            TableName: !Ref OrdersTable\n      Environment:\n        Variables:\n          ORDERS_TABLE: !Ref OrdersTable\n\n  OrdersTable:\n    Type: AWS::Serverless::SimpleTable\n  \n  HttpApiRole:\n    Type: 'AWS::IAM::Role'\n    Properties:\n      AssumeRolePolicyDocument:\n        Version: 2012-10-17\n        Statement:\n          - Effect: Allow\n            Principal:\n              Service:\n              - apigateway.amazonaws.com\n            Action:\n              - 'sts:AssumeRole'\n      Policies:\n      - PolicyName: AllowSFNExec\n        PolicyDocument:\n          Version: 2012-10-17\n          Statement:\n            - Effect: Allow\n              Action: \"states:StartSyncExecution\"\n              Resource: !Ref OrderStateMachine\n\nOutputs:\n  OrderApi:\n    Description: \"API Gateway endpoint URL for Prod stage for Order function\"\n    Value: !Sub \"https://${OrdersApi}.execute-api.${AWS::Region}.amazonaws.com/order\"\n",
			"canonicalURL": "/github.com/mavi888/sync-step-function@a030780ccb77c82f7320a2509a2b0660e72bf2da/-/blob/template.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/mavi888/sync-step-function/blob/a030780ccb77c82f7320a2509a2b0660e72bf2da/template.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}