{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/pingcap/dm"
		},
		"file": {
			"name": "dm.yaml",
			"size": 0,
			"path": "openapi/spec/dm.yaml",
			"byteSize": 44051,
			"content": "openapi: \"3.0.0\"\ninfo:\n  title: DM OpenAPI DOC\n  version: \"2.1.0\"\nexternalDocs:\n  description: \"DM OpenAPI DOC\"\n  url: \"https://docs.pingcap.com/zh/tidb-data-migration/stable\"\nservers:\n  - url: \"https://you.domain.com/\"\ntags:\n  - name: source\n    description: source\n    externalDocs:\n      description: doc\n      url: \"https://docs.pingcap.com/zh/tidb-data-migration/stable/quick-start-create-source\"\n  - name: task\n    description: task\n    externalDocs:\n      description: doc\n      url: \"https://docs.pingcap.com/zh/tidb-data-migration/stable/quick-create-migration-task\"\n  - name: cluster\n    description: cluster\n\npaths:\n  /api/v1/docs:\n    get:\n      tags:\n        - doc\n      summary: \"get doc html\"\n      operationId: \"GetDocHTML\"\n      responses:\n        \"200\":\n          description: HTML content\n  /api/v1/dm.json:\n    get:\n      tags:\n        - doc\n      summary: \"get doc json\"\n      operationId: \"GetDocJSON\"\n      responses:\n        \"200\":\n          description: json content\n\n  /api/v1/sources:\n    post:\n      tags:\n        - source\n      summary: \"create new data source\"\n      operationId: \"DMAPICreateSource\"\n      requestBody:\n        description: \"request body\"\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/Source\"\n      responses:\n        \"201\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/Source\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n    get:\n      tags:\n        - source\n      summary: \"get data source list\"\n      operationId: \"DMAPIGetSourceList\"\n      parameters:\n        - name: \"with_status\"\n          in: query\n          required: false\n          description: \"get source with status\"\n          schema:\n            type: boolean\n            example: true\n      responses:\n        \"200\":\n          description: \"data source list\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetSourceListResponse\"\n  /api/v1/sources/{source-name}:\n    delete:\n      tags:\n        - source\n      summary: \"delete a data source\"\n      operationId: \"DMAPIDeleteSource\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n        - name: \"force\"\n          in: query\n          required: false\n          description: \"force stop task also stop the related tasks\"\n          schema:\n            type: boolean\n            example: true\n      responses:\n        \"204\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/DeleteSourceResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/status:\n    get:\n      tags:\n        - source\n      summary: \"get the current status of the data source\"\n      operationId: \"DMAPIGetSourceStatus\"\n      parameters:\n        - name: source-name\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-replica-01\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetSourceStatusResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/start-relay:\n    post:\n      tags:\n        - source\n      summary: \"enable relay log function for the data source\"\n      operationId: \"DMAPIStartRelay\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n      requestBody:\n        required: true\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/StartRelayRequest\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/stop-relay:\n    post:\n      tags:\n        - source\n      summary: \"disable relay log function for the data source\"\n      operationId: \"DMAPIStopRelay\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n      requestBody:\n        required: true\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/StopRelayRequest\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/pause-relay:\n    post:\n      tags:\n        - source\n      summary: \"pause relay log function for the data source\"\n      operationId: \"DMAPIPauseRelay\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/resume-relay:\n    post:\n      tags:\n        - source\n      summary: \"resume relay log function for the data source\"\n      operationId: \"DMAPIResumeRelay\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/transfer:\n    post:\n      tags:\n        - source\n      summary: \"transfer source to a free worker\"\n      operationId: \"DMAPITransferSource\"\n      parameters:\n        - name: \"source-name\"\n          in: path\n          description: \"globally unique data source name\"\n          required: true\n          schema:\n            type: string\n            example: \"mysql-01\"\n      requestBody:\n        required: true\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/WorkerNameRequest\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/schemas:\n    get:\n      tags:\n        - source\n      summary: \"get source schema list\"\n      operationId: \"DMAPIGetSourceSchemaList\"\n      parameters:\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/SchemaNameList\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/sources/{source-name}/schemas/{schema-name}:\n    get:\n      tags:\n        - source\n      summary: \"get source table list\"\n      operationId: \"DMAPIGetSourceTableList\"\n      parameters:\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n        - name: schema-name\n          in: path\n          description: \"schema name\"\n          required: true\n          schema:\n            type: string\n            example: \"db1\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/TableNameList\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n\n  /api/v1/tasks:\n    post:\n      tags:\n        - task\n      summary: \"create and start task\"\n      operationId: \"DMAPIStartTask\"\n      requestBody:\n        description: \"request body\"\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/CreateTaskRequest\"\n      responses:\n        \"201\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/Task\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n    get:\n      tags:\n        - task\n      summary: \"get task list\"\n      operationId: \"DMAPIGetTaskList\"\n      responses:\n        \"200\":\n          description: \"task list\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetTaskListResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}:\n    delete:\n      tags:\n        - task\n      summary: \"delete and stop task\"\n      operationId: \"DMAPIDeleteTask\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source_name_list\n          in: query\n          description: \"source name list\"\n          required: false\n          schema:\n            type: array\n            items:\n              type: string\n              example: \"source-1\"\n      responses:\n        \"204\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/status:\n    get:\n      tags:\n        - task\n      summary: \"get task status\"\n      operationId: \"DMAPIGetTaskStatus\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source_name_list\n          in: query\n          description: \"source name list\"\n          required: false\n          schema:\n            $ref: \"#/components/schemas/SourceNameList\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetTaskStatusResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/pause:\n    post:\n      tags:\n        - task\n      summary: \"pause task\"\n      operationId: \"DMAPPauseTask\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n      requestBody:\n        required: false\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/SourceNameList\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/resume:\n    post:\n      tags:\n        - task\n      summary: \"resume task\"\n      operationId: \"DMAPIResumeTask\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n      requestBody:\n        required: false\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/SourceNameList\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/sources/{source-name}/schemas:\n    get:\n      tags:\n        - task\n      summary: \"get task source schema list\"\n      operationId: \"DMAPIGetTaskSourceSchemaList\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/SchemaNameList\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/sources/{source-name}/schemas/{schema-name}:\n    get:\n      tags:\n        - task\n      summary: \"get task source table list\"\n      operationId: \"DMAPIGetTaskSourceTableList\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n        - name: schema-name\n          in: path\n          description: \"schema name\"\n          required: true\n          schema:\n            type: string\n            example: \"db1\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/TableNameList\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/tasks/{task-name}/sources/{source-name}/schemas/{schema-name}/{table-name}:\n    get:\n      tags:\n        - task\n      summary: \"get task source table structure\"\n      operationId: \"DMAPIGetTaskSourceTableStructure\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n        - name: schema-name\n          in: path\n          description: \"schema name\"\n          required: true\n          schema:\n            type: string\n            example: \"db1\"\n        - name: table-name\n          in: path\n          description: \"table name\"\n          required: true\n          schema:\n            type: string\n            example: \"table1\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/GetTaskTableStructureResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n    put:\n      tags:\n        - task\n      summary: \"operate task source table structure\"\n      operationId: \"DMAPIOperateTaskSourceTableStructure\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: schema-name\n          in: path\n          description: \"schema name\"\n          required: true\n          schema:\n            type: string\n            example: \"db1\"\n        - name: table-name\n          in: path\n          description: \"table name\"\n          required: true\n          schema:\n            type: string\n            example: \"table1\"\n      requestBody:\n        required: true\n        content:\n          \"application/json\":\n            schema:\n              $ref: \"#/components/schemas/OperateTaskTableStructureRequest\"\n      responses:\n        \"200\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n    delete:\n      tags:\n        - task\n      summary: \"delete task source table structure\"\n      operationId: \"DMAPIDeleteTaskSourceTableStructure\"\n      parameters:\n        - name: task-name\n          in: path\n          description: \"globally unique task name\"\n          required: true\n          schema:\n            type: string\n            example: \"task-1\"\n        - name: source-name\n          in: path\n          description: \"source name\"\n          required: true\n          schema:\n            type: string\n            example: \"source-1\"\n        - name: schema-name\n          in: path\n          description: \"schema name\"\n          required: true\n          schema:\n            type: string\n            example: \"db1\"\n        - name: table-name\n          in: path\n          description: \"table name\"\n          required: true\n          schema:\n            type: string\n            example: \"table1\"\n      responses:\n        \"204\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n\n  /api/v1/cluster/masters:\n    get:\n      tags:\n        - cluster\n      summary: \"get cluster master node list\"\n      operationId: \"DMAPIGetClusterMasterList\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetClusterMasterListResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/cluster/masters/{master-name}:\n    delete:\n      tags:\n        - cluster\n      summary: \"offline master node\"\n      operationId: \"DMAPIOfflineMasterNode\"\n      parameters:\n        - name: \"master-name\"\n          in: path\n          description: \"master node name\"\n          required: true\n          schema:\n            type: string\n            example: \"master1\"\n      responses:\n        \"204\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/cluster/workers:\n    get:\n      tags:\n        - cluster\n      summary: \"get cluster worker node list\"\n      operationId: \"DMAPIGetClusterWorkerList\"\n      responses:\n        \"200\":\n          description: \"success\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/GetClusterWorkerListResponse\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n  /api/v1/cluster/workers/{worker-name}:\n    delete:\n      tags:\n        - cluster\n      summary: \"offline worker node\"\n      operationId: \"DMAPIOfflineWorkerNode\"\n      parameters:\n        - name: \"worker-name\"\n          in: path\n          description: \"worker node name\"\n          required: true\n          schema:\n            type: string\n            example: \"master1\"\n      responses:\n        \"204\":\n          description: \"success\"\n        \"400\":\n          description: \"failed\"\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/ErrorWithMessage\"\n\ncomponents:\n  schemas:\n    ErrorWithMessage:\n      description: \"operation error\"\n      type: object\n      properties:\n        error_msg:\n          type: string\n          description: \"error message\"\n        error_code:\n          type: integer\n          description: \"error code\"\n      required:\n        - \"error_msg\"\n        - \"error_code\"\n\n    Security:\n      type: object\n      description: \"data source ssl configuration, the field will be hidden when getting the data source configuration from the interface\"\n      nullable: true\n      properties:\n        ssl_ca_content:\n          type: string\n          example: \"\"\n          description: \"certificate file content\"\n        ssl_cert_content:\n          type: string\n          example: \"\"\n          description: \"File content of PEM format/X509 format certificates\"\n        ssl_key_content:\n          type: string\n          example: \"\"\n          description: \"Content of the private key file in X509 format\"\n        cert_allowed_cn:\n          type: array\n          description: \"Common Name of SSL certificates\"\n          items:\n            type: string\n      required:\n        - \"ssl_ca_content\"\n        - \"ssl_cert_content\"\n        - \"ssl_key_content\"\n    Purge:\n      description: \"relay log cleanup policy configuration\"\n      type: object\n      properties:\n        interval:\n          type: integer\n          default: 3600\n          description: \"The interval to periodically check if the relay log is expired, default value: 3600, in seconds\"\n          format: int64\n          nullable: true\n        expires:\n          type: integer\n          default: 0\n          description: \"expiration time of relay log\"\n          format: int64\n          nullable: true\n        remain_space:\n          type: integer\n          default: 15\n          description: \"Minimum free disk space, in GB\"\n          format: int64\n          nullable: true\n    RelayStatus:\n      description: \"status of relay log\"\n      type: object\n      properties:\n        master_binlog:\n          type: string\n          example: \"(mysql-bin.000001, 1979)\"\n          description: \"upstream binlog file information\"\n        master_binlog_gtid:\n          type: string\n          example: \"e9a1fc22-ec08-11e9-b2ac-0242ac110003:1-7849\"\n          description: \"GTID of the upstream\"\n        relay_dir:\n          type: string\n          description: \"the directory where the relay log is stored\"\n          example: \"./sub_dir\"\n        relay_binlog_gtid:\n          type: string\n          example: \"e9a1fc22-ec08-11e9-b2ac-0242ac110003:1-7849\"\n          description: \"relay current GTID\"\n        relay_catch_up_master:\n          type: boolean\n          description: \"whether to catch up with upstream progress\"\n        stage:\n          type: string\n          description: \"current status\"\n          example: \"Running\"\n      required:\n        - \"master_binlog\"\n        - \"master_binlog_gtid\"\n        - \"relay_dir\"\n        - \"relay_binlog_gtid\"\n        - \"relay_catch_up_master\"\n        - \"stage\"\n    SourceStatus:\n      description: \"source status\"\n      type: object\n      properties:\n        source_name:\n          type: string\n          example: \"mysql-replica-01\"\n          description: \"source name\"\n        worker_name:\n          type: string\n          example: \"worker-1\"\n          description: \"The worker currently bound to the source\"\n        relay_status:\n          $ref: \"#/components/schemas/RelayStatus\"\n        error_msg:\n          type: string\n          description: \"error message when something wrong\"\n      required:\n        - \"source_name\"\n        - \"worker_name\"\n    Source:\n      type: object\n      description: \"source\"\n      properties:\n        source_name:\n          type: string\n          example: \"mysql-01\"\n          description: \"source name\"\n          nullable: false\n        host:\n          type: string\n          example: \"127.0.0.1\"\n          description: \"source address\"\n          nullable: false\n        port:\n          type: integer\n          example: 3306\n          description: \"source port\"\n          nullable: false\n        user:\n          type: string\n          example: \"root\"\n          description: \"source username\"\n          nullable: false\n        password:\n          type: string\n          example: \"123456\"\n          description: \"source password\"\n          nullable: false\n        enable_gtid:\n          type: boolean\n          example: false\n          default: false\n          description: \"whether to use GTID to pull binlogs from upstream\"\n          nullable: false\n        security:\n          $ref: \"#/components/schemas/Security\"\n        purge:\n          $ref: \"#/components/schemas/Purge\"\n        status_list:\n          type: array\n          items:\n            $ref: \"#/components/schemas/SourceStatus\"\n      required:\n        - \"source_name\"\n        - \"host\"\n        - \"port\"\n        - \"user\"\n        - \"password\"\n        - \"enable_gtid\"\n\n    ShardingGroup:\n      type: object\n      properties:\n        target:\n          type: string\n        ddl_list:\n          type: array\n          items:\n            type: string\n          description: \"\"\n        first_location:\n          type: string\n        synced:\n          type: array\n          items:\n            type: string\n          description: \"\"\n        unsynced:\n          type: array\n          items:\n            type: string\n          description: \"\"\n      required:\n        - \"target\"\n        - \"ddl_list\"\n        - \"first_location\"\n        - \"synced\"\n        - \"unsynced\"\n    LoadStatus:\n      type: object\n      description: \"status of load unit\"\n      properties:\n        finished_bytes:\n          type: integer\n          format: int64\n        total_bytes:\n          type: integer\n          format: int64\n        progress:\n          type: string\n        meta_binlog:\n          type: string\n        meta_binlog_gtid:\n          type: string\n      required:\n        - \"finished_bytes\"\n        - \"total_bytes\"\n        - \"progress\"\n        - \"meta_binlog\"\n        - \"meta_binlog_gtid\"\n    SyncStatus:\n      type: object\n      description: \"status of sync uuit\"\n      properties:\n        total_events:\n          type: integer\n          format: int64\n        total_tps:\n          type: integer\n          format: int64\n        recent_tps:\n          type: integer\n          format: int64\n        master_binlog:\n          type: string\n        master_binlog_gtid:\n          type: string\n        syncer_binlog:\n          type: string\n        syncer_binlog_gtid:\n          type: string\n        blocking_ddls:\n          type: array\n          items:\n            type: string\n          description: sharding DDL which current is blocking\n        unresolved_groups:\n          type: array\n          items:\n            $ref: \"#/components/schemas/ShardingGroup\"\n          description: sharding groups which current are un-resolved\n        synced:\n          type: boolean\n        binlog_type:\n          type: string\n        seconds_behind_master:\n          type: integer\n          format: int64\n      required:\n        - \"total_events\"\n        - \"total_tps\"\n        - \"recent_tps\"\n        - \"master_binlog\"\n        - \"master_binlog_gtid\"\n        - \"syncer_binlog\"\n        - \"syncer_binlog_gtid\"\n        - \"blocking_ddls\"\n        - \"unresolved_groups\"\n        - \"synced\"\n        - \"binlog_type\"\n        - \"seconds_behind_master\"\n    SubTaskStatus:\n      type: object\n      properties:\n        name:\n          type: string\n          description: task name\n        source_name:\n          type: string\n          description: source name\n        worker_name:\n          type: string\n          description: worker name\n        stage:\n          type: string\n          example: \"runing\"\n          description: \"current stage of the task\"\n        unit:\n          type: string\n          example: \"sync\"\n          description: \"task unit type\"\n        unresolved_ddl_lock_id:\n          type: string\n        load_status:\n          nullable: true\n          $ref: \"#/components/schemas/LoadStatus\"\n        sync_status:\n          nullable: true\n          $ref: \"#/components/schemas/SyncStatus\"\n      required:\n        - \"name\"\n        - \"source_name\"\n        - \"worker_name\"\n        - \"stage\"\n        - \"unit\"\n    TaskTargetDataBase:\n      type: object\n      description: \"downstream database configuration\"\n      properties:\n        host:\n          type: string\n          example: \"127.0.0.1\"\n          description: \"source address\"\n        port:\n          type: integer\n          example: 3306\n          description: \"ource port\"\n        user:\n          type: string\n          example: \"root\"\n          description: \"source username\"\n        password:\n          type: string\n          example: \"123456\"\n          description: \"source password\"\n        security:\n          $ref: \"#/components/schemas/Security\"\n      required:\n        - \"host\"\n        - \"port\"\n        - \"user\"\n        - \"password\"\n    TaskBinLogFilterRule:\n      description: \"Filtering rules at binlog level\"\n      type: object\n      properties:\n        ignore_event:\n          description: \"event type\"\n          type: array\n          items:\n            type: string\n            description: \"event type\"\n            example: \"all dml\"\n        ignore_sql:\n          description: \"sql pattern to filter\"\n          type: array\n          items:\n            type: string\n            description: \"sql pattern to filter\"\n            example: \"^Drop\"\n    TaskTableMigrateRule:\n      type: object\n      description: \"upstream table to downstream migrate rules\"\n      properties:\n        source:\n          type: object\n          description: source-related configuration\n          properties:\n            source_name:\n              type: string\n              description: source name\n              example: \"source-name\"\n            schema:\n              type: string\n              description: schema name, wildcard support\n              example: \"db-*\"\n            table:\n              type: string\n              description: table name, wildcard support\n              example: \"tb-*\"\n          required:\n            - \"source_name\"\n            - \"schema\"\n            - \"table\"\n        target:\n          type: object\n          description: downstream-related configuration\n          properties:\n            schema:\n              type: string\n              description: schema name, does not support wildcards\n              example: \"db1\"\n            table:\n              type: string\n              description: table name, does not support wildcards\n              example: \"tb1\"\n          required:\n            - \"schema\"\n            - \"table\"\n        binlog_filter_rule:\n          type: array\n          description: \"filter rule name\"\n          items:\n            type: string\n            example: rule-1\n      required:\n        - \"source\"\n    TaskFullMigrateConf:\n      description: configuration of full migrate tasks\n      type: object\n      properties:\n        export_threads:\n          type: integer\n          description: full export of concurrent\n          default: 4\n        import_threads:\n          type: integer\n          description: full import of concurrent\n          default: 16\n        data_dir:\n          type: string\n          example: \"./exported_data\"\n          description: \"storage dir name\"\n        consistency:\n          type: string\n          example: \"auto\"\n          description: \"to control the way in which data is exported for consistency assurance\"\n    TaskIncrMigrateConf:\n      description: configuration of incremental tasks\n      type: object\n      properties:\n        repl_threads:\n          type: integer\n          description: incremental task of concurrent\n          default: 16\n        repl_batch:\n          type: integer\n          description: incremental synchronization of batch execution sql quantities\n          default: 100\n    TaskSourceConf:\n      type: object\n      properties:\n        source_name:\n          type: string\n          example: \"mysql-replica-01\"\n          description: \"source name\"\n        binlog_name:\n          type: string\n          example: \"binlog.000001\"\n        binlog_pos:\n          type: integer\n          example: 4\n        binlog_gtid:\n          type: string\n          example: \"03fc0263-28c7-11e7-a653-6c0b84d59f30:1-7041423,05474d3c-28c7-11e7-8352-203db246dd3d:1-170\"\n      required:\n        - \"source_name\"\n    TaskSourceConfig:\n      type: object\n      description: \"source-related configuration\"\n      properties:\n        full_migrate_conf:\n          $ref: \"#/components/schemas/TaskFullMigrateConf\"\n        incr_migrate_conf:\n          $ref: \"#/components/schemas/TaskIncrMigrateConf\"\n        source_conf:\n          type: array\n          description: \"source configuration\"\n          items:\n            $ref: \"#/components/schemas/TaskSourceConf\"\n      required:\n        - \"source_conf\"\n    TaskCheckerConfig:\n      type: object\n      description: \"task status checker configuration\"\n      properties:\n        enable:\n          type: boolean\n          example: false\n          default: true\n          description: \"determines whether to enable task status checker\"\n        backoff_max:\n          type: string\n          example: \"5m0s\"\n          description: \"sets the longest time interval for the automatic recovery after errors are detected.\"\n        backoff_rollback:\n          type: string\n          example: \"5m0s\"\n          description: \"sets the time interval for adjusting the waiting time of the automatic recovery.\"\n    Task:\n      description: \"task\"\n      type: object\n      properties:\n        name:\n          type: string\n          example: \"task-1\"\n          description: \"task name\"\n        task_mode:\n          type: string\n          example: \"all\"\n          description: \"migrate mode\"\n          enum:\n            - \"full\"\n            - \"incremental\"\n            - \"all\"\n        shard_mode:\n          type: string\n          description: the way to coordinate DDL\n          enum:\n            - \"pessimistic\"\n            - \"optimistic\"\n        meta_schema:\n          type: string\n          example: \"dm-meta\"\n          description: \"downstream database for storing meta information\"\n          default: \"dm-meta\"\n        enhance_online_schema_change:\n          type: boolean\n          example: true\n          description: whether to enable support for the online ddl plugin\n          default: true\n        on_duplicate:\n          type: string\n          description: \"how to handle conflicted data\"\n          enum:\n            - \"overwrite\"\n            - \"error\"\n        target_config:\n          $ref: \"#/components/schemas/TaskTargetDataBase\"\n        binlog_filter_rule:\n          type: object\n          additionalProperties:\n            $ref: \"#/components/schemas/TaskBinLogFilterRule\"\n        table_migrate_rule:\n          type: array\n          description: \"table migrate rule\"\n          items:\n            $ref: \"#/components/schemas/TaskTableMigrateRule\"\n        source_config:\n          $ref: \"#/components/schemas/TaskSourceConfig\"\n      required:\n        - \"name\"\n        - \"task_mode\"\n        - \"enhance_online_schema_change\"\n        - \"on_duplicate\"\n        - \"target_config\"\n        - \"table_migrate_rule\"\n        - \"source_config\"\n\n    ClusterMaster:\n      type: object\n      properties:\n        name:\n          type: string\n          example: master1\n        alive:\n          type: boolean\n          example: true\n          description: \"online status of this master\"\n        leader:\n          type: boolean\n          example: true\n          description: \"is this master the leader\"\n        addr:\n          type: string\n          example: \"127.0.0.1:8261\"\n          description: \"address of the current master node\"\n      required:\n        - \"name\"\n        - \"alive\"\n        - \"leader\"\n        - \"addr\"\n    ClusterWorker:\n      type: object\n      properties:\n        name:\n          type: string\n          example: worker1\n        addr:\n          type: string\n          example: \"127.0.0.1:8261\"\n          description: \"address of the current master node\"\n        bound_stage:\n          type: string\n          example: \"bound\"\n          description: \"bound stage of this worker node\"\n        bound_source_name:\n          type: string\n          example: \"mysql-01\"\n          description: \"bound source name of this worker node\"\n      required:\n        - \"name\"\n        - \"addr\"\n        - \"bound_stage\"\n        - \"bound_source_name\"\n\n    WorkerNameList:\n      description: worker name list\n      type: array\n      items:\n        type: string\n        example: \"worker-1\"\n    SourceNameList:\n      description: source name list\n      type: array\n      items:\n        type: string\n        example: \"source-1\"\n    SchemaNameList:\n      description: schema name list\n      type: array\n      items:\n        type: string\n        example: \"db1\"\n    TableNameList:\n      description: schema name list\n      type: array\n      items:\n        type: string\n        example: \"table1\"\n    TaskNameList:\n      description: task name list\n      type: array\n      items:\n        type: string\n        example: \"task-1\"\n\n    WorkerNameRequest:\n      description: requests related to workers\n      type: object\n      properties:\n        worker_name:\n          type: string\n          example: \"worker-1\"\n          description: \"worker name\"\n      required:\n        - \"worker_name\"\n    StartRelayRequest:\n      description: action to start a relay request\n      type: object\n      properties:\n        worker_name_list:\n          $ref: \"#/components/schemas/WorkerNameList\"\n        relay_binlog_name:\n          type: string\n          example: \"mysql-bin.000002\"\n          description: \"starting filename of the upstream binlog\"\n          nullable: true\n        relay_binlog_gtid:\n          type: string\n          example: \"e9a1fc22-ec08-11e9-b2ac-0242ac110003:1-7849\"\n          description: \"starting GTID of the upstream binlog\"\n          nullable: true\n        relay_dir:\n          type: string\n          default: \"./relay_log\"\n          description: \"the directory where the relay log is stored\"\n          nullable: true\n      required:\n        - \"worker_name_list\"\n    StopRelayRequest:\n      description: action to stop a relay request\n      type: object\n      properties:\n        worker_name_list:\n          $ref: \"#/components/schemas/WorkerNameList\"\n      required:\n        - \"worker_name_list\"\n    CreateTaskRequest:\n      type: object\n      properties:\n        remove_meta:\n          type: boolean\n          default: false\n          description: whether to remove meta database in downstream database\n        task:\n          $ref: \"#/components/schemas/Task\"\n        source_name_list:\n          $ref: \"#/components/schemas/SourceNameList\"\n      required:\n        - \"remove_meta\"\n        - \"task\"\n    OperateTaskTableStructureRequest:\n      description: action to operate table request\n      type: object\n      properties:\n        sql_content:\n          type: string\n          example: \"CREATE TABLE `t1` ( `c1` int(11) DEFAULT NULL, `c2` int(11) DEFAULT NULL, `c3` int(11) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;\"\n          description: \"sql you want to operate\"\n        flush:\n          type: boolean\n          default: true\n          description: \"Writes the schema to the checkpoint so that DM can load it after restarting the task\"\n        sync:\n          type: boolean\n          description: \"Updates the optimistic sharding metadata with this schema only used when an error occurs in the optimistic sharding DDL mode\"\n      required:\n        - \"sql_content\"\n\n    GetSourceListResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/Source\"\n      required:\n        - \"total\"\n        - \"data\"\n    GetSourceStatusResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/SourceStatus\"\n      required:\n        - \"total\"\n        - \"data\"\n    DeleteSourceResponse:\n      type: object\n      properties:\n        task_name_list:\n          type: object\n          $ref: \"#/components/schemas/TaskNameList\"\n\n    GetTaskListResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/Task\"\n      required:\n        - \"total\"\n        - \"data\"\n    GetTaskStatusResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/SubTaskStatus\"\n      required:\n        - \"total\"\n        - \"data\"\n    GetTaskTableStructureResponse:\n      type: object\n      properties:\n        schema_name:\n          type: string\n          example: \"db1\"\n        table_name:\n          type: string\n          example: \"table1\"\n        schema_create_sql:\n          type: string\n          example: \"CREATE TABLE `t1` (`id` int(11) NOT NULL AUTO_INCREMENT,PRIMARY KEY (`id`) /*T![clustered_index] CLUSTERED */) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin\"\n      required:\n        - \"table_name\"\n        - \"table_create_sql\"\n\n    GetClusterWorkerListResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/ClusterWorker\"\n      required:\n        - \"total\"\n        - \"data\"\n    GetClusterMasterListResponse:\n      type: object\n      properties:\n        total:\n          type: integer\n        data:\n          type: array\n          items:\n            $ref: \"#/components/schemas/ClusterMaster\"\n      required:\n        - \"total\"\n        - \"data\"\n",
			"canonicalURL": "/github.com/pingcap/dm@da80bda17dce4d44c2bd830b58d822dac544b08b/-/blob/openapi/spec/dm.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/pingcap/dm/blob/da80bda17dce4d44c2bd830b58d822dac544b08b/openapi/spec/dm.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}