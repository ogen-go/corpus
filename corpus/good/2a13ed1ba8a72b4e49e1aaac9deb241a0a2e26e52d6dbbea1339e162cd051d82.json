{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/gematik/api-ePA"
		},
		"file": {
			"name": "device_management.yaml",
			"size": 0,
			"path": "src/openapi/device_management.yaml",
			"byteSize": 10410,
			"content": "openapi: 3.0.1\ninfo:\n  title: \"ePA Authorization Service - Device Management\"\n  description: |\n    This REST API describes the interface of the ePA Authorization Service for Device Management.\n  contact:\n    name: \"gematik\"\n    email: \"epa@gematik.de\"\n  version: \"1.0.2\"\n  # 1.0.2 - deviceID parameter moved to header\n  #       - new error reponse 412 (DeviceUnknown) added\n  #       - unused error responses deleted\n  # 1.0.1 - fixed typo in AuthenticationAssertion \n  # 1.0.0 - fixed bugs of version 0.0.1, \n  #       - renamed parameters for search/update/delete, \n  #       - some editorial modifications\n  # 0.0.1 - initial version\ntags:\n  - name: \"Devices\"\n    description: \"Everything about a Device in the ePA Authorization Service.\"\npaths:\n  /devices/{hcid}/{kvnr}:\n    get:\n      tags:\n      - \"Devices\"\n      summary: \"Get a list of all devices.\"\n      operationId: \"getDevices\"\n      parameters:\n      - name: \"AuthenticationAssertion\"\n        in: header\n        description: \"The Authentication Assertion from the Authentication Service\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/AuthenticationAssertionType'\n      - name: \"deviceId\"\n        in: header\n        description: \"The requesting clients device Id (user's device Id)\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      - name: \"hcid\"\n        in: path\n        description: \"The HCID to identify the tenant\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/HomeCommunityIdType'\n      - name: \"kvnr\"\n        in: path\n        description: \"The KVNR to identify the record\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/KVNRType'\n      responses:\n        200:\n          description: \"OK\"\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/DeviceType'\n        403:\n          $ref: \"#/components/responses/Error403NotAllowed\"\n        404:\n          $ref: \"#/components/responses/Error404RecordNotFound\"\n        412:\n          $ref: \"#/components/responses/Error412DeviceUnknown\"\n        500:\n          $ref: \"#/components/responses/Error500InternalError\"\n  /devices/{hcid}/{kvnr}/{affectedId}:\n    get:\n      tags:\n      - \"Devices\"\n      summary: \"Find a device\"\n      description: |\n        Returns information of a single device.\n      operationId: \"getDeviceById\"\n      parameters:\n      - name: \"AuthenticationAssertion\"\n        in: header\n        description: \"The Authentication Assertion from the Authentication Service\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/AuthenticationAssertionType'\n      - name: \"deviceId\"\n        in: header\n        description: \"The requesting clients device Id (user's device Id)\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      - name: \"hcid\"\n        in: path\n        description: \"The HCID to identify the tenant\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/HomeCommunityIdType'\n      - name: \"kvnr\"\n        in: path\n        description: \"The KVNR to identify the record\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/KVNRType'\n      - name: \"affectedId\"\n        in: \"path\"\n        description: \"The Id of the device to be searched for.\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      responses:\n        200:\n          description: \"OK\"\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceType'\n        403:\n          $ref: \"#/components/responses/Error403NotAllowed\"\n        404:\n          $ref: \"#/components/responses/Error404DeviceNotFound\"\n        412:\n          $ref: \"#/components/responses/Error412DeviceUnknown\"\n        500:\n          $ref: \"#/components/responses/Error500InternalError\"\n    put:\n      tags:\n      - \"Devices\"\n      summary: \"Update an existing device\"\n      description: |\n        To rename a device, set `name` to the new value.  \n        To lock a device, set the `state` to `LOCKED`.\n        To unlock a device, set the `state` to `ACTIVATED`.\n      operationId: \"updateDevice\"\n      parameters:\n      - name: \"AuthenticationAssertion\"\n        in: header\n        description: \"The Authentication Assertion from the Authentication Service\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/AuthenticationAssertionType'\n      - name: \"deviceId\"\n        in: header\n        description: \"The requesting clients device Id (user's device Id)\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      - name: \"hcid\"\n        in: path\n        description: \"The HCID to identify the tenant\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/HomeCommunityIdType'\n      - name: \"kvnr\"\n        in: path\n        description: \"The KVNR to identify the record\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/KVNRType'\n      - name: \"affectedId\"\n        in: \"path\"\n        description: \"The Id of the device to be updated.\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      requestBody:\n        $ref: '#/components/requestBodies/DeviceUpdateBody'\n      responses:\n        200:\n          description: \"Device updated successfully.\"\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceType'\n        400:\n          $ref: \"#/components/responses/Error400DataInvalid\"\n        403:\n          $ref: \"#/components/responses/Error403NotAllowed\"\n        404:\n          $ref: \"#/components/responses/Error404DeviceNotFound\"\n        412:\n          $ref: \"#/components/responses/Error412DeviceUnknown\"\n        500:\n          $ref: \"#/components/responses/Error500InternalError\"\n    delete:\n      tags:\n      - \"Devices\"\n      summary: \"Delete a device\"\n      description: |\n        The device will be deleted.\n        The active device can't be deleted (Condition: affectedId != deviceId).\n      operationId: \"deleteDevice\"\n      parameters:\n      - name: \"AuthenticationAssertion\"\n        in: header\n        description: \"The Authentication Assertion from the Authentication Service\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/AuthenticationAssertionType'\n      - name: \"deviceId\"\n        in: header\n        description: \"The requesting clients device Id (user's device Id)\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      - name: \"hcid\"\n        in: path\n        description: \"The HCID to identify the tenant\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/HomeCommunityIdType'\n      - name: \"kvnr\"\n        in: path\n        description: \"The KVNR to identify the record\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/KVNRType'\n      - name: \"affectedId\"\n        in: \"path\"\n        description: \"The Id of the device to be deleted.\"\n        required: true\n        schema:\n          $ref: '#/components/schemas/DeviceIdType'\n      responses:\n        200:\n          description: \"Device deleted successfully\"\n        403:\n          $ref: \"#/components/responses/Error403NotAllowed\"\n        404:\n          $ref: \"#/components/responses/Error404DeviceNotFound\"\n        412:\n          $ref: \"#/components/responses/Error412DeviceUnknown\"\n        500:\n          $ref: \"#/components/responses/Error500InternalError\"\n  \ncomponents:\n  \n  # SCHEMAS\n  schemas:\n    DeviceType:\n      type: object\n      required:\n      - \"deviceId\"\n      - \"name\"\n      - \"state\"\n      - \"added\"\n      properties:\n        deviceId:\n          $ref: '#/components/schemas/DeviceIdType'\n        name:\n          $ref: '#/components/schemas/DeviceNameType'\n        state:\n          $ref: '#/components/schemas/DeviceStateType'\n        added:\n          type: string\n          format: date-time\n          description: \"Point in time when the device was added, i.e. the point in time when the activation process has been started.\"\n        lastUsed:\n          type: string\n          format: date-time\n          description: \"Point in time when this device has been used the last time.\"\n    DeviceUpdateSchema:\n      type: object\n      properties:\n        name:\n          $ref: '#/components/schemas/DeviceNameType'\n        state:\n          $ref: '#/components/schemas/DeviceStateType'\n    DeviceStateType:\n      type: string\n      description: \"Represents the state of a Device\"\n      enum:\n      - \"ACTIVATION_PENDING\"\n      - \"ACTIVATED\"\n      - \"LOCKED\"\n    DeviceIdType:\n      type: \"string\"\n      format: base64url\n      description: \"The ID of a Device. It needs to be encoded using base64url. Base64 is not sufficient, as it may contain e.g. slashes which alter the path when the device id is used in the url. \"\n      example: \"ofDbYdEeFm3CQ1OgK4Dlp4RODOa38NJv_EHr4cJMyJA\"\n    DeviceNameType:\n      type: \"string\"\n      description: \"The Name of a Device\"\n      minLength: 1\n      maxLength: 64\n    AuthenticationAssertionType:\n      type: \"string\"\n      format: byte\n      description: \"Base64-encoded authentication assertion\"\n    KVNRType:\n      type: \"string\"\n      description: \"The ID / KVNR of an insurant\"\n      pattern: '^[A-Z]{1}\\d{9}$'\n      example: \"Z123456789\"\n    HomeCommunityIdType:\n      type: \"string\"\n      description: \"The HCID (OID) of a Record System\"\n      example: \"1.2.276.0.76.3.1.315.3.1\"\n  # REQUESTS\n  requestBodies:\n    DeviceUpdateBody:\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/DeviceUpdateSchema'\n      description: Device object that needs to be updated\n      required: true\n\n  # RESPONSES\n  responses:\n    Error400DataInvalid:\n      description: |\n        Invalid Data supplied\n    Error403NotAllowed:\n      description: |\n        Not allowed\n    Error404RecordNotFound:\n      description: |\n        Record not found\n    Error404DeviceNotFound:\n      description: |\n        Device not found\n    Error412DeviceUnknown:\n      description: |\n        Device unknown\n    Error500InternalError:\n      description: |\n        Internal Error\n",
			"canonicalURL": "/github.com/gematik/api-ePA@ed610ee26a1ee787e39e9470d50c59245192e19d/-/blob/src/openapi/device_management.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/gematik/api-ePA/blob/ed610ee26a1ee787e39e9470d50c59245192e19d/src/openapi/device_management.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}