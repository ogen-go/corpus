{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/datablade-io/daisy"
		},
		"file": {
			"name": "sqlanalyze.yaml",
			"size": 0,
			"path": "spec/rest-api/sqlanalyze.yaml",
			"byteSize": 8488,
			"content": "openapi: 3.0.0\ninfo:\n  title: daisy api\n  version: '1.0'\n  description: daisy api\npaths:\n  /dae/v1/sqlanalyzer:\n    post:\n      summary: Analyze SQL Query Result\n      operationId: sqlanalyzer\n      responses:\n        '200':\n          $ref: '#/components/responses/analyzeResponse'\n        '400':\n          $ref: '#/components/responses/error'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              description: ''\n              type: object\n              x-examples:\n                example-1:\n                  query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100;'\n              properties:\n                query:\n                  type: string\n                  minLength: 1\n                  description: SQL query to analyze\n              required:\n                - query\n            examples:\n              sqlanalyze-req-1:\n                value:\n                  query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100'\n        description: Post the query to analyze\n      description: Analyze the query and get the required and result columns\n      parameters:\n        - name: x-daisy-request-id\n          in: header\n          required: false\n          description: the unique id to identify a ddl request\n          schema:\n            type: string\n        - name: x-daisy-query-id\n          in: header\n          required: false\n          description: the unique id to identify a ddl request\n          schema:\n            type: string\n        - name: user\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-user\n          in: header\n          required: false\n          schema:\n            type: string\n        - name: password\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-key\n          in: header\n          required: false\n          schema:\n            type: string\n        - name: quota_key\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-quota\n          in: header\n          required: false\n          schema:\n            type: string\n    parameters: []\ncomponents:\n  schemas: {}\n  responses:\n    analyzeResponse:\n      description: Example response\n      content:\n        application/json:\n          schema:\n            description: ''\n            type: object\n            properties:\n              has_aggr:\n                type: boolean\n              has_subquery:\n                type: boolean\n              has_table_join:\n                type: boolean\n              has_union:\n                type: boolean\n              original_query:\n                type: string\n                minLength: 1\n              query_type:\n                type: string\n                minLength: 1\n              required_columns:\n                type: array\n                uniqueItems: true\n                minItems: 1\n                items:\n                  required:\n                    - column\n                    - column_type\n                    - database\n                    - is_view\n                    - table\n                  properties:\n                    column:\n                      type: string\n                      minLength: 1\n                    column_type:\n                      type: string\n                      minLength: 1\n                    database:\n                      type: string\n                      minLength: 1\n                    is_view:\n                      type: boolean\n                    table:\n                      type: string\n                      minLength: 1\n              result_columns:\n                type: array\n                uniqueItems: true\n                minItems: 1\n                items:\n                  required:\n                    - column\n                    - column_type\n                  properties:\n                    column:\n                      type: string\n                      minLength: 1\n                    column_type:\n                      type: string\n                      minLength: 1\n              rewritten_query:\n                type: string\n                minLength: 1\n            required:\n              - has_aggr\n              - has_subquery\n              - has_table_join\n              - has_union\n              - original_query\n              - query_type\n              - required_columns\n              - result_columns\n              - rewritten_query\n            x-examples:\n              example-1:\n                has_aggr: false\n                has_subquery: false\n                has_table_join: true\n                has_union: false\n                original_query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100;'\n                query_type: SELECT\n                required_columns:\n                  - column: key\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: tbl_left\n                  - column: r\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: tbl_left\n                  - column: a\n                    column_type: String\n                    database: default\n                    is_view: false\n                    table: test_dict\n                  - column: key\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: test_dict\n                result_columns:\n                  - column: a\n                    column_type: String\n                  - column: r\n                    column_type: UInt64\n                rewritten_query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100;'\n          examples:\n            example1:\n              value:\n                has_aggr: false\n                has_subquery: false\n                has_table_join: true\n                has_union: false\n                original_query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100;'\n                query_type: SELECT\n                required_columns:\n                  - column: key\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: tbl_left\n                  - column: r\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: tbl_left\n                  - column: a\n                    column_type: String\n                    database: default\n                    is_view: false\n                    table: test_dict\n                  - column: key\n                    column_type: UInt64\n                    database: default\n                    is_view: false\n                    table: test_dict\n                result_columns:\n                  - column: a\n                    column_type: String\n                  - column: r\n                    column_type: UInt64\n                rewritten_query: 'select test_dict.a, r from tbl_left any  inner join test_dict on test_dict.key  = tbl_left.key limit 100;'\n    error:\n      description: Example response\n      content:\n        application/json:\n          schema:\n            description: ''\n            type: object\n            x-examples:\n              example-1:\n                code: 408\n                error_msg: Empty query\n                request_id: f488db48-e3a5-4081-b8f4-9573158a4023\n            properties:\n              code:\n                type: number\n                description: error code\n              error_msg:\n                type: string\n                minLength: 1\n                description: readable error message\n              request_id:\n                type: string\n                minLength: 1\n                description: ''\n            required:\n              - code\n              - error_msg\n              - request_id\n          examples:\n            empty-query-error:\n              value:\n                code: 408\n                error_msg: Empty query\n                request_id: f488db48-e3a5-4081-b8f4-9573158a4023\n",
			"canonicalURL": "/github.com/datablade-io/daisy@b5c9b7b1cc496c1fd45cb5678c273b089d899c63/-/blob/spec/rest-api/sqlanalyze.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/datablade-io/daisy/blob/b5c9b7b1cc496c1fd45cb5678c273b089d899c63/spec/rest-api/sqlanalyze.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}