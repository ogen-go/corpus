{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/RedHatInsights/drift-backend"
		},
		"file": {
			"name": "api.spec.yaml",
			"size": 0,
			"path": "drift/openapi/api.spec.yaml",
			"byteSize": 9576,
			"content": "---\nopenapi: 3.0.1\ninfo:\n  version: \"1.0\"\n  title: Drift Backend Service\n  description: Service that returns differences between systems.\n  license:\n    name: Apache 2.0\n    url: https://www.apache.org/licenses/LICENSE-2.0.html\n\nservers:\n  - url: \"{{ path_prefix }}{{ app_name }}/v1\"\n\npaths:\n  /version:\n    get:\n      summary: get the service version\n      description: \"get the service version\"\n      operationId: drift.views.v1.get_version\n      responses:\n        '200':\n          description: a service version\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Version'\n  /comparison_report:\n    get:\n      summary: fetch comparison report\n      description: \"Fetch a comparison report for given system IDs. This will\n                    only fetch the most current system state using data from\n                    inventory service.\"\n      operationId: drift.views.v1.comparison_report_get\n      parameters:\n        - name: system_ids[]\n          in: query\n          schema:\n            type: array\n            items:\n              type: string\n              format: uuid\n          required: false\n          description: list of system IDs to generate report for\n        - name: baseline_ids[]\n          in: query\n          schema:\n            type: array\n            items:\n              type: string\n              format: uuid\n          required: false\n          description: list of baseline IDs to generate report for\n        - name: historical_system_profile_ids[]\n          in: query\n          schema:\n            type: array\n            items:\n              type: string\n          required: false\n          description: list of historical system profile IDs to generate report for\n        - name: reference_id\n          in: query\n          schema:\n            type: string\n          required: false\n          description: reference ID (could be system, baseline, or HSP)\n        - name: short_circuit\n          in: query\n          schema:\n            type: boolean\n          required: false\n          description: \"defaults to False, only True when used internally to trigger\n                        Notifications if drift has occurred between a current system\n                        checking in and any baselines with which it is associated.\"\n      responses:\n        '200':\n          description: a comparison report for the given system IDs\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ComparisonReport\"\n              examples:\n                jsonObject:\n                  summary: A sample comparison report\n                  externalValue: \"https://git.io/fhQ00\"\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '403':\n          $ref: '#/components/responses/Forbidden'\n        '500':\n          $ref: '#/components/responses/InternalServerError'\n    post:\n      summary: fetch comparison report\n      description: \"Fetch a comparison report for given system IDs. This will\n                    only fetch the most current system state using data from\n                    inventory service.\"\n      operationId: drift.views.v1.comparison_report_post\n      requestBody:\n        required: true\n        description: list of system IDs to generate report for\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/ComparisonRequest\"\n      responses:\n        '200':\n          description: a comparison report for the given system IDs\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ComparisonReport\"\n              examples:\n                jsonObject:\n                  summary: A sample comparison report\n                  externalValue: \"https://git.io/fhQ00\"\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '403':\n          $ref: '#/components/responses/Forbidden'\n        '500':\n          $ref: '#/components/responses/InternalServerError'\n\ncomponents:\n  responses:\n    InternalServerError:\n      description: \"An internal server error has occurred.\"\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/Error\"\n    Forbidden:\n      description: \"Insufficient permissions to fulfill request.\"\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/Error\"\n    BadRequest:\n      description: \"The server could not process the current request.\"\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/Error\"\n  securitySchemes:\n    ApiKeyAuth:\n      description: \"Identity header provided by 3scale\"\n      in: \"header\"\n      name: \"x-rh-identity\"\n      type: \"apiKey\"\n  schemas:\n    Version:\n      required:\n        - version\n      properties:\n        version:\n          type: string\n    ComparisonRequest:\n      properties:\n        system_ids:\n          type: array\n          items:\n            type: string\n        baseline_ids:\n          type: array\n          items:\n            type: string\n        historical_system_profile_ids:\n          type: array\n          items:\n            type: string\n        reference_id:\n          type: string\n        short_circuit:\n          type: boolean\n    Error:\n      required:\n        - detail\n        - status\n        - title\n        - type\n      properties:\n        detail:\n          type: string\n        status:\n          type: integer\n        title:\n          type: string\n        type:\n          type: string\n    ComparisonReport:\n      required:\n        - facts\n        - systems\n      properties:\n        facts:\n          type: array\n          items:\n            $ref: \"#/components/schemas/FactComparison\"\n        systems:\n          type: array\n          items:\n            $ref: \"#/components/schemas/System\"\n        baselines:\n          type: array\n          items:\n            $ref: \"#/components/schemas/Baseline\"\n        historical_system_profiles:\n          type: array\n          items:\n            $ref: \"#/components/schemas/HistoricalSystemProfile\"\n        drift_event_notify:\n          type: boolean\n    FactComparison:\n      description: \"A list of fact names, states, and systems. This is useful\n                    for displaying rows of facts to compare. Note that if the\n                    'comparisons' array is populated, the 'system' field\n                    will not be used. The 'comparisons' array is used for\n                    creating nested values.\n                    If a fact for one system is N/A, it will make the entire\n                    status N/A. However, if facts are being grouped and one\n                    fact is in DIFFERENT state, then the group's roll-up status\n                    will be DIFFERENT.\"\n      required:\n        - name\n        - state\n      properties:\n        name:\n          type: string\n        state:\n          type: string\n          enum: [SAME, DIFFERENT, N/A, INCOMPLETE_DATA, INCOMPLETE_DATA_OBFUSCATED]\n        multivalues:\n          type: array\n          items:\n            $ref: \"#/components/schemas/Multivalue\"\n        systems:\n          type: array\n          items:\n            oneOf:\n              - $ref: \"#/components/schemas/SystemIdValue\"\n              - $ref: \"#/components/schemas/SystemIdValueList\"\n              - $ref: \"#/components/schemas/Multivalue\"\n        comparisons:\n          type: array\n          items:\n            $ref: \"#/components/schemas/FactComparison\"\n    SystemIdValue:\n      required:\n        - id\n        - value\n      properties:\n        id:\n          type: string\n          format: uuid\n        is_obfuscated:\n          type: boolean\n        value:\n          type: string\n    SystemIdValueList:\n      required:\n        - id\n        - value\n      properties:\n        id:\n          type: string\n          format: uuid\n        value:\n          type: array\n          items:\n            type: string\n    Multivalue:\n      required:\n        - state\n        - systems\n      properties:\n        state:\n          type: string\n          enum: [SAME, DIFFERENT]\n        systems:\n          type: array\n          items:\n            $ref: \"#/components/schemas/SystemIdValue\"\n    Baseline:\n      description: \"Display information for the baselines used\"\n      required:\n        - display_name\n        - id\n        - updated\n      properties:\n        display_name:\n          type: string\n        id:\n          type: string\n          format: uuid\n        updated:\n          type: string\n          format: date-time\n    HistoricalSystemProfile:\n      description: \"Display information for the HSPs used\"\n      required:\n        - display_name\n        - id\n        - updated\n      properties:\n        display_name:\n          type: string\n        id:\n          type: string\n        updated:\n          type: string\n          format: date-time\n    System:\n      description: \"The system ID, display_name, and last updated timestamp for each\n                    system in the report. The display_name will try to populate\n                    from the inventory service record's display_name, fqdn, and\n                    finally ID.\"\n      required:\n        - display_name\n        - id\n        - last_updated\n        - system_profile_exists\n      properties:\n        display_name:\n          type: string\n        id:\n          type: string\n          format: uuid\n        system_profile_exists:\n          type: boolean\n        last_updated:\n          type: string\n          format: date-time\n",
			"canonicalURL": "/github.com/RedHatInsights/drift-backend@4f85f94e8b67b038d7ef2b2c9a1630c7736e69af/-/blob/drift/openapi/api.spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/RedHatInsights/drift-backend/blob/4f85f94e8b67b038d7ef2b2c9a1630c7736e69af/drift/openapi/api.spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}