{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/wso2/docs-apim"
		},
		"file": {
			"name": "enforcer-v1.0.0.yaml",
			"size": 0,
			"path": "en/docs/deploy-and-publish/deploy-on-gateway/choreo-connect/troubleshooting/enforcer-admin-api/enforcer-v1.0.0.yaml",
			"byteSize": 17138,
			"content": "#   Copyright (c) 2021, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n#\n#   Licensed under the Apache License, Version 2.0 (the \"License\");\n#   you may not use this file except in compliance with the License.\n#   You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n#   Unless required by applicable law or agreed to in writing, software\n#   distributed under the License is distributed on an \"AS IS\" BASIS,\n#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#   See the License for the specific language governing permissions and\n#   limitations under the License.\n################################################################################\n---\nopenapi: 3.0.0\ninfo:\n  title: Choreo Connect - Enforcer Admin API\n  description: |\n    This document specifies a **RESTful API** for **Choreo Connect - Enforcer**.\n\n    It's difficult to diagnose an authentication problem in API invocation due to token validation failure even with an active subscription on the Choreo Connect side.\n    The reason for this is because we are unable to examine and validate if subscription-related data exists in the in-memory data mappings.\n    This admin rest API gets the information from the data maps that are stored in memory.\n\n    # Authentication\n    The Enforcer REST API is protected using Basic Authentication. The credentials are defined in the config.toml as follows.\n    \n    ```\n    [enforcer.management]\n      username = \"admin\"\n      password = \"admin\"\n    ```\n\n    **Sample request**\n    ```\n    curl 'https://localhost:9001/api/info?version=1.0.0\u0026context=/pizzashack/1.0.0' \\\n    -H 'Authorization: Basic YWRtaW46YWRtaW4=' -k\n    ```\n    Following is a sample response after invoking the above curl.\n    ```\n    {\n        \"apiId\": 2,\n        \"provider\": \"admin\",\n        \"name\": \"PizzaShackAPI\",\n        \"version\": \"1.0.0\",\n        \"context\": \"/pizzashack/1.0.0\",\n        \"tier\": \"\",\n        \"apiType\": null,\n        \"apiUUID\": \"cb8e6ad0-76c2-4d90-b8f7-4f8d784c025a\",\n        \"lcState\": \"PUBLISHED\",\n        \"subscriptions\": [\n            {\n                \"subscriptionId\": \"364502d9-5ae8-4329-8741-c98edc468ec5\",\n                \"policyId\": \"Unlimited\",\n                \"apiUUID\": \"cb8e6ad0-76c2-4d90-b8f7-4f8d784c025a\",\n                \"appUUID\": \"a6356fbb-b880-4fd0-8047-74a98ad5a798\",\n                \"subscriptionState\": \"UNBLOCKED\",\n                \"timeStamp\": 0,\n                \"applicationInfo\": {\n                    \"id\": 1,\n                    \"uuid\": \"a6356fbb-b880-4fd0-8047-74a98ad5a798\",\n                    \"name\": \"DefaultApplication\",\n                    \"subId\": 1,\n                    \"subName\": \"admin\",\n                    \"policy\": \"Unlimited\",\n                    \"tokenType\": null,\n                    \"tenantDomain\": \"carbon.super\",\n                    \"groupIds\": [],\n                    \"consumerKey\": \"BVanBDv0EX6fEIv6dpB4fommINQa\"\n                }\n            }\n        ],\n        \"defaultVersion\": false\n    }\n    ```\n  contact:\n    name: WSO2\n    url: http://wso2.com/choreo/choreo-connect/\n    email: architecture@wso2.com\n  license:\n    name: Apache 2.0\n    url: http://www.apache.org/licenses/LICENSE-2.0.html\n  version: 1.0.0\nservers:\n  - url: https://apis.enforcer.cc.wso2.com\npaths:\n  /api/info:\n    get:\n      tags:\n      - APIs\n      summary: Get API subscription information\n      description: |\n       Get the subscription information of an API by providing the API version and API context.\n      operationId: getAPIInfo\n      parameters:\n      - name: version\n        in: query\n        description: API Version\n        required: true\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: context\n        in: query\n        description: API Context\n        required: true\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: API subscription information\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/APIInfo'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/api/info?version=1.0.0\u0026context=/pizzashack/1.0.0\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /apis:\n    get:\n      tags:\n      - APIs\n      summary: Searche APIs from the API map\n      description: |\n        By passing in the appropriate options, you can search the APIs deployed in the enforcer.\n      operationId: getAPIs\n      parameters:\n      - name: name\n        in: query\n        description: Name of the API\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: version\n        in: query\n        description: API Version\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: context\n        in: query\n        description: API Context\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: apiUUID\n        in: query\n        description: API UUID\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: limit\n        in: query\n        description: Number of records per page\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: integer\n      - name: offset\n        in: query\n        description: The page number\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: integer\n      responses:\n        \"200\":\n          description: API details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/APIList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/apis?name=PizzaShackAPI\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /applications:\n    get:\n      tags:\n      - Applications\n      summary: Search applications from the application map\n      description: |\n        By passing in the appropriate options, you can search for\n        available applications.\n      operationId: getApplications\n      parameters:\n      - name: orgId\n        in: query\n        description: UUID of the organization\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: name\n        in: query\n        description: Name of the Application\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: appUUID\n        in: query\n        description: Application uuid\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: consumerKey\n        in: query\n        description: application consumer key\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: Application details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ApplicationList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/applications?orgId=carbon.super\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /subscriptions:\n    get:\n      tags:\n      - Subscriptions\n      summary: Search subscriptions from the subscription map\n      description: |\n        By passing in the appropriate options, you can search for\n        subscriptions.\n      operationId: getSubscriptions\n      parameters:\n      - name: apiUUID\n        in: query\n        description: API UUID\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: appUUID\n        in: query\n        description: Application UUID\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      - name: state\n        in: query\n        description: Subscription state\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: Subscription details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/SubscriptionList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/subscriptions?apiUUID=cb8e6ad0-76c2-4d90-b8f7-4f8d784c025a\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /throttling_policies/application:\n    get:\n      tags:\n      - Throttling Policies\n      summary: Search application policy from the application policy map\n      description: |\n        By passing in the appropriate options, you can search for\n        available application policies.\n      operationId: getApplicationPolicies\n      parameters:\n      - name: name\n        in: query\n        description: Name of the application policy\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: Applcation policy details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ApplicationPolicyList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/throttling_policies/application?name=Unlimited\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /throttling_policies/subscription:\n    get:\n      tags:\n      - Throttling Policies\n      summary: Search subcription policy from the subscription policy map\n      description: |\n        By passing in the appropriate options, you can search for\n        available subscription policies.\n      operationId: getSubscriptionPolicies\n      parameters:\n      - name: name\n        in: query\n        description: Name of the Subscription policy\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: Subscription policy details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/SubscriptionPolicyList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/throttling_policies/subscription?name=Unlimited\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\n  /revoked_tokens:\n    get:\n      tags:\n      - Revoked Tokens\n      summary: Search revoked tokens from the revoked tokens map\n      description: |\n        By passing in the appropriate options, you can search for\n        the revoked tokens.\n      operationId: getRevokedTokens\n      parameters:\n      - name: token\n        in: query\n        description: The JWT or the JTI of the jwt\n        required: false\n        style: form\n        explode: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          description: Revoked token details that matched with the search criteria\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/RevokedTokenList'\n        \"400\":\n          description: Bad input parameters\n      x-code-samples:\n        - lang: Curl\n          source: 'curl \"https://localhost:9001/revoked_tokens?token=\u003cTOKEN\u003e\" -H \"Authorization: Basic YWRtaW46YWRtaW4=\" -k'\ncomponents:\n  schemas:\n    APIInfo:\n      properties:\n        apiUUID:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        name:\n          type: string\n          example: PizzaShackAPI\n        version:\n          type: string\n          example: 1.0.0\n        context:\n          type: string\n          example: /pizzashack\n        policy:\n          type: string\n          example: 10PerMin\n        apiType:\n          type: string\n          example: HTTP\n        lcState:\n          type: string\n          example: PUBLISHED\n        subscriptions:\n          type: array\n          items:\n            $ref: '#/components/schemas/SubscriptionInfo'\n    SubscriptionInfo:\n      type: object\n      properties:\n        subscriptionId:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        policy:\n          type: string\n          example: 10PerMin\n        status:\n          type: string\n          example: Active\n        application:\n          $ref: '#/components/schemas/Application'\n    APIList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        apis:\n          type: array\n          items:\n            $ref: '#/components/schemas/API'\n    API:\n      type: object\n      properties:\n        apiUUID:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        name:\n          type: string\n          example: PizzaShackAPI\n        version:\n          type: string\n          example: 1.0.0\n        context:\n          type: string\n          example: /pizzashack\n        provider:\n          type: string\n          example: admin\n        policy:\n          type: string\n          example: 10PerMin\n        apiType:\n          type: string\n          example: HTTP\n        lcState:\n          type: string\n          example: PUBLISHED\n    Application:\n      required:\n      - name\n      type: object\n      properties:\n        name:\n          type: string\n          example: ACME Corporation\n        applicationUUID:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        policy:\n          type: string\n          example: 10PerMin\n        subName:\n          type: string\n        subId:\n          type: integer\n          example: 1\n        tokenType:\n          type: string\n          example: PRODUCTION\n        tenantDomain:\n          type: string\n          example: carbon.super\n        consumerKey:\n          type: string\n          example: d290f1eed701748f0851\n    ApplicationList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        applications:\n          type: array\n          items:\n            $ref: '#/components/schemas/Application'\n    Subscription:\n      required:\n      - name\n      type: object\n      properties:\n        subscriptionId:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        policyId:\n          type: string\n          example: 10PerMin\n        apiUUID:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        appUUID:\n          type: string\n          format: uuid\n          example: d290f1ee-6c54-4b01-90e6-d701748f0851\n        subscriptionState:\n          type: string\n          example: BLOCKED\n    SubscriptionList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        subscriptions:\n          type: array\n          items:\n            $ref: '#/components/schemas/Subscription'\n    SubscriptionPolicy:\n      type: object\n      properties:\n        id:\n          type: integer\n          example: 1\n        quotaType:\n          type: string\n        rateLimitCount:\n          type: integer\n          example: 1000\n        rateLimitTimeUnit:\n          type: string\n          example: second\n        tierName:\n          type: string\n          example: 10 Per Min\n        graphQLMaxComplexity:\n          type: integer\n          example: 10\n        graphQLMaxDepth:\n          type: integer\n          example: 3\n    SubscriptionPolicyList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        subscriptionPolicies:\n          type: array\n          items:\n            $ref: '#/components/schemas/SubscriptionPolicy'\n    ApplicationPolicy:\n      type: object\n      properties:\n        tierName:\n          type: string\n          example: 5PerMin\n        quotaType:\n          type: string\n    ApplicationPolicyList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        applicationPolicies:\n          type: array\n          items:\n            $ref: '#/components/schemas/ApplicationPolicy'\n    RevokedTokenList:\n      type: object\n      properties:\n        count:\n          type: integer\n          example: 1\n        tokens:\n          type: array\n          items:\n            type: string\n",
			"canonicalURL": "/github.com/wso2/docs-apim@02d8bfc891167379203b665c95e0f1487247f681/-/blob/en/docs/deploy-and-publish/deploy-on-gateway/choreo-connect/troubleshooting/enforcer-admin-api/enforcer-v1.0.0.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/wso2/docs-apim/blob/02d8bfc891167379203b665c95e0f1487247f681/en/docs/deploy-and-publish/deploy-on-gateway/choreo-connect/troubleshooting/enforcer-admin-api/enforcer-v1.0.0.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}