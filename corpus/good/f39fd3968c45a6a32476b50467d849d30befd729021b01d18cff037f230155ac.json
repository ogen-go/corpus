{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/nhsx/antibody-web"
		},
		"file": {
			"name": "api.yml",
			"size": 0,
			"path": "ml/api.yml",
			"byteSize": 6192,
			"content": "openapi: \"3.0.3\"\ninfo:\n  description: \"API for interfacing with Audere ML model\"\n  version: \"1.0\"\n  title: \"Audere ML Model API\"\npaths:\n  /predictions/{modelName}:\n    post:\n      summary: \"Interpret an image of a test cassette and predict a result\"\n      description: \"Takes the user's image and extract the cassette, checks it is not blurred or over/underexposed, and then extracts and classifies the diagnostic region of the cassette\"\n      parameters:\n      - in: \"path\"\n        name: \"modelName\"\n        description: \"The ML model we are using to make our prediction\"\n        required: true\n        schema:\n            type: string\n      requestBody:\n        content:\n          image/png:\n            schema:\n              type: string\n              format: binary\n          image/jpeg:\n            schema:\n              type: string\n              format: binary\n      responses:\n        \"200\":\n          description: \"A object containing results of the image quality checks and predicted result, if possible. (Returned regardless of whether diagnostic region could be read)\"\n          content:\n            application/json:\n              schema:\n                type: object\n                required:\n                  - success\n                  - result\n                  - confidence\n                  - quality\n                  - extracts\n                properties:\n                  success:\n                    description: \"Whether or not the ML model extracted and made a prediction from the diagnostic area - will be true for a result of positive, negative or invalid, and false for all others\"\n                    type: boolean\n                  result:\n                    description: \"A string representing the outcome of the image interpretation. Failure states should be returned in order according to this list.\"\n                    type: string\n                    enum: [no_rdt_found, no_diagnostic_found, failed_checks, negative, positive, invalid]\n                  confidence:\n                    description: \"A map of numeric values between 0 and 1 for how sure the ML model is about its predictions\"\n                    type: object\n                    required:\n                      - positive\n                      - negative\n                    properties:\n                      positive:\n                        type: number\n                      negative:\n                        type: number\n                  quality:\n                    description: \"Map of our quality checks. Each quality key has a string which is either 'Ok' or a failure reason\"\n                    type: object\n                    required:\n                      - blur\n                      - exposure\n                    properties:\n                      blur:\n                        description: \"Whether our blur detection algorithm thinks the cassette subsection is blurred or not\"\n                        type: string\n                        enum: [ok, blurred]\n                      exposure:\n                        description: \"Whether our exposure check algorithm thinks the cassette is overexposed, underexposed or both\"\n                        type: string\n                        enum: [ok, overexposed, underexposed, over_and_underexposed]\n                  extracts:\n                    description: \"The relevant regions of interest in the RDT image\"\n                    required:\n                      - rdt\n                      - diagnostic\n                    properties:\n                      rdt:\n                        description: \"Base64 encoded image of the test cassette extract\"\n                        type: string\n                        format: byte\n                      diagnostic:\n                        description: \"Bounding box for the diagnostic square within the rdt image. Two x-y coordinate pairs that represent the top left and bottom right of the box e.g. [[20, 20], [40, 40]]\"\n                        type: array\n                        items: \n                          minLength: 2\n                          maxLength: 2\n                          type: array\n                          items:\n                            minLength: 2\n                            maxLength: 2\n                            type: number\n              examples:\n                Successful Prediction:\n                  value:\n                    success: true\n                    result: positive\n                    confidence:\n                      positive: 0.9\n                      negative: 0.1\n                    quality:\n                      blur: ok\n                      exposure: ok\n                    extracts:\n                      rdt: \"Somebase64encodedstring==\"\n                      diagnostic: [[180.43, 121.29], [342.42, 301.39]]\n                Failed Prediction (Quality Checks):\n                  value:\n                    success: false\n                    result: failed_checks\n                    confidence:\n                      positive: 0.9\n                      negative: 0.1\n                    quality:\n                      blur: blurred\n                      exposure: ok\n                    extracts:\n                      rdt: \"Somebase64encodedstring==\"\n                      diagnostic: [[180.43, 121.29], [342.42, 301.39]]\n                Failed Prediction (No Cassette):\n                  value:\n                    success: false\n                    result: no_rdt_found\n                    confidence: null\n                    quality: null\n                    extracts:\n                      rdt: null\n                      diagnostic: null\n                Failed Prediction (No Diagnostic):\n                  value:\n                    success: false\n                    result: no_diagnostic_found\n                    confidence: null\n                    quality:\n                      blur: ok\n                      exposure: ok\n                    extracts:\n                      rdt: \"Somebase64encodedstring==\"\n                      diagnostic: null\n        \"500\":\n          description: \"Internal error in model\"\n        \"405\":\n          description: \"Invalid input - missing or unparseable image\"\n",
			"canonicalURL": "/github.com/nhsx/antibody-web@b0aa1418898e58fa7d85d66ea41628596bd94c93/-/blob/ml/api.yml",
			"externalURLs": [
				{
					"url": "https://github.com/nhsx/antibody-web/blob/b0aa1418898e58fa7d85d66ea41628596bd94c93/ml/api.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}