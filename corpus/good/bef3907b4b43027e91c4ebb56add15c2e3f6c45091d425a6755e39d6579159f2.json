{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/wikimedia/mediawiki-services-cxserver"
		},
		"file": {
			"name": "spec.yaml",
			"size": 0,
			"path": "spec.yaml",
			"byteSize": 29139,
			"content": "openapi: 3.0.1\ninfo:\n  version: 0.2.1\n  title: Content translation service\n  description: Content translation service for translating mediawiki pages between languages.\n  termsOfService: https://wikimediafoundation.org/wiki/Terms_of_Use\n  contact:\n    name: the Wikimedia Language team\n    url: https://www.mediawiki.org/wiki/Wikimedia_Language_engineering\n  license:\n    name: GPL-2.0-or-later\n    url: http://opensource.org/licenses/GPL-2.0\nx-default-params:\n  domain: en.wikipedia.org\n\npaths:\n  # from routes/root.js\n  /robots.txt:\n    get:\n      tags:\n        - Root\n        - Robots\n      description: Gets robots.txt\n      responses:\n        200:\n          description: Success\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: robots.txt check\n          request: {}\n          response:\n            status: 200\n  /:\n    get:\n      tags:\n        - Root\n      description: The root service end-point\n      responses:\n        200:\n          description: Success\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: root with no query params\n          request: {}\n          response:\n            status: 302\n        - title: spec from root\n          request:\n            query:\n              spec: true\n          response:\n            status: 200\n        - title: doc from root\n          request:\n            query:\n              doc: true\n          response:\n            status: 302\n        - title: root with wrong query param\n          request:\n            query:\n              fooo: true\n          response:\n            status: 302\n  # from routes/v1.js\n  /v1/page/{language}/{title}:\n    get:\n      tags:\n        - Page content\n      description: Fetches segmented mediawiki page\n      parameters:\n        - $ref: \"#/components/parameters/language\"\n        - $ref: \"#/components/parameters/title\"\n      responses:\n        200:\n          description: Page fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        404:\n          description: Page not found\n          content: {}\n      x-amples:\n        - title: Fetch enwiki protected page\n          request:\n            params:\n              language: en\n              title: User:BSitzmann_(WMF)/MCS/Test/Frankenstein\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v1/page/{language}/{title}/{revision}:\n    get:\n      tags:\n        - Page content\n      description: Fetches segmented mediawiki page\n      parameters:\n        - $ref: \"#/components/parameters/language\"\n        - $ref: \"#/components/parameters/title\"\n        - $ref: \"#/components/parameters/revision\"\n      responses:\n        200:\n          description: Page fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        404:\n          description: Page not found\n          content: {}\n      x-amples:\n        - title: Fetch enwiki protected page\n          request:\n            params:\n              language: en\n              title: User:BSitzmann_(WMF)/MCS/Test/Frankenstein\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v1/dictionary/{word}/{from}/{to}:\n    get:\n      tags:\n        - Dictionary\n      description: Fetches the dictionary meaning of a word.\n      parameters:\n        - $ref: \"#/components/parameters/word\"\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      responses:\n        200:\n          description: Dictionary meaning of a word fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        404:\n          description: Word not found in the dictionary\n          content: {}\n      x-amples:\n        - title: Fetch dictionary meaning with a given provider\n          request:\n            params:\n              word: water\n              from: en\n              to: es\n              provider: JsonDict\n          response:\n            status: 200\n            body:\n              source: water\n              translations:\n                - phrase: /.+/\n                  sources:\n                    - fd-eng-spa\n            headers:\n              content-type: application/json\n        - title: Fetch dictionary meaning without specifying a provider\n          request:\n            params:\n              word: water\n              from: en\n              to: es\n          response:\n            status: 200\n            body:\n              source: water\n              translations:\n                - phrase: /.+/\n                  sources:\n                    - fd-eng-spa\n            headers:\n              content-type: application/json\n  /v1/dictionary/{word}/{from}/{to}/{provider}:\n    get:\n      tags:\n        - Dictionary\n      description: Fetches the dictionary meaning of a word.\n      parameters:\n        - $ref: \"#/components/parameters/word\"\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n        - $ref: \"#/components/parameters/dictprovider\"\n      responses:\n        200:\n          description: Dictionary meaning of a word fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        404:\n          description: Word not found in the dictionary\n          content: {}\n      x-amples:\n        - title: Fetch dictionary meaning with a given provider\n          request:\n            params:\n              word: water\n              from: en\n              to: es\n              provider: JsonDict\n          response:\n            status: 200\n            body:\n              source: water\n              translations:\n                - phrase: /.+/\n                  sources:\n                    - fd-eng-spa\n            headers:\n              content-type: application/json\n        - title: Fetch dictionary meaning without specifying a provider\n          request:\n            params:\n              word: water\n              from: en\n              to: es\n          response:\n            status: 200\n            body:\n              source: water\n              translations:\n                - phrase: /.+/\n                  sources:\n                    - fd-eng-spa\n            headers:\n              content-type: application/json\n  /v1/mt/{from}/{to}:\n    post:\n      tags:\n        - Machine translation\n      description: Fetches the machine translation. Some providers require an authorization header and it is forbidden to use them outside the Content Translation tool.\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              required:\n                - html\n              properties:\n                html:\n                  type: string\n                  description: The HTML content to translate\n                  x-textarea: true\n        required: true\n      responses:\n        200:\n          description: Machine translation fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        500:\n          description: Internal error\n          content: {}\n      x-amples:\n        - title: Machine translate an HTML fragment using TestClient.\n          request:\n            params:\n              from: en\n              to: qqq\n            body:\n              html: \u003cp\u003e\u003ca href='Oxygen'\u003eOxygen\u003c/a\u003e is a chemical element with symbol O and \u003ca href='Atomic number'\u003eatomic number\u003c/a\u003e 8.\u003c/p\u003e\n          response:\n            status: 200\n            body:\n              contents: /.+/\n            headers:\n              content-type: application/json\n  /v1/mt/{from}/{to}/{provider}:\n    post:\n      tags:\n        - Machine translation\n      description: Fetches the machine translation. Some providers require an authorization header and it is forbidden to use them outside the Content Translation tool.\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n        - $ref: \"#/components/parameters/mtprovider\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              required:\n                - html\n              properties:\n                html:\n                  type: string\n                  description: The HTML content to translate\n                  x-textarea: true\n        required: true\n      responses:\n        200:\n          description: Machine translation fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        500:\n          description: Internal error\n          content: {}\n      x-amples:\n        - title: Machine translate an HTML fragment using TestClient.\n          request:\n            params:\n              from: en\n              to: qqq\n              provider: TestClient\n            body:\n              html: \u003cp\u003e\u003ca href='Oxygen'\u003eOxygen\u003c/a\u003e is a chemical element with symbol O and \u003ca href='Atomic number'\u003eatomic number\u003c/a\u003e 8.\u003c/p\u003e\n          response:\n            status: 200\n            body:\n              contents: /.+/\n            headers:\n              content-type: application/json\n  /v1/list/pair/{from}/{to}:\n    get:\n      tags:\n        - Tools\n      description: Lists the tools for a given language pair\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      responses:\n        200:\n          description: Lists the tools for a given language pair fetched successfully\n          content:\n            application/json:\n              schema:\n                type: string\n        500:\n          description: Internal error\n          content: {}\n      x-amples:\n        - title: Get the tools between two language pairs\n          request:\n            params:\n              from: en\n              to: es\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v1/list/languagepairs:\n    get:\n      tags:\n        - Languages\n        - Service information\n      description: Lists the language pairs supported by the server\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Get all the language pairs\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v1/list/{tool}:\n    get:\n      tags:\n        - Tools\n        - Service information\n      description: Lists all language pairs that tool supports.\n      parameters:\n        - $ref: \"#/components/parameters/tool\"\n      responses:\n        200:\n          description: List of all language pairs\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Get the MT tool between two language pairs\n          request:\n            params:\n              tool: mt\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n\n  /v1/list/{tool}/{from}/{to}:\n    get:\n      tags:\n        - Tools\n        - Service information\n      description: Lists the providers for the tool in that language pair.\n      parameters:\n        - $ref: \"#/components/parameters/tool\"\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      responses:\n        200:\n          description: List of all language pairs\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Get the MT tool between two language pairs\n          request:\n            params:\n              from: en\n              to: es\n              tool: mt\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  # from routes/v2.js\n  /v2/page/{sourcelanguage}/{targetlanguage}/{title}:\n    get:\n      tags:\n        - Page content\n      description: Fetches segmented mediawiki page\n      parameters:\n        - $ref: \"#/components/parameters/sourcelanguage\"\n        - $ref: \"#/components/parameters/targetlanguage\"\n        - $ref: \"#/components/parameters/title\"\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n\n      x-amples:\n        - title: Translate enwiki protected page\n          request:\n            params:\n              sourcelanguage: en\n              targetlanguage: es\n              title: User:BSitzmann_(WMF)/MCS/Test/Frankenstein\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v2/page/{sourcelanguage}/{targetlanguage}/{title}/{revision}:\n    get:\n      tags:\n        - Page content\n      description: Fetches segmented mediawiki page\n      parameters:\n        - $ref: \"#/components/parameters/sourcelanguage\"\n        - $ref: \"#/components/parameters/targetlanguage\"\n        - $ref: \"#/components/parameters/title\"\n        - $ref: \"#/components/parameters/revision\"\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n\n      x-amples:\n        - title: Translate enwiki protected page\n          request:\n            params:\n              sourcelanguage: en\n              targetlanguage: es\n              title: User:BSitzmann_(WMF)/MCS/Test/Frankenstein\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n  /v2/translate/{from}/{to}:\n    post:\n      tags:\n        - Machine translation\n      description: Translate the given content from source language to target language using default MT provider. Also adapt the content for the target language wiki. Some machine translation providers require an authorization header and it is forbidden to use them outside the Content Translation tool.\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              required:\n                - html\n              properties:\n                html:\n                  type: string\n                  description: The HTML content to translate\n                  x-textarea: true\n        required: true\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Machine translate an HTML fragment using TestClient, adapt the links to target language wiki.\n          request:\n            params:\n              from: en\n              to: qqq\n            body:\n              html: \u003cp\u003e\u003ca rel=\"mw:WikiLink\" href='./Oxygen' title='Oxygen'\u003eOxygen\u003c/a\u003e is a chemical element with symbol O and \u003ca rel=\"mw:WikiLink\" href='./Atomic number' title='Atomic number'\u003eatomic number\u003c/a\u003e 8.\u003c/p\u003e\n          response:\n            status: 200\n            body:\n              contents: /.+/\n            headers:\n              content-type: application/json\n\n  /v2/translate/{from}/{to}/{provider}:\n    post:\n      tags:\n        - Machine translation\n      description: Translate the given content from source language to target language. Also adapt the content for the target language wiki. Some machine translation providers require an authorization header and it is forbidden to use them outside the Content Translation tool.\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n        - $ref: \"#/components/parameters/mtprovider\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              required:\n                - html\n              properties:\n                html:\n                  type: string\n                  description: The HTML content to translate\n                  x-textarea: true\n        required: true\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Machine translate an HTML fragment using TestClient, adapt the links to target language wiki.\n          request:\n            params:\n              from: en\n              to: qqq\n              provider: TestClient\n            body:\n              html: \u003cp\u003e\u003ca rel=\"mw:WikiLink\" href='./Oxygen' title='Oxygen'\u003eOxygen\u003c/a\u003e is a chemical element with symbol O and \u003ca rel=\"mw:WikiLink\" href='./Atomic number' title='Atomic number'\u003eatomic number\u003c/a\u003e 8.\u003c/p\u003e\n          response:\n            status: 200\n            body:\n              contents: /.+/\n            headers:\n              content-type: application/json\n\n  /v2/suggest/source/{title}/{to}:\n    get:\n      tags:\n        - Suggestions\n      description: Suggest a source article to use for creating given article in given target language using translation\n      parameters:\n        - $ref: \"#/components/parameters/title\"\n        - $ref: \"#/components/parameters/to\"\n        - name: sourcelanguages\n          in: query\n          description: Comma-separated list of candidate source languages. By default English(en) is used as a source language unless that is the target language.\n          schema:\n            type: array\n            items:\n              type: string\n          style: form\n          explode: true\n          required: false\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Suggest a source title to use for translation\n          request:\n            params:\n              to: ca\n              title: Paneer\n            query:\n              sourcelanguages: en\n          response:\n            status: 200\n            body:\n              suggestions: /^\\[.+\\]$/\n            headers:\n              content-type: application/json\n\n  /v2/suggest/sections/titles/{from}/{to}:\n    get:\n      tags:\n        - Suggestions\n      description: Suggest target section titles based on provided source section titles. Titles are provided as URL params under the key \"titles\"\n      parameters:\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n        - name: titles\n          in: query\n          description: List of source section titles separated by pipe (\"|\") delimiter, based on which target section suggestions will be given. Should be passed as array inside URL params (e.g. titles=test1|test2)\n          schema:\n            type: array\n            items:\n              type: string\n          required: true\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Suggest target section titles for given source sections\n          request:\n            params:\n              from: en\n              to: es\n            query:\n              titles: References|Notes|External Links\n          response:\n            status: 200\n            body:\n              References: [ Referencias, Bibliograf√≠a ]\n              Notes: [ Referencias, Notas ]\n              External Links: [ Enlaces externos ]\n            headers:\n              content-type: application/json\n\n  /v2/suggest/sections/{title}/{from}/{to}:\n    get:\n      tags:\n        - Suggestions\n      description: Suggest sections to translate from a source article to its corresponding article in target language.\n      parameters:\n        - $ref: \"#/components/parameters/title\"\n        - $ref: \"#/components/parameters/from\"\n        - $ref: \"#/components/parameters/to\"\n      responses:\n        200:\n          description: Success\n        404:\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        500:\n          description: Server Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n        default:\n          description: Error\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/problem\"\n      x-amples:\n        - title: Suggest source sections to translate\n          request:\n            params:\n              from: en\n              to: ml\n              title: Sitar\n          response:\n            status: 200\n            body:\n              sections:\n                sourceLanguage: /.+/\n                targetLanguage: /.+/\n                sourceTitle: /.+/\n                targetTitle: /.+/\n                present: /.+/\n                missing: /.+/\n            headers:\n              content-type: application/json\n\n  # from routes/info.js\n  /_info:\n    get:\n      tags:\n        - Service information\n      description: Gets information about the service\n      responses:\n        200:\n          description: OK\n      x-amples:\n        - title: retrieve service info\n          request: {}\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n            body:\n              name: /.+/\n              description: /.+/\n              version: /.+/\n              home: /.+/\n  /_info/name:\n    get:\n      tags:\n        - Service information\n        - Service name\n      description: Gets the name of the service\n      responses:\n        200:\n          description: OK\n      x-amples:\n        - title: retrieve service name\n          request: {}\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n            body:\n              name: /.+/\n  /_info/version:\n    get:\n      tags:\n        - Service information\n        - Service version\n      description: Gets the running version of the service\n      responses:\n        200:\n          description: OK\n      x-amples:\n        - title: retrieve service version\n          request: {}\n          response:\n            status: 200\n            headers:\n              content-type: application/json\n            body:\n              version: /.+/\n  /_info/home:\n    get:\n      tags:\n        - Service information\n        - Service homepage\n      description: Redirects to the home page\n      responses:\n        301:\n          description: Redirect\n      x-amples:\n        - title: redirect to the home page\n          request: {}\n          response:\n            status: 301\ncomponents:\n  schemas:\n    # A https://tools.ietf.org/html/draft-nottingham-http-problem\n    problem:\n      required:\n        - type\n      properties:\n        status:\n          type: integer\n        type:\n          type: string\n        title:\n          type: string\n        detail:\n          type: string\n        method:\n          type: string\n        uri:\n          type: string\n  parameters:\n    domain:\n      in: path\n      name: domain\n      required: true\n      schema:\n        type: string\n      description: |\n        Project domain for the requested data.\n    language:\n      in: path\n      name: language\n      required: true\n      schema:\n        type: string\n      description: |\n        Valid language code\n    revision:\n      in: path\n      name: revision\n      required: true\n      schema:\n        type: string\n      description: |\n        Revision Id\n    title:\n      in: path\n      name: title\n      required: true\n      schema:\n        type: string\n      description: |\n        Page title. Use underscores instead of spaces. Example: `Main_Page`\n    prop:\n      in: path\n      name: prop\n      required: true\n      schema:\n        type: string\n      description: |\n        Site info prop.\n    from:\n      name: from\n      in: path\n      description: The source language code\n      schema:\n        type: string\n      required: true\n    sourcelanguage:\n      name: sourcelanguage\n      in: path\n      description: The source language code\n      schema:\n        type: string\n      required: true\n    to:\n      name: to\n      in: path\n      description: The target language code\n      schema:\n        type: string\n      required: true\n    targetlanguage:\n      name: targetlanguage\n      in: path\n      description: The target language code\n      schema:\n        type: string\n      required: true\n    word:\n      name: word\n      in: path\n      description: The word to lookup\n      schema:\n        type: string\n      required: true\n    dictprovider:\n      name: provider\n      in: path\n      description: The dictionary provider id\n      required: true\n      schema:\n        type: string\n        enum:\n          - JsonDict\n          - Dictd\n          - null\n    mtprovider:\n      name: provider\n      in: path\n      description: The machine translation provider id\n      required: true\n      schema:\n        type: string\n        enum:\n          - Apertium\n          - null\n    tool:\n      name: tool\n      in: path\n      description: The tool name\n      schema:\n        type: string\n        enum:\n          - mt\n          - dictionary\n      required: true\n",
			"canonicalURL": "/github.com/wikimedia/mediawiki-services-cxserver@ee3b487468ca7818edc90f47489d7071f37a4c22/-/blob/spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/wikimedia/mediawiki-services-cxserver/blob/ee3b487468ca7818edc90f47489d7071f37a4c22/spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}