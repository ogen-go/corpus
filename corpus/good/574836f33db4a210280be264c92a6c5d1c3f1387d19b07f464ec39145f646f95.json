{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/interledger/open-payments"
		},
		"file": {
			"name": "auth-server-open-api-spec.yaml",
			"size": 0,
			"path": "auth-server-open-api-spec.yaml",
			"byteSize": 28535,
			"content": "openapi: 3.1.0\ninfo:\n  title: Open Payments Authorization Server\n  version: '1.0'\n  license:\n    name: Apache 2.0\n    identifier: Apache-2.0\n  summary: Open Payments GNAP Authorization Server\n  description: 'The Open Payments API is secured via [GNAP](https://datatracker.ietf.org/doc/html/draft-ietf-gnap-core-protocol). This specification describes the Open Payments Authorization Server API, which is an opiniated GNAP Server API.'\n  contact:\n    email: tech@interledger.org\nservers:\n  - url: 'https://openpayments.guide/auth'\ntags:\n  - name: grant\n    description: grant operations\n  - name: token\n    description: token operations\npaths:\n  /:\n    post:\n      summary: Grant Request\n      operationId: post\n      responses:\n        '201':\n          description: Created\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  interact:\n                    $ref: '#/components/schemas/interact-response'\n                  continue:\n                    $ref: '#/components/schemas/continue'\n              examples:\n                Interaction instructions:\n                  value:\n                    interact:\n                      redirect: 'https://openpayments.guide/auth/4CF492MLVMSW9MKMXKHQ'\n                      finish: 4105340a-05eb-4290-8739-f9e2b463bfa7\n                    continue:\n                      access_token:\n                        value: 33OMUKMKSKU80UPRY5NM\n                      uri: 'https://openpayments.guide/auth/continue/4CF492MLVMSW9MKMXKHQ'\n                      wait: 30\n        '400':\n          description: Bad Request\n      requestBody:\n        content:\n          application/json:\n            schema:\n              description: ''\n              type: object\n              properties:\n                access_token:\n                  type: object\n                  required:\n                    - access\n                  properties:\n                    access:\n                      type: array\n                      description: Describes the rights that the client instance is requesting for one or more access tokens to be used at RS's.\n                      items:\n                        $ref: '#/components/schemas/access'\n                client:\n                  $ref: '#/components/schemas/client'\n                interact:\n                  $ref: '#/components/schemas/interact-request'\n              required:\n                - access_token\n                - client\n                - interact\n            examples:\n              Grant for recurring fixed payment:\n                value:\n                  access_token:\n                    access:\n                      - type: outgoing-payment\n                        actions:\n                          - create\n                          - read\n                        identifier: 'https://openpayments.guide/alice'\n                        interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                        limits:\n                          receiver: 'https://openpayments.guide/connections/45a0d0ee-26dc-4c66-89e0-01fbf93156f7'\n                          sendAmount:\n                            value: '500'\n                            assetCode: USD\n                            assetScale: 2\n                  client:\n                    display:\n                      name: Webmonize\n                      uri: 'https://webmonize.com'\n                    key:\n                      proof: httpsig\n                      jwk:\n                        alg: EdDSA\n                        kid: 20f24ce2-a5f6-4f28-bf7d-ed52d0490187\n                        kty: OKP\n                        use: sig\n                        crv: Ed25519\n                        x: AAAAC3NzaC1lZDI1NTE5AAAAIK0wmN/Cr3JXqmLW7u+g9pTh+wyqDHpSQEIQczXkVx9q\n                  interact:\n                    start:\n                      - redirect\n                    finish:\n                      method: redirect\n                      uri: 'https://webmonize.com/return/876FGRD8VC'\n                      nonce: 4edb2194-dbdf-46bb-9397-d5fd57b7c8a7\n        description: ''\n      description: Make a new grant request\n      security: []\n      tags:\n        - grant\n    parameters: []\n  '/continue/{id}':\n    parameters:\n      - schema:\n          type: string\n        name: id\n        in: path\n        required: true\n    post:\n      summary: Continuation Request\n      operationId: post-continue\n      responses:\n        '200':\n          description: Success\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  access_token:\n                    $ref: '#/components/schemas/access_token'\n                  continue:\n                    $ref: '#/components/schemas/continue'\n              examples:\n                Continuing After a Completed Interaction:\n                  value:\n                    access_token:\n                      value: OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0\n                      manage: 'https://openpayments.guide/auth/token'\n                      expires_in: 3600\n                      access:\n                        - type: outgoing-payment\n                          actions:\n                            - create\n                            - read\n                          identifier: 'https://openpayments.guide/alice'\n                          interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                          limits:\n                            receiver: 'https://openpayments.guide/bob/incoming-payments/48884225-b393-4872-90de-1b737e2491c2'\n                            sendAmount:\n                              value: '500'\n                              assetCode: USD\n                              assetScale: 2\n                    continue:\n                      access_token:\n                        value: 33OMUKMKSKU80UPRY5NM\n                      uri: 'https://openpayments.guide/auth/continue/4CF492MLVMSW9MKMXKHQ'\n                      wait: 30\n                Continuing During Pending Interaction:\n                  value:\n                    continue:\n                      access_token:\n                        value: 33OMUKMKSKU80UPRY5NM\n                      uri: 'https://openpayments.guide/auth/continue/4CF492MLVMSW9MKMXKHQ'\n                      wait: 30\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                interact_ref:\n                  type: string\n                  description: |-\n                    The interaction reference generated for this\n                    interaction by the AS.\n              required:\n                - interact_ref\n            examples:\n              Interaction Reference:\n                value:\n                  interact_ref: ad82597c-bbfa-4eb0-b72e-328e005b8689\n      description: Continue a grant request during or after user interaction.\n      tags:\n        - grant\n    patch:\n      summary: Update Request\n      operationId: patch-continue\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  access_token:\n                    $ref: '#/components/schemas/access_token'\n                  continue:\n                    $ref: '#/components/schemas/continue'\n              examples:\n                Add list access:\n                  value:\n                    access_token:\n                      value: OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0\n                      manage: 'https://openpayments.guide/auth/token'\n                      expires_in: 3600\n                      access:\n                        - type: outgoing-payment\n                          actions:\n                            - create\n                            - read\n                          identifier: 'https://openpayments.guide/alice'\n                          interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                          limits:\n                            receiver: 'https://openpayments.guide/bob/incoming-payments/48884225-b393-4872-90de-1b737e2491c2'\n                            sendAmount:\n                              value: '500'\n                              assetCode: USD\n                              assetScale: 2\n                        - type: outgoing-payment\n                          actions:\n                            - list\n                          identifier: 'https://openpayments.guide/alice'\n                    continue:\n                      access_token:\n                        value: 33OMUKMKSKU80UPRY5NM\n                      uri: 'https://openpayments.guide/auth/continue/4CF492MLVMSW9MKMXKHQ'\n                      wait: 30\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      description: Modify an existing grant request.\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                access_token:\n                  required:\n                    - access\n                  type: object\n                  properties:\n                    access:\n                      type: array\n                      description: Describes the rights that the client instance is requesting for one or more access tokens to be used at RS's.\n                      items:\n                        $ref: '#/components/schemas/access'\n              required:\n                - access_token\n            examples:\n              Add list access:\n                value:\n                  access_token:\n                    access:\n                      - type: outgoing-payment\n                        actions:\n                          - create\n                          - read\n                        identifier: 'https://openpayments.guide/alice'\n                        interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                        limits:\n                          receiver: 'https://openpayments.guide/bob/incoming-payments/48884225-b393-4872-90de-1b737e2491c2'\n                          sendAmount:\n                            value: '500'\n                            assetCode: USD\n                            assetScale: 2\n                      - type: outgoing-payment\n                        actions:\n                          - list\n                        identifier: 'https://openpayments.guide/alice'\n      tags:\n        - grant\n    delete:\n      summary: Cancel Grant Request\n      operationId: delete-continue\n      responses:\n        '202':\n          description: Accepted\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      description: Cancel a grant request.\n      tags:\n        - grant\n  '/token/{id}':\n    parameters:\n      - schema:\n          type: string\n        name: id\n        in: path\n        required: true\n    post:\n      summary: Rotate Access Token\n      operationId: post-token\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  access_token:\n                    $ref: '#/components/schemas/access_token'\n              examples:\n                New access token:\n                  value:\n                    access_token:\n                      value: OZB8CDFONP219RP1LT0OS9M2PMHKUR64TB8N6BW7\n                      manage: 'https://openpayments.guide/auth/token'\n                      expires_in: 3600\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      description: Management endpoint to rotate access token.\n      tags:\n        - token\n    delete:\n      summary: Revoke Access Token\n      operationId: delete-token\n      description: Management endpoint to revoke access token.\n      responses:\n        '204':\n          description: No Content\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      tags:\n        - token\n  /introspect:\n    parameters: []\n    post:\n      summary: Introspect Access Token\n      operationId: post-introspect\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  active:\n                    type: boolean\n                  grant:\n                    type: string\n                  access:\n                    type: array\n                    items:\n                      $ref: '#/components/schemas/access'\n                  key:\n                    $ref: '#/components/schemas/key'\n              examples:\n                Token Introspection:\n                  value:\n                    active: true\n                    grant: 1ee48d97-8fa1-4ab4-b89d-95284b665517\n                    access:\n                      - type: outgoing-payment\n                        actions:\n                          - create\n                          - read\n                        identifier: 'https://openpayments.guide/alice'\n                        interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                        limits:\n                          receiver: 'https://openpayments.guide/bob/incoming-payments/48884225-b393-4872-90de-1b737e2491c2'\n                          sendAmount:\n                            value: '500'\n                            assetCode: USD\n                            assetScale: 2\n                    key:\n                      proof: httpsig\n                      jwk:\n                        alg: EdDSA\n                        kid: 20f24ce2-a5f6-4f28-bf7d-ed52d0490187\n                        kty: OKP\n                        use: sig\n                        crv: Ed25519\n                        x: AAAAC3NzaC1lZDI1NTE5AAAAIK0wmN/Cr3JXqmLW7u+g9pTh+wyqDHpSQEIQczXkVx9q\n        '404':\n          description: Not Found\n      description: 'Introspect an access token to get grant details.'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                access_token:\n                  type: string\n                  description: The access token value presented to the RS by the client instance.\n                proof:\n                  type: string\n                  description: The proofing method used by the client instance to bind the token to the RS request.\n                resource_server:\n                  oneOf:\n                    - $ref: '#/components/schemas/key'\n                    - type: string\n                  description: 'The identification used to authenticate the resource server making this call, either by value or by reference.'\n                access:\n                  type: array\n                  description: The minimum access rights required to fulfill the request.\n                  items:\n                    $ref: '#/components/schemas/access'\n              required:\n                - access_token\n                - resource_server\n            examples:\n              Introspect token:\n                value:\n                  access_token: OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0\n                  proof: httpsig\n                  resource_server: 7C7C4AZ9KHRS6X63AJAO\n      tags:\n        - token\ncomponents:\n  schemas:\n    access:\n      discriminator:\n        propertyName: type\n        mapping:\n          account: '#/components/schemas/access-account'\n          incoming-payment: '#/components/schemas/access-incoming'\n          outgoing-payment: '#/components/schemas/access-outgoing'\n      oneOf:\n        - $ref: '#/components/schemas/access-account'\n        - $ref: '#/components/schemas/access-incoming'\n        - $ref: '#/components/schemas/access-outgoing'\n      description: The access associated with the access token is described using objects that each contain multiple dimensions of access.\n    limits-outgoing:\n      title: limits-outgoing\n      description: Open Payments specific property that defines the limits under which outgoing payments can be created.\n      type: object\n      properties:\n        receiver:\n          type: string\n          format: uri\n          description: URL for the incoming payment or ILP STREAM Connection.\n        sendAmount:\n          $ref: '#/components/schemas/amount'\n        receiveAmount:\n          $ref: '#/components/schemas/amount'\n        description:\n          type: string\n          description: Outgoing payments MUST be created using this description.\n        externalRef:\n          type: string\n          description: Outgoing payments MUST be created using this external reference.\n    amount:\n      title: amount\n      type: object\n      description: 'All amounts are maxima, i.e. multiple payments can be created under a grant as long as the total amounts of these payments do not exceed the maximum amount per interval as specified in the grant.'\n      properties:\n        value:\n          type: string\n          format: uint64\n          description: 'The value is an unsigned 64-bit integer amount, represented as a string.'\n        assetCode:\n          type: string\n          description: The assetCode is a code that indicates the underlying asset. In most cases this SHOULD be a 3-character ISO 4217 currency code.\n        assetScale:\n          type: integer\n          minimum: 0\n          maximum: 255\n          description: 'The assetScale indicates how the value has been scaled relative to the natural scale of the asset. For example, an value of \"1234\" with an assetScale of 2 represents an amount of 12.34.'\n      required:\n        - value\n        - assetCode\n        - assetScale\n    client:\n      title: client\n      type: object\n      properties:\n        display:\n          type: object\n          description: 'An object containing additional information that the AS MAY display to the RO during interaction, authorization, and management.'\n          properties:\n            name:\n              type: string\n            uri:\n              type: string\n              format: uri\n        client_id:\n          type: string\n          description: An identifier string that the AS can use to identify the client software comprising this client instance.\n        key:\n          oneOf:\n            - $ref: '#/components/schemas/key'\n            - type: string\n          description: The public key of the client instance to be used in this request or a reference to a key.\n      description: |-\n        Describes the client instance that is making this request, including the key that the client instance will use to protect this request and any continuation requests at the AS and any user-facing information about the client instance used in interactions.\n              \n        When sending a non-continuation request to the AS, the client instance MUST identify itself by including the client field of the request and by signing the request.\n    key:\n      title: key\n      type: object\n      properties:\n        proof:\n          type: string\n          enum:\n            - httpsig\n          description: The form of proof that the client instance will use when presenting the key.\n        jwk:\n          type: object\n          description: 'The public key and its properties represented as a JSON Web Key [[RFC7517](https://datatracker.ietf.org/doc/html/rfc7517)].'\n          required:\n            - alg\n            - kty\n            - crv\n            - x\n          properties:\n            alg:\n              type: string\n              description: 'The cryptographic algorithm family used with the key. The only allowed value is `EdDSA`. '\n              enum:\n                - EdDSA\n            kid:\n              type: string\n              description: A Key ID can be used to match a specific key.\n            kty:\n              type: string\n              enum:\n                - OKP\n              description: 'The Key Type. The only allowed value is `OKP`. '\n            use:\n              type: string\n              enum:\n                - sig\n              description: The intended use of the key.\n            crv:\n              type: string\n              enum:\n                - Ed25519\n              description: 'The cryptographic curve used with the key. The only allowed value is `Ed25519`. '\n            x:\n              type: string\n              description: Public key encoded using the `base64url` encoding.\n      required:\n        - proof\n        - jwk\n      description: A key presented by value MUST be a public key.\n    interact-request:\n      title: interact\n      type: object\n      properties:\n        start:\n          type: array\n          description: Indicates how the client instance can start an interaction.\n          items:\n            type: string\n            enum:\n              - redirect\n        finish:\n          type: object\n          description: Indicates how the client instance can receive an indication that interaction has finished at the AS.\n          properties:\n            method:\n              type: string\n              enum:\n                - redirect\n              description: The callback method that the AS will use to contact the client instance.\n            uri:\n              type: string\n              format: uri\n              description: Indicates the URI that the AS will either send the RO to after interaction or send an HTTP POST request.\n            nonce:\n              type: string\n              description: 'Unique value to be used in the calculation of the \"hash\" query parameter sent to the callback URI, must be sufficiently random to be unguessable by an attacker.  MUST be generated by the client instance as a unique value for this request.'\n          required:\n            - method\n            - uri\n            - nonce\n      required:\n        - start\n      description: The client instance declares the parameters for interaction methods that it can support using the interact field.\n    interact-response:\n      title: interact-response\n      type: object\n      properties:\n        redirect:\n          type: string\n          format: uri\n          description: The URI to direct the end user to.\n        finish:\n          type: string\n          description: Unique key to secure the callback.\n      required:\n        - redirect\n    continue:\n      title: continue\n      type: object\n      description: 'If the AS determines that the request can be continued with additional requests, it responds with the continue field.'\n      properties:\n        access_token:\n          type: object\n          description: 'A unique access token for continuing the request, called the \"continuation access token\".'\n          required:\n            - value\n          properties:\n            value:\n              type: string\n        uri:\n          type: string\n          format: uri\n          description: The URI at which the client instance can make continuation requests.\n        wait:\n          type: integer\n          description: The amount of time in integer seconds the client instance MUST wait after receiving this request continuation response and calling the continuation URI.\n      required:\n        - access_token\n        - uri\n    access_token:\n      title: access_token\n      type: object\n      description: A single access token or set of access tokens that the client instance can use to call the RS on behalf of the RO.\n      properties:\n        value:\n          type: string\n          description: The value of the access token as a string.  The value is opaque to the client instance.  The value SHOULD be limited to ASCII characters to facilitate transmission over HTTP headers within other protocols without requiring additional encoding.\n        manage:\n          type: string\n          format: uri\n          description: The management URI for this access token. This URI MUST NOT include the access token value and SHOULD be different for each access token issued in a request.\n        expires_in:\n          type: integer\n          description: The number of seconds in which the access will expire.  The client instance MUST NOT use the access token past this time.  An RS MUST NOT accept an access token past this time.\n        access:\n          type: array\n          description: A description of the rights associated with this access token.\n          items:\n            $ref: '#/components/schemas/access'\n      required:\n        - value\n    access-outgoing:\n      title: access-outgoing\n      type: object\n      properties:\n        type:\n          type: string\n          enum:\n            - outgoing-payment\n          description: The type of resource request as a string.  This field defines which other fields are allowed in the request object.\n        actions:\n          type: array\n          description: The types of actions the client instance will take at the RS as an array of strings.\n          items:\n            type: string\n            enum:\n              - create\n              - read\n              - read-all\n              - list\n              - list-all\n        identifier:\n          type: string\n          format: uri\n          description: A string identifier indicating a specific resource at the RS.\n        limits:\n          $ref: '#/components/schemas/limits-outgoing'\n        interval:\n          type: string\n          description: '[ISO8601 repeating interval](https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)'\n      required:\n        - type\n        - actions\n    access-incoming:\n      title: access-incoming\n      type: object\n      properties:\n        type:\n          type: string\n          enum:\n            - incoming-payment\n          description: The type of resource request as a string.  This field defines which other fields are allowed in the request object.\n        actions:\n          type: array\n          description: The types of actions the client instance will take at the RS as an array of strings.\n          items:\n            type: string\n            enum:\n              - create\n              - complete\n              - read\n              - read-all\n              - list\n              - list-all\n        identifier:\n          type: string\n          format: uri\n          description: A string identifier indicating a specific resource at the RS.\n        limits:\n          $ref: '#/components/schemas/limits-incoming'\n        interval:\n          type: string\n          description: '[ISO8601 repeating interval](https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)'\n      required:\n        - type\n        - actions\n    access-account:\n      title: access-account\n      type: object\n      properties:\n        type:\n          type: string\n          enum:\n            - account\n          description: The type of resource request as a string.  This field defines which other fields are allowed in the request object.\n        actions:\n          type: array\n          description: The types of actions the client instance will take at the RS as an array of strings.\n          items:\n            type: string\n            enum:\n              - read\n        identifier:\n          type: string\n          format: uri\n          description: A string identifier indicating a specific resource at the RS.\n        interval:\n          type: string\n          description: '[ISO8601 repeating interval](https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)'\n      required:\n        - type\n        - actions\n    limits-incoming:\n      title: limits-incoming\n      type: object\n      properties:\n        incomingAmount:\n          $ref: '#/components/schemas/amount'\n        expiresAt:\n          type: string\n          format: date-time\n          description: The date and time when the incoming payment will not accept any payments anymore.\n        description:\n          type: string\n          description: Incoming payments MUST be created using this description.\n        externalRef:\n          type: string\n          description: Incoming payments MUST be created using this external reference.\n      description: 'Open Payments specific property that defines the limits under which incoming payments can be created. '\n  securitySchemes:\n    GNAP:\n      name: Authorization\n      type: apiKey\n      in: header\n",
			"canonicalURL": "/github.com/interledger/open-payments@8dda04b6a0133a2c8bca89345001340f182297ba/-/blob/auth-server-open-api-spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/interledger/open-payments/blob/8dda04b6a0133a2c8bca89345001340f182297ba/auth-server-open-api-spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}