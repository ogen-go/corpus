{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/PrivateStorageio/ZKAPAuthorizer"
		},
		"file": {
			"name": "backup-recovery.yaml",
			"size": 0,
			"path": "src/_zkapauthorizer/backup-recovery.yaml",
			"byteSize": 4938,
			"content": "openapi: \"3.0.0\"\n\ninfo:\n  title: \"Replication / Recovery\"\n  description: \u003e-\n    This API allows replication and recovery of ZKAPAuthorizer internal state.\n    Replication is in a single direction from this single Tahoe-LAFS node to\n    the Tahoe-LAFS grid.\n  version: \"1.0.0\"\n\npaths:\n  /storage-plugins/privatestorageio-zkapauthz-v1/recover:\n    post:\n      description: \u003e-\n        Restore from a previously configured replica.\n\n        This is only valid when ZKAPAuthorizer has no local state yet.\n      requestBody:\n        content:\n          application/json:\n            schema:\n              \"$ref\": \"#/components/schemas/ReplicaConfiguration\"\n\n      responses:\n        \"500\": # INTERNAL SERVER ERROR\n          description: \u003e-\n            Recovery from the replica has failed for some reason.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n\n        \"409\": # CONFLICT\n          description: \u003e-\n            Recovery is not possible at this time because local state already\n            exists in the database.  Recover into a new, empty ZKAPAuthorizer\n            installation only.\n\n        \"404\": # NOT FOUND\n          description: \u003e-\n            Recovery from the replica has failed because the recovery data\n            cannot be retrieved using the given capability.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Error\"\n\n        \"202\": # ACCEPTED\n          description: \u003e-\n            The request to attempt recovery has been accepted.  The recovery\n            attempt is underway.  GET this resource to receive gets about its\n            progress.\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties: {}\n    get:\n      description: \u003e-\n        Get details about any recovery attempt which may be underway.\n\n      responses:\n        \"200\": # OK\n          description: \u003e-\n            Describe the status of the recovery system.\n\n          content:\n            application/json:\n              schema:\n                \"$ref\": \"#/components/schemas/RecoveryStatus\"\n\n  /storage-plugins/privatestorageio-zkapauthz-v1/replicate:\n    get:\n      description: \u003e-\n        Get this node's replica configuration.\n      responses:\n        404: # NOT FOUND\n          description: \u003e-\n            This node is not configuration for replication.\n\n        200: # OK\n          description: \u003e-\n            Information about replica configuration is available and included\n            in the response.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ReplicaConfiguration\"\n\n    post:\n      description: \u003e-\n        Configure an on-grid replica.\n\n        Once a replica has been configured this node will keep that replica\n        up-to-date with local state changes.\n      responses:\n        201: # CREATED\n          description: \u003e-\n            The replication system is now configured.\n\n            A replica has not necessarily been created yet but ZKAPAuthorizer\n            will begin creating one now.  The response includes the recovery\n            capability for that replica.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ReplicaConfiguration\"\n\n        409: # CONFLICT\n          description: \u003e-\n            The replication system was already configured.\n\n            The response includes the recovery capability for the replica that\n            is being maintained.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ReplicaConfiguration\"\n\ncomponents:\n  schemas:\n    Error:\n      type: \"object\"\n      properties:\n        details:\n          type: \"string\"\n          description: \u003e-\n            A free-form text field which may give further details about\n            the failure.\n\n    ReplicaConfiguration:\n      type: \"object\"\n      properties:\n        recovery-capability:\n          type: \"string\"\n          description: \u003e-\n            The Tahoe-LAFS read-only capability for the recovery data.\n\n            This is the capability which can be submitted in order to initiate\n            a recovery from the replica.\n\n    RecoveryStatus:\n      type: \"object\"\n      properties:\n        \"stage\":\n          type: \"string\"\n          description: \u003e-\n            A short string indicating where the system is in the recovery\n            process right now.\n\n        \"failure_reason\":\n          type: \"string\"\n          description: \u003e-\n            If recovery has failed, a human-meaningful description of the\n            reason for the failure.\n\n  responses:\n    ErrorResponse:\n      description: \u003e-\n        Something broken.\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/Error\"\n",
			"canonicalURL": "/github.com/PrivateStorageio/ZKAPAuthorizer@148f92f687aaa620ac11981f286a50cd1923d7e4/-/blob/src/_zkapauthorizer/backup-recovery.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/PrivateStorageio/ZKAPAuthorizer/blob/148f92f687aaa620ac11981f286a50cd1923d7e4/src/_zkapauthorizer/backup-recovery.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}