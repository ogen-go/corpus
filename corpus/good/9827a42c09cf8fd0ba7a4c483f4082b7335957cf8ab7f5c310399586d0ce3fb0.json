{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/langhua/OFBiz-CAS"
		},
		"file": {
			"name": "oauth2_zh.yaml",
			"size": 0,
			"path": "webapp/openapi-demo/yaml/oauth2_zh.yaml",
			"byteSize": 10021,
			"content": "###############################################################\n# Licensed to the Tianjin Langhua Ltd. under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing,\n# software distributed under the License is distributed on an\n# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n# KIND, either express or implied.  See the License for the\n# specific language governing permissions and limitations\n# under the License.\n###############################################################\n\nopenapi: 3.0.0\ninfo:\n  description: OFBiz-CAS模块OAuth2开放接口\n  version: 1.0.0\n  title: OAuth2开放接口\n  license:\n    name: Apache License V2\n    url: https://www.apache.org/licenses/LICENSE-2.0.html\nservers:\n  - description: 接口请求地址\n    url: https://localhost:8443/oauth/v2\ntags:\n  - name: 认证\n    description: 用户认证\n  - name: 资料\n    description: 获取已认证用户的资料\npaths:\n  /accessToken:\n    post:\n      tags:\n        - 认证\n      summary: 一步用户认证\n      description: 一步用户认证并获得access_token\n      operationId: authorize\n      parameters:\n        - in: query\n          name: grant_type\n          description: \u003e\n            认证类型：\n              - password: 密码认证类型\n          required: true\n          schema:\n            type: string\n            enum:\n              - 'password'\n        - in: query\n          name: client_id\n          description: 应用程序Id\n          required: true\n          schema:\n            type: string\n          example: clientId\n        - in: query\n          name: client_secret\n          description: 应用程序密码。当有这个参数时，username和password参数将被忽略。\n          required: false\n          schema:\n            type: string\n          example: clientSecret\n        - in: query\n          name: username\n          description: 用户名\n          required: false\n          schema:\n            type: string\n          example: demo\n        - in: query\n          name: password\n          description: 密码\n          required: false\n          schema:\n            type: string\n          example: 123456\n      responses:\n        200:\n          description: 认证成功。\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/LoginSuccess'\n        401:\n          description: 认证失败。\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/LoginError'\n\n  /profile:\n    get:\n      tags:\n        - 资料\n      summary: 获取用户资料\n      description: 包括用户姓名、权限、角色等\n      operationId: profile\n      parameters:\n        - $ref: '#/components/parameters/access_token'\n      responses:\n        200:\n          description: 成功获取用户资料。\n          content:\n            application/json:\n              schema:\n                oneOf:\n                  - $ref: '#/components/schemas/ProfileClientSuccess'\n                  - $ref: '#/components/schemas/ProfileUserSuccess'\n              examples: \n                ProfileClientSuccess:\n                  $ref: '#/components/examples/ProfileClientSuccess'\n                ProfileUserSuccess:\n                  $ref: '#/components/examples/ProfileUserSuccess'\n        401:\n          description: 获取用户资料失败\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ProfileError'\n        405:\n          description: 不支持的请求方式，只能使用get方式请求\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ProfileMethodError'\n\ncomponents:\n  schemas:\n    LoginSuccess:\n      description: 返回认证成功的信息。\n      type: object\n      properties:\n        access_token:\n          description: 访问用凭证\n          type: string\n          example: \"AT-7--cEerwho2pOGI2Tw2Mm1hN838KGzvSR1\"\n        token_type:\n          description: 凭证类型\n          type: string\n          example: bearer\n        expires_in:\n          description: 访问用凭证的有效时长（秒）\n          type: number\n          format: long\n          example: 2592000\n        refresh_token:\n          description: 刷新用凭证\n          type: string\n          example: \"RT-6-ZgZuQG7ph7ZnfzI-K-WCbfKyWDUQ8Wqd\"\n      required:\n        - access_token\n        - expires_in\n      example: {\n                 \"access_token\": \"AT-7--cEerwho2pOGI2Tw2Mm1hN838KGzvSR1\",\n                 \"token_type\": \"bearer\",\n                 \"expires_in\": 2592000,\n                 \"refresh_token\": \"RT-6-ZgZuQG7ph7ZnfzI-K-WCbfKyWDUQ8Wqd\"\n               }\n\n    LoginError:\n      description: 认证错误信息。\n      type: object\n      properties:\n        status:\n          description: 状态\n          type: number\n          format: int\n          enum:\n            - 401\n        error:\n          description: 错误\n          type: string\n          example: \"Unauthorized\"\n        message:\n          description: 错误详细信息\n          type: string\n          example: \"No message available\"\n        timestamp:\n          description: 时间戳\n          type: number\n          format: long\n          example: 1544518149125\n        path:\n          description: 访问路径\n          type: string\n          example: \"/oauth/v2/accessToken\"\n      required:\n        - status\n        - error\n        - timestamp\n      example: {\n                 \"timestamp\": 1544518149125,\n                 \"status\": 401,\n                 \"error\": \"Unauthorized\",\n                 \"message\": \"No message available\",\n                 \"path\": \"/oauth/v2/accessToken\"\n               }\n        \n    ProfileClientSuccess:\n      description: 返回获取资料成功的信息。\n      type: object\n      properties:\n        service:\n          description: 服务名称\n          type: string\n        client_id:\n          description: 应用程序Id\n          type: string\n      required:\n        - service\n        - client_id\n\n    ProfileUserSuccess:\n      description: 返回获取资料成功的信息。\n      type: object\n      properties:\n        service:\n          description: 服务名称\n          type: string\n        client_id:\n          description: 应用程序Id\n          type: string\n        username:\n          description: 用户名\n          type: string\n        userprofile:\n          description: 用户个人信息\n          type: object\n        permissions:\n          description: 用户权限\n          type: array\n          items:\n            type: string\n        roles:\n          description: 用户角色\n          type: array\n          items:\n            type: string\n      required:\n        - service\n        - client_id\n        - username\n\n    ProfileError:\n      description: 返回access_token没有找到或过期错误。\n      type: object\n      properties:\n        error:\n          description: 错误信息\n          type: array\n          items:\n            type: string\n      required:\n        - error\n\n    ProfileMethodError:\n      description: 返回请求方式错误。\n      type: object\n      properties:\n        status:\n          description: 状态\n          type: number\n          format: int\n          enum:\n            - 405\n        error:\n          description: 错误\n          type: string\n          example: \"Method Not Allowed\"\n        message:\n          description: 错误详细信息\n          type: string\n          example: \"Request method 'POST' not supported\"\n        timestamp:\n          description: 时间戳\n          type: number\n          format: long\n          example: 1544553057099\n        path:\n          description: 访问路径\n          type: string\n          example: \"/oauth/v2/accessToken\"\n        exception:\n          description: 异常错误源\n          type: string\n          example: \"org.springframework.web.HttpRequestMethodNotSupportedException\"\n      required:\n        - error\n        - status\n      example: {\n                 \"timestamp\": 1544553057099,\n                 \"status\": 405,\n                 \"error\": \"Method Not Allowed\",\n                 \"exception\": \"org.springframework.web.HttpRequestMethodNotSupportedException\",\n                 \"message\": \"Request method 'POST' not supported\",\n                 \"path\": \"/oauth/v2/profile\"\n               }\n\n  examples:\n    ProfileClientSuccess:\n      summary: Fetch client profile success\n      value: {\n               \"service\" : \"OFBiz OAuth2\",\n               \"client_id\" : \"clientId\"\n             }\n\n    ProfileUserSuccess:\n      summary: Fetch user profile success\n      value: {\n               \"permissions\" : [ \"FULLADMIN\" ],\n               \"service\" : \"OFBiz OAuth2\",\n               \"roles\" : [ \"_NA_\", \"CONTACT\", \"ORDER_CLERK\", \"BILL_FROM_VENDOR\", \"CAL_ATTENDEE\", \"ADDRESSEE\", \"APPROVER\", \"CAL_OWNER\", \"SHIPMENT_CLERK\", \"EMAIL_ADMIN\", \"IMAGEAPPROVER\", \"SALES_REP\", \"MANAGER\", \"BUYER\", \"REQ_TAKER\" ],\n               \"userprofile\" : {\n                 \"currentPassword\" : \"$SHA$/0$quENtfe_Lp34wqWP6K0CbCveevU\",\n                 \"firstName\" : \"THE\",\n                 \"lastName\" : \"ADMINISTRATOR\",\n                 \"partyId\" : \"admin\",\n                 \"userLoginId\" : \"admin\"\n               },\n               \"client_id\" : \"clientId\",\n               \"username\" : \"admin\"\n             }\n\n  parameters:\n    access_token:\n      in: query\n      name: access_token\n      description: 访问令牌\n      required: true\n      schema:\n        type: string\n      example: \"AT-7--cEerwho2pOGI2Tw2Mm1hN838KGzvSR1\"\n",
			"canonicalURL": "/github.com/langhua/OFBiz-CAS@89311e32f3c1a7cdc2bd8d33efd6b961ddd05c56/-/blob/webapp/openapi-demo/yaml/oauth2_zh.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/langhua/OFBiz-CAS/blob/89311e32f3c1a7cdc2bd8d33efd6b961ddd05c56/webapp/openapi-demo/yaml/oauth2_zh.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}