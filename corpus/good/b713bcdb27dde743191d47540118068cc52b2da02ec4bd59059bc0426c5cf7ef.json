{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/LINBIT/linstor-gateway"
		},
		"file": {
			"name": "rest_v1_openapi.yaml",
			"size": 0,
			"path": "docs/rest_v1_openapi.yaml",
			"byteSize": 9316,
			"content": "openapi: 3.0.2\nservers:\n  - url: http://localhost:8080\n    description: Local LINSTOR iSCSI server\ninfo:\n  description: |\n    Linstor Gateway REST API V1\n\n    The v1 REST API should stay compatible and only additions are made to the API.\n    If there are breaking changes or redesigned a new major REST API version will be issued.\n\n    Server runs per default on port `8080`.\n\n    To change the bind address or port you can use the following linstor client commands:\n    ```\n    linstor-gateway server --addr=\":8080\"\n    ```\n\n\n    Changelog:\n    * 1.1.0\n      - Add endpoint for listing all iSCSI targets\n      - Add endpoints for starting and stopping iSCSI targets\n    * 1.0.0\n      - Initial REST API v1\n  version: 1.1.0\n  title: Linstor iSCSI REST API\n  contact:\n    email: roland.kammerer@linbit.com\n  license:\n    name: GPLv3\n    url: https://www.gnu.org/licenses/gpl-3.0.html\ntags:\n  - name: developers\n    description: Operations available to regular developers\npaths:\n  /api/v1/iscsi:\n    get:\n      tags:\n        - developers\n      summary: List all iSCSI targets\n      operationId: iscsiList\n      description: |\n        Lists all iSCSI targets in the system, whether they are running or not.\n      responses:\n        '200':\n          description: Specified target\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/ISCSITargetStatus'\n        '500':\n          $ref: '#/components/responses/OperationFailed'\n    post:\n      tags:\n        - developers\n      summary: add an iSCSI target with one or more LUNs\n      operationId: iscsiPost\n      description: |\n        add an iSCSI target with one or more LUNs\n      responses:\n        '201':\n          description: New iSCSI target created\n        '400':\n          $ref: '#/components/responses/InvalidInput'\n        '500':\n          $ref: '#/components/responses/OperationFailed'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ISCSI'\n            example:\n              target:\n                  iqn: iqn.2019-08.com.linbit:resttest\n                  service_ip: 10.0.0.2\n                  username: username\n                  password: password\n                  portals: 10.0.0.2:3260\n                  luns:\n                    - id: 0\n                      size_kib: 10240\n              linstor:\n                resource_group_name: mygroup\n        description: iSCSI definition to add\n\n  /api/v1/iscsi/{iqn}/{lunid}:\n    parameters:\n      - name: iqn\n        in: path\n        required: true\n        schema:\n          type: string\n          description: IQN of the target to delete\n      - name: lunid\n        in: path\n        required: true\n        schema:\n          type: integer\n          format: int8\n          description: LUN ID within the given target\n    get:\n      tags:\n        - developers\n      summary: Lists a specific target identified by IQN and LUN\n      operationId: iscsiStatus\n      description: Returns a specific target status\n      responses:\n        '200':\n          description: Specified target\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ISCSITargetStatus'\n    delete:\n      tags:\n        - developers\n      summary: delete an iSCSI target with one or more LUNs\n      operationId: iscsiDelete\n      description: delete an iSCSI target with one or more LUNs\n      responses:\n        '200':\n          description: iSCSI target deleted\n        '400':\n          $ref: '#/components/responses/InvalidInput'\n        '500':\n          $ref: '#/components/responses/OperationFailed'\n\n  /api/v1/iscsi/{iqn}/{lunid}/start:\n    parameters:\n      - name: iqn\n        in: path\n        required: true\n        schema:\n          type: string\n          description: IQN of the target to start\n      - name: lunid\n        in: path\n        required: true\n        schema:\n          type: integer\n          format: int8\n          description: LUN ID within the given target\n    post:\n      tags:\n        - developers\n      summary: Start an iSCSI target\n      operationId: iscsiStart\n      description: |\n        Starts the pacemaker resource for an iSCSI target. If the resource is already started, this is a no-op.\n      responses:\n        '200':\n          description: iSCSI target started\n        '400':\n          $ref: '#/components/responses/InvalidInput'\n        '500':\n          $ref: '#/components/responses/OperationFailed'\n\n  /api/v1/iscsi/{iqn}/{lunid}/stop:\n    parameters:\n      - name: iqn\n        in: path\n        required: true\n        schema:\n          type: string\n          description: IQN of the target to stop\n      - name: lunid\n        in: path\n        required: true\n        schema:\n          type: integer\n          format: int8\n          description: LUN ID within the given target\n    post:\n      tags:\n        - developers\n      summary: Stop an iSCSI target\n      operationId: iscsiStop\n      description: |\n        Stops the pacemaker resource for an iSCSI target. If the resource is already stopped, this is a no-op.\n      responses:\n        '200':\n          description: iSCSI target stopped\n        '400':\n          $ref: '#/components/responses/InvalidInput'\n        '500':\n          $ref: '#/components/responses/OperationFailed'\ncomponents:\n  parameters:\n    Resource:\n      name: resource\n      in: path\n      required: true\n      description: resource to use\n      schema:\n        type: string\n  responses:\n    InvalidInput:\n      description: invalid input, or request failed\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/ApiErr'\n    ObjectNotFound:\n      description: object not found\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/ApiErr'\n    OperationFailed:\n      description: operation failed\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/ApiErr'\n  schemas:\n    ApiErr:\n      description: Common API error return\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: string\n          example: String representation of the http error code\n        message:\n          type: string\n          example: Message containing human readable error message\n    LUN:\n      description: Representation of a LUN configuration\n      type: object\n      required:\n        - id\n        - size_kib\n      properties:\n        id:\n          type: integer\n          format: int8\n        size_kib:\n          type: integer\n          format: int64\n    Target:\n      description: Representation of a iSCSI target configuration\n      type: object\n      required:\n        - iqn\n        - service_ip\n        - username\n        - password\n        - portals\n        - luns\n      properties:\n        iqn:\n          type: string\n        service_ip:\n          type: string\n        username:\n          type: string\n        password:\n          type: string\n        portals:\n          type: string\n        luns:\n          type: array\n          items:\n            $ref: '#/components/schemas/LUN'\n    Linstor:\n      description: Representation of a LINSTOR configuration\n      type: object\n      required:\n        - resource_group_name\n      properties:\n        controller_ip:\n          type: string\n          description: IP of the LINSTOR controller. If unset autodetected from Pacemaker.\n        resource_group_name:\n          type: string\n          description: Name of the according LINSTOR resource group definition\n    ISCSI:\n      description: Representation of an iSCSI configuration\n      type: object\n      properties:\n        target:\n          $ref: '#/components/schemas/Target'\n        linstor:\n          $ref: '#/components/schemas/Linstor'\n\n    PacemakerLUNStatus:\n      description: Representation of a LUN status in Pacemaker\n      type: object\n      required:\n        - id\n      properties:\n        id:\n          type: string\n          enum:\n            - Running\n            - Stopped\n            - Unknown\n\n    PacemakerStatus:\n      description: Representation of a LINSTOR\n      type: object\n      required:\n        - target\n        - ip\n        - luns\n      properties:\n        target:\n          type: string\n          enum:\n            - Running\n            - Stopped\n            - Unknown\n        ip:\n          type: string\n          enum:\n            - Running\n            - Stopped\n            - Unknown\n        luns:\n          type: array\n          items:\n            $ref: '#/components/schemas/PacemakerLUNStatus'\n\n    LinstorStatus:\n      description: Representation of a iSCSI target in LINSTOR\n      type: object\n      required:\n        - resource\n      properties:\n        resource:\n          type: string\n          enum:\n            - OK\n            - Degraded\n            - Bad\n            - Unknown\n\n    ISCSITargetStatus:\n      description: Representation of an iSCSI target status\n      type: object\n      required:\n        - pacemaker\n        - linstor\n      properties:\n        pacemaker:\n          $ref: '#/components/schemas/PacemakerStatus'\n        linstor:\n          $ref: '#/components/schemas/LinstorStatus'\n",
			"canonicalURL": "/github.com/LINBIT/linstor-gateway@89b1c5c5cbfcafa4edef89f9bdd1203d47f7baae/-/blob/docs/rest_v1_openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/LINBIT/linstor-gateway/blob/89b1c5c5cbfcafa4edef89f9bdd1203d47f7baae/docs/rest_v1_openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}