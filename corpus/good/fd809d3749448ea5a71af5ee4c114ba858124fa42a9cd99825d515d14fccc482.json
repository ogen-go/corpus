{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/MTES-MCT/ecobalyse"
		},
		"file": {
			"name": "openapi.yaml",
			"size": 0,
			"path": "openapi.yaml",
			"byteSize": 16710,
			"content": "openapi: 3.0.1\ninfo:\n  title: API Ecobalyse\n  description: L'API HTTP Ecobalyse permet de calculer les impacts environnementaux des produits textiles.\n  version: 0.0.1-alpha\nexternalDocs:\n  description: Visiter le site\n  url: https://ecobalyse.beta.gouv.fr\nservers:\n- url: https://ecobalyse.beta.gouv.fr/api\ntags:\n- name: Racine\n  description: Documentation de l'API au format OpenAPI\n- name: Simulateur\n  description: Impact environnemental de produits textiles\n  externalDocs:\n    description: À propos\n    url: https://fabrique-numerique.gitbook.io/ecobalyse\npaths:\n  /:\n    get:\n      tags:\n      - Racine\n      summary: Racine de l'API\n      description: Sert la documentation de l'API au format [OpenAPI](https://swagger.io/specification/)\n      responses:\n        200:\n          description: Documentation de l'API au format OpenAPI.\n  /countries:\n    get:\n      tags:\n      - Pays\n      summary: Récupérer la liste des pays\n      responses:\n        200:\n          description: Opération réussie\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/CountryListResponse'\n  /materials:\n    get:\n      tags:\n      - Matières\n      summary: Récupérer la liste des matières\n      responses:\n        200:\n          description: Opération réussie\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/MaterialListResponse'\n  /products:\n    get:\n      tags:\n      - Produits\n      summary: Récupérer la liste des types de produits textiles\n      responses:\n        200:\n          description: Opération réussie\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ProductListResponse'\n  /simulator:\n    get:\n      tags:\n      - Simulateur\n      summary: Calculer les impacts environnementaux d'un produit textile\n      parameters:\n      - $ref: '#/components/parameters/massParam'\n      - $ref: '#/components/parameters/materialsParam'\n      - $ref: '#/components/parameters/productParam'\n      - $ref: '#/components/parameters/countryFabricParam'\n      - $ref: '#/components/parameters/countryDyeingParam'\n      - $ref: '#/components/parameters/countryMakingParam'\n      - $ref: '#/components/parameters/countrySpinningParam'\n      - $ref: '#/components/parameters/dyeingWeightingParam'\n      - $ref: '#/components/parameters/airTransportRatioParam'\n      - $ref: '#/components/parameters/qualityParam'\n      - $ref: '#/components/parameters/reparabilityParam'\n      - $ref: '#/components/parameters/makingWasteParam'\n      - $ref: '#/components/parameters/pickingParam'\n      - $ref: '#/components/parameters/surfaceMassParam'\n      responses:\n        200:\n          description: Opération réussie\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/MultipleImpactsResponse'\n        400:\n          description: Paramètres invalides\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/InvalidParametersError'\n  /simulator/{impact}:\n    get:\n      tags:\n      - Simulateur\n      summary: Calculer un impact environnemental spécifique d'un produit textile\n      parameters:\n      - name: impact\n        in: path\n        description: |\n          Trigramme de l'impact étudié ([la liste est documenté ici](https://fabrique-numerique.gitbook.io/ecobalyse/methodologie/impacts-consideres))\n        required: true\n        schema:\n          type: string\n          minLength: 3\n          maxLength: 3\n          default: \"cch\"\n          enum:\n          - \"acd\"\n          - \"ozd\"\n          - \"cch\"\n          - \"ccb\"\n          - \"ccf\"\n          - \"ccl\"\n          - \"fwe\"\n          - \"swe\"\n          - \"tre\"\n          - \"pco\"\n          - \"pma\"\n          - \"ior\"\n          - \"fru\"\n          - \"mru\"\n          - \"ldu\"\n          - \"wtu\"\n          - \"pef\"\n      - $ref: '#/components/parameters/massParam'\n      - $ref: '#/components/parameters/materialsParam'\n      - $ref: '#/components/parameters/productParam'\n      - $ref: '#/components/parameters/countryFabricParam'\n      - $ref: '#/components/parameters/countryDyeingParam'\n      - $ref: '#/components/parameters/countryMakingParam'\n      - $ref: '#/components/parameters/countrySpinningParam'\n      - $ref: '#/components/parameters/dyeingWeightingParam'\n      - $ref: '#/components/parameters/airTransportRatioParam'\n      - $ref: '#/components/parameters/qualityParam'\n      - $ref: '#/components/parameters/reparabilityParam'\n      - $ref: '#/components/parameters/makingWasteParam'\n      - $ref: '#/components/parameters/pickingParam'\n      - $ref: '#/components/parameters/surfaceMassParam'\n      responses:\n        200:\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/SingleImpactResponse'\n        400:\n          description: Paramètres invalides\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/InvalidParametersError'\n  /simulator/detailed:\n    get:\n      tags:\n      - Simulateur\n      summary: Calcul exhaustif des impacts environnementaux d'un produit textile\n      description: L'intégralité des calculs intermédiaires sont présentés dans une réponse détaillée\n      parameters:\n      - $ref: '#/components/parameters/massParam'\n      - $ref: '#/components/parameters/materialsParam'\n      - $ref: '#/components/parameters/productParam'\n      - $ref: '#/components/parameters/countryFabricParam'\n      - $ref: '#/components/parameters/countryDyeingParam'\n      - $ref: '#/components/parameters/countryMakingParam'\n      - $ref: '#/components/parameters/countrySpinningParam'\n      - $ref: '#/components/parameters/dyeingWeightingParam'\n      - $ref: '#/components/parameters/airTransportRatioParam'\n      - $ref: '#/components/parameters/qualityParam'\n      - $ref: '#/components/parameters/reparabilityParam'\n      - $ref: '#/components/parameters/makingWasteParam'\n      - $ref: '#/components/parameters/pickingParam'\n      - $ref: '#/components/parameters/surfaceMassParam'\n      responses:\n        200:\n          description: Opération réussie\n          content:\n            application/json:\n              schema:\n                type: object\n        400:\n          description: Paramètres invalides\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/InvalidParametersError'\ncomponents:\n  parameters:\n    massParam:\n      name: mass\n      in: query\n      description: Masse du produit fini, **exprimée en kilogrammes**\n      required: true\n      style: form\n      schema:\n        type: number\n        minimum: 0.01\n      example: 0.17\n    materialsParam:\n      name: \"materials[]\"\n      in: query\n      description: |\n        Liste des matières composant le produit (liste disponible sur le point d'entrée `/materials`).\n        Le format de chaque entrée est composé de l'identifiant de la matière et de la part du produit\n        qu'elle représente :\n\n        - `coton;0.3` signifie *30% coton*;\n        - `coton-rdp;0.7` signifie *70% coton recyclé (déchets de production)*;\n\n        \u003e Par exemple, les paramètres à passer pour un t-shirt 30% coton, 30% coton recyclé et 40% acrylique sont :\n        \u003e\n        \u003e ```js\n        \u003e materials[]=coton;0.3\u0026materials[]=coton-rdp;0.3\u0026materials[]=acrylique;0.4\n        \u003e ```\n      required: true\n      style: form\n      schema:\n        type: array\n        items:\n          type: string\n      examples:\n        coton:\n          value: [\"coton;1;0\"]\n        acrylique:\n          value: [\"coton;0.7\", \"acrylique;0.3\"]\n        mixed:\n          value: [\"coton;0.3\", \"coton-rdp;0.3\", \"acrylique;0.4\"]\n    productParam:\n      name: product\n      in: query\n      description: Identifiant du produit (liste disponible sur le point d'entrée `/products`)\n      required: true\n      style: form\n      schema:\n        type: string\n      examples:\n        tshirt:\n          value: \"tshirt\"\n        pantalon:\n          value: \"pantalon\"\n    countrySpinningParam:\n      name: countrySpinning\n      in: query\n      description: |\n        Code pays pour l'étape de **Filature** (liste disponible sur le point d'entrée `countries`).\n        Si non spécifié, le pays de filature pris en considération est celui de production de\n        la matière la plus représentée dans le mix.\n      required: false\n      style: form\n      schema:\n        type: string\n        minLength: 2\n        maxLength: 2\n      examples:\n        Default:\n          value: \"\"\n        Chine:\n          value: \"CN\"\n        France:\n          value: \"FR\"\n    countryFabricParam:\n      name: countryFabric\n      in: query\n      description: |\n        Code pays pour l'étape de **Tissage/Tricotage** (liste disponible sur le point d'entrée `countries`)\n      required: true\n      style: form\n      schema:\n        type: string\n        minLength: 2\n        maxLength: 2\n      examples:\n        Chine:\n          value: \"CN\"\n        France:\n          value: \"FR\"\n    countryDyeingParam:\n      name: countryDyeing\n      in: query\n      description: \"Code pays pour l'étape de **Teinture** (liste disponible sur le point d'entrée `countries`)\"\n      required: true\n      style: form\n      schema:\n        type: string\n        minLength: 2\n        maxLength: 2\n      examples:\n        Chine:\n          value: \"CN\"\n        France:\n          value: \"FR\"\n    countryMakingParam:\n      name: countryMaking\n      in: query\n      description: \"Code pays pour l'étape de **Confection** (liste disponible sur le point d'entrée `countries`)\"\n      required: true\n      style: form\n      schema:\n        type: string\n        minLength: 2\n        maxLength: 2\n      examples:\n        Chine:\n          value: \"CN\"\n        France:\n          value: \"FR\"\n    dyeingWeightingParam:\n      name: dyeingWeighting\n      in: query\n      description: |\n        Majoration de l'impact du **procédé de Teinture**, entre `0` et `1`\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 0\n        maximum: 1\n    airTransportRatioParam:\n      name: airTransportRatio\n      in: query\n      description: |\n        Part de **transport aérien** entre l'étape de **Confection** et l'étape de **Distribution**, entre `0` et `1`\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 0\n        maximum: 1\n    qualityParam:\n      name: quality\n      in: query\n      description: |\n        Qualité intrinsèque du produit. Le coefficient de qualité intrinsèque représente à quel point\n        le produit va durer dans le temps. Il varie entre 0.67 (peu durable) et 1.45 (très durable).\n        Il est calculé à partir du résultat d’une série de tests de durabilité. Il est utilisé en\n        coefficient multiplicateur du nombre de jours d’utilisation du produit.\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 0.67\n        maximum: 1.45\n    reparabilityParam:\n      name: reparability\n      in: query\n      description: |\n        Indice de réparabilité du produit. Il varie entre `1.00` (peu réparable) et `1.15` (très réparable).\n        Il est utilisé en coefficient multiplicateur du nombre de jours d’utilisation du produit.\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 1\n        maximum: 1.15\n    makingWasteParam:\n      name: makingWaste\n      in: query\n      description: |\n        Taux de perte en confection (incluant la découpe), entre `0` et `0.4`.\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 0\n        maximum: 0.25\n    pickingParam:\n      name: picking\n      in: query\n      description: |\n        Le duitage correspond au nombre de fils de trame (aussi appelés duites) par mètre\n        pour un tissu. Ce paramètre est pris en compte car il est connecté avec la consommation\n        électrique du métier à tisser. À grammage égal, plus le duitage est important,\n        plus la consommation d'électricité est élevée.\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 800\n        maximum: 9000\n    surfaceMassParam:\n      name: surfaceMass\n      in: query\n      description: |\n        Le grammage de l'étoffe, exprimé en gr/m², représente sa masse surfacique.\n      required: false\n      style: form\n      schema:\n        type: number\n        minimum: 30\n        maximum: 500\n  schemas:\n    InvalidParametersError:\n      type: object\n      properties:\n        error:\n          type: array\n          description: Description de l'erreur de validation des paramètres fournis\n          items:\n            type: string\n        documentation:\n          type: string\n          description: \"Lien hypertexte vers la documentation de l'API\"\n    CountryListResponse:\n      type: array\n      description: Liste des pays\n      items:\n        type: object\n        properties:\n          code:\n            type: string\n          name:\n            type: string\n    MaterialListResponse:\n      type: array\n      description: Liste des matières\n      items:\n        type: object\n        properties:\n          uuid:\n            type: string\n          name:\n            type: string\n    ProductListResponse:\n      type: array\n      description: Liste des types de produits\n      items:\n        type: object\n        properties:\n          id:\n            type: string\n          name:\n            type: string\n    MultipleImpactsResponse:\n      type: object\n      description: |\n        Impacts environnementaux exprimés dans leurs unités respectives, dont\n        [la documentation est disponible ici](https://fabrique-numerique.gitbook.io/ecobalyse/methodologie/impacts-consideres).\n      properties:\n        impacts:\n          type: object\n          properties:\n            acd:\n              type: number\n              description: \"Acidification (mol éq. H+)\"\n            ozd:\n              type: number\n              description: \"Appauvrissement de la couche d'ozone (kg éq. CFC 11)\"\n            cch:\n              type: number\n              description: \"Changement climatique (kg éq. CO2)\"\n            ccb:\n              type: number\n              description: \"Changement climatique - Biogénique (kg éq. CO2)\"\n            ccf:\n              type: number\n              description: \"Changement climatique - Fossile (kg éq. CO2)\"\n            ccl:\n              type: number\n              description: \"Changement climatique - Usage des sols (kg éq. CO2)\"\n            fwe:\n              type: number\n              description: \"Eutrophisation eaux douces (kg éq. P)\"\n            swe:\n              type: number\n              description: \"Eutrophisation marine (kg éq. N)\"\n            tre:\n              type: number\n              description: \"Eutrophisation terrestre (mol éq. N)\"\n            pco:\n              type: number\n              description: \"Formation d'ozone photochimique (kg éq. COVNM)\"\n            pma:\n              type: number\n              description: \"Particules (incidence de maladie)\"\n            ior:\n              type: number\n              description: \"Radiations ionisantes (éq. kBq U235)\"\n            fru:\n              type: number\n              description: \"Utilisation de ressources fossiles (MJ)\"\n            mru:\n              type: number\n              description: \"Utilisation de ressources minérales et métalliques (kg éq. Sb)\"\n            ldu:\n              type: number\n              description: \"Utilisation des sols (sans dimension (pt))\"\n            wtu:\n              type: number\n              description: \"Utilisation de ressources en eau (m³)\"\n            pef:\n              type: number\n              description: \"Score PEF (mPt)\"\n        description:\n          type: string\n          description: Une description de la simulation.\n        query:\n          type: object\n          description: Le jeu de paramètres utilisé pour effectuer la simulation.\n    SingleImpactResponse:\n      type: object\n      properties:\n        impacts:\n          type: object\n          properties:\n            \"{impact}\":\n              type: number\n              description: Valeur de l'impact recherché\n        description:\n          type: string\n          description: Une description de la simulation.\n        query:\n          type: object\n          description: Le jeu de paramètres utilisé pour effectuer la simulation.\n",
			"canonicalURL": "/github.com/MTES-MCT/ecobalyse@c8d7354cc4c526e35c94cb6fcc96bbf4bb64fa24/-/blob/openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/MTES-MCT/ecobalyse/blob/c8d7354cc4c526e35c94cb6fcc96bbf4bb64fa24/openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}