{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/flow-build/workflow-api"
		},
		"file": {
			"name": "openapi3.yaml",
			"size": 0,
			"path": "openapi3.yaml",
			"byteSize": 19468,
			"content": "openapi: 3.0.1\ninfo:\n  title: Koa Workflow\n  description: \"Routes for accessing workflow methods\"\n  version: 1.0.0\nservers:\n- url: http://localhost:3000\ntags:\n- name: Token\n  description: \"Token for authentication and authorization\"\n- name: Workflow\n- name: Process\n- name: Activities\n- name: Packages\npaths:\n  /token:\n    post:\n      tags:\n      - Token\n      summary: \"Get valid JWT token\"\n      security: []\n      parameters:\n      - name: \"x-duration\"\n        in: \"header\"\n        description: \"Token duration in seconds\"\n        schema:\n          type: \"integer\"\n      - name: \"x-secret\"\n        in: \"header\"\n        description: \"Use another JWT secret\"\n        schema:\n          type: \"string\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/TokenRequest'\n        required: false\n      responses:\n        '200':\n          description: \"Valid token\"\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/TokenResponse'\n  /workflows:\n    get:\n      tags:\n      - Workflow\n      summary: \"Get all workflows for actor\"\n      responses:\n        '200':\n          description: \"Workflows for actor\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Workflows\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n    post:\n      tags:\n      - Workflow\n      summary: \"Save workflow\"\n      responses:\n        '200':\n          description: \"Workflow saved successfully\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  workflow_id:\n                    type: \"string\"\n                    example: \"59e11731-040e-4fb7-9e54-9c9befecbf7e\"\n                  workflow_url:\n                    type: \"string\"\n                    example: \"localhost:3000/workflows/59e11731-040e-4fb7-9e54-9c9befecbf7e\"\n        '400':\n          description: \"Error saving\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  error:\n                    type: \"string\"\n                    example: \"error message\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /workflows/{id}:\n    get:\n      tags:\n      - Workflow\n      summary: \"Fetch workflow by id\"\n      description: \"Returns a single workflow\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Workflow with desired id found\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Workflow\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n    delete:\n      tags:\n      - Workflow\n      summary: \"Delete workflow\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '204':\n          description: \"Workflow deleted successfully\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n\n  /workflows/{id}/status:\n    get:\n      tags:\n      - Workflow\n      summary: \"Fetch process count from status\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"workflow_id\"\n        required: true\n        schema:\n          type: \"string\"\n      - name: \"status\"\n        in: \"query\"\n        required: true\n        schema:\n          type: \"string\"\n          example: \"unstarted\"\n      responses:\n        '200':\n          description: \"Process count\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  count:\n                    type: \"integer\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /workflows/{id}/processes:\n    get:\n      tags:\n      - Process\n      summary: \"Fetch process list from workflow\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"workflow_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Process list\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /workflows/{id}/create:\n    post:\n      tags:\n      - Process\n      summary: \"Create process\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"workflow_id\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n        required: true\n      responses:\n        '201':\n          description: \"Process created\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  process_id:\n                    type: \"string\"\n                    example: \"cc5ed811-4519-400a-a2c5-80691b974c30\"\n                  process_url:\n                    type: \"string\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /workflows/name/{name}/create:\n    post:\n      tags:\n      - Process\n      summary: \"Create process from workflow name\"\n      parameters:\n      - name: \"name\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '201':\n          description: \"Process created\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  process_id:\n                    type: \"string\"\n                    example: \"cc5ed811-4519-400a-a2c5-80691b974c30\"\n                  process_url:\n                    type: \"string\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  # routes after here need to be reviewed\n  /processes/activityManager/{id}:\n    get:\n      tags:\n      - Activities\n      summary: \"Fetch ActivityManager by id\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"activity_manager_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"ActivityManager with desired id found\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/available:\n    get:\n      tags:\n      - Activities\n      summary: \"Fetch available activities for actor\"\n      parameters:\n      - name: \"workflow_id\"\n        in: \"query\"\n        description: \"Filter by workflow\"\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Available activities\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/done:\n    get:\n      tags:\n      - Activities\n      summary: \"Fetch done activities for actor\"\n      parameters:\n      - name: \"workflow_id\"\n        in: \"query\"\n        description: \"Filter by workflow\"\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Available activities\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}/activity:\n    get:\n      tags:\n      - Activities\n      summary: \"Fetch available activity for process\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Available activity\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{process_id}/commit:\n    post:\n      tags:\n      - Activities\n      summary: \"Commit activity\"\n      parameters:\n      - name: \"process_id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        description: \"External input\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '200':\n          description: \"Activity committed\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{process_id}/push:\n    post:\n      tags:\n      - Activities\n      summary: \"Push activity\"\n      parameters:\n      - name: \"process_id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        description: \"External input\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '200':\n          description: \"Activity pushed\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Workflow\"\n        '404':\n          description: \"Workflow not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /activity_manager/{activity_manager_id}/submit:\n    post:\n      tags:\n      - Activities\n      summary: \"Submit activity by ActivityManager id\"\n      parameters:\n      - name: \"activity_manager_id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        description: \"External input\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '202':\n          description: \"Activity submitted\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Workflow\"\n        '500':\n          description: \"Activity manager not found or error submitting\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  error:\n                    type: \"string\"\n                    example: \"error\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes:\n    get:\n      tags:\n      - Process\n      summary: \"Fetch all processes\"\n      description: \"Returns a single workflow\"\n      parameters:\n      - name: \"workflow_id\"\n        in: \"query\"\n        description: \"Filter by workflow_id\"\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Process list\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}:\n    get:\n      tags:\n      - Process\n      summary: \"Fetch process by id\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Workflow with desired id found\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '404':\n          description: \"Process not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}/history:\n    get:\n      tags:\n      - Process\n      summary: \"Fetch process state history\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Process state history\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '404':\n          description: \"Process not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}/run:\n    post:\n      tags:\n      - Process\n      summary: \"Run process\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        description: \"Input\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '200':\n          description: \"Process running\"\n        '404':\n          description: \"Process not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}/abort:\n    post:\n      tags:\n      - Process\n      summary: \"Abort process\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Process aborted\"\n        '404':\n          description: \"Process not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /processes/{id}/state:\n    post:\n      tags:\n      - Process\n      summary: \"Set process state\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"process_id\"\n        required: true\n        schema:\n          type: \"string\"\n      requestBody:\n        description: \"Process state data\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n              properties:\n                process_state:\n                  type: \"object\"\n      responses:\n        '200':\n          description: \"Process state set\"\n        '404':\n          description: \"Process not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /packages:\n    post:\n      tags:\n      - Packages\n      summary: \"Save package\"\n      requestBody:\n        description: \"Input package\"\n        content:\n          application/json:\n            schema:\n              type: \"object\"\n      responses:\n        '201':\n          description: \"Package saved\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  package_id:\n                    type: \"string\"\n                    example: \"a36ea500-3c72-4af1-aabe-cd2c7d56ca6c\"\n                  package_url:\n                    type: \"string\"\n        '400':\n          description: \"Error saving package\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n                properties:\n                  error:\n                    type: \"string\"\n                    example: \"error\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n  /packages/{id}:\n    get:\n      tags:\n      - Packages\n      summary: \"Fetch package by id\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        description: \"package_id\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '200':\n          description: \"Package found\"\n          content:\n            application/json:\n              schema:\n                type: \"object\"\n        '404':\n          description: \"Package not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\n    delete:\n      tags:\n      - Packages\n      summary: \"Delete package\"\n      description: \"package_id\"\n      parameters:\n      - name: \"id\"\n        in: \"path\"\n        required: true\n        schema:\n          type: \"string\"\n      responses:\n        '204':\n          description: \"Package deleted\"\n        '404':\n          description: \"Package not found\"\n        '401':\n          $ref: \"#/components/responses/UnauthorizedError\"\ncomponents:\n  securitySchemes:\n    BearerAuth:\n      type: \"http\"\n      scheme: \"bearer\"\n      bearerFormat: JWT\n\n  responses:\n    UnauthorizedError:\n      description: \"Unauthorized. Missing Bearer token\"\n\n  schemas:\n    TokenRequest:\n      type: \"object\"\n      properties:\n        actor_id:\n          type: \"string\"\n          example: \"6844da36-aacf-40e7-aedc-576a51dd9046\"\n        claims:\n          type: \"array\"\n          items:\n            type: \"string\"\n            example: \"user\"\n    TokenResponse:\n      required:\n      - actor_id\n      - claims\n      type: \"object\"\n      properties:\n        actor_id:\n          type: \"string\"\n          example: \"6844da36-aacf-40e7-aedc-576a51dd9046\"\n        claims:\n          type: \"array\"\n          items:\n            type: \"string\"\n            example: \"user\"\n    Timestamp:\n      type: \"string\"\n      example: \"2020-11-17T20:25:44.188Z\"\n    Workflows:\n      type: \"array\"\n      items:\n        $ref: \"#/components/schemas/Workflow\"\n    Workflow:\n      type: \"object\"\n      properties:\n        id:\n          type: \"string\"\n          example: \"dd349511-3b6b-4271-8a0b-69e47d34c1e4\"\n        name:\n          type: \"string\"\n          example: \"Example workflow\"\n        description:\n          type: \"string\"\n          example: \"Description of what the workflow does\"\n        blueprint_spec:\n          $ref: \"#/components/schemas/BlueprintSpec\"\n        created_at:\n          $ref: \"#/components/schemas/Timestamp\"\n        version:\n          type: \"integer\"\n          example: 1\n    BlueprintSpec:\n      type: \"object\"\n      properties:\n        lanes:\n          type: \"array\"\n          items:\n            $ref: \"#/components/schemas/Lane\"\n        nodes:\n          type: \"array\"\n          items:\n            $ref: \"#/components/schemas/Node\"\n        prepare:\n          type: \"array\"\n          items:\n              type: \"string\"\n              example: \"prepare\"\n        environment:\n          type: \"object\"\n        requirements:\n          type: \"array\"\n          items:\n              type: \"string\"\n              example: \"core\"\n    Lane:\n      type: \"object\"\n      properties:\n        id:\n          type: \"string\"\n          example: \"1\"\n        name:\n          type: \"string\"\n          example: \"the_only_lane\"\n        rule:\n          type: \"array\"\n          items:\n            oneOf:\n            - type: \"string\"\n              example: \"fn\"\n            - type: \"array\"\n              example: [\"\u0026\", \"args\"]\n            - type: \"boolean\"\n    Node:\n      type: \"object\"\n      properties:\n        id:\n          type: \"string\"\n          example: \"1\"\n        name:\n          type: \"string\"\n          example: \"Start Node\"\n        type:\n          type: \"string\"\n          example: \"Start\"\n        lane_id:\n          type: \"string\"\n          example: \"1\"\n        parameters:\n          type: \"object\"\n          properties:\n            input_schema:\n              type: \"object\"\n\nsecurity:\n  - BearerAuth: []\n",
			"canonicalURL": "/github.com/flow-build/workflow-api@8bdc986ff20724ca214e26d69ab856268439e758/-/blob/openapi3.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/flow-build/workflow-api/blob/8bdc986ff20724ca214e26d69ab856268439e758/openapi3.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}