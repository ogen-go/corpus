{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/open-policy-agent/contrib"
		},
		"file": {
			"name": "management.yaml",
			"size": 0,
			"path": "open_api/management.yaml",
			"byteSize": 6240,
			"content": "# Needs review by SMEs\nopenapi: 3.0.3\ninfo:\n  title: Open Policy Agent (OPA) Management APIs\n  description: |-\n      OPA exposes a set of APIs that enable unified, logically-centralized policy management. Use these APIs if you are interested in how to build OPA controls to enable policy distribution and collection of telemetry data such as decision logs.\n\n      These endpoints are not in OPA but called by OPA on some remote server. OPA posts logs and status updates to some central management component, if configured\n\n      ### API specification viewing options\n\n      - **[View the specification in *Redoc* (default)](management.html)**\n      - **[View the specification in *Swagger UI*](management-swagger-ui.html)**\n  version: 0.25.2\n  x-logo:\n    url: 'https://raw.githubusercontent.com/open-policy-agent/opa/main/docs/website/static/img/logos/opa-horizontal-color.png'\n    backgroundColor: '#FFFFFF'\n    altText: 'OPA logo'\n  contact:\n    name: The OPA team\n    url: 'https://github.com/open-policy-agent/opa'\n  license:\n    name: Apache 2.0\n    url: 'https://www.apache.org/licenses/LICENSE-2.0'\nexternalDocs:\n  description: Management APIs\n  url: 'https://www.openpolicyagent.org/docs/latest/management/'\npaths:\n  '/{service_path}/{resource}':\n    get:\n      summary: Bundle service\n      description: |-\n        OPA expects the service to expose an API endpoint that serves bundles. The bundle API allows clients to download bundles at an arbitrary URL (in combination with `{service_path}`.\n        For example, using the *[configuration](https://www.openpolicyagent.org/docs/latest/configuration/) example* below will fetch bundles from *https//example.com/service/v1/somedir/bundle.tar.gz*. The URL is constructed as follows:\n\n        ```\n        https://example.com/service/v1/somedir/bundle.tar.gz\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        services[0].url                resource\n        ```\n\n        ### Configuration example\n\n        ```yaml\n        services:\n          - name: acmecorp\n           url: https://example.com/service/v1\n           credentials:\n             bearer:\n               token: \"bGFza2RqZmxha3NkamZsa2Fqc2Rsa2ZqYWtsc2RqZmtramRmYWxkc2tm\"\n\n        bundles:\n         authz:\n          service: acmecorp\n          resource: somedir/bundle.tar.gz\n          persist: true\n          polling:\n            min_delay_seconds: 10\n            max_delay_seconds: 20\n          signing:\n            keyid: my_global_key\n            scope: read\n        ```\n      operationId: getServiceBundle\n      externalDocs:\n        description: Bundles\n        url: 'https://www.openpolicyagent.org/docs/latest/management/#bundles'\n      parameters:\n        - $ref: '#/components/parameters/servicePathParameter'\n        - $ref: '#/components/parameters/resourceParameter'\n      tags:\n        - Management API\n      responses:\n        '200':\n          $ref: '#/components/responses/successZipResponse'\n  '/logs/{partition_name}':\n    post:\n      summary: Decision log service\n      description: 'Updates will be sent to the specified location (`{partition_name}`)'\n      externalDocs:\n        description: Decision logs\n        url: 'https://www.openpolicyagent.org/docs/latest/management/#decision-logs'\n      operationId: postLogs\n      parameters:\n        - $ref: '#/components/parameters/partitionNameParameter'\n      tags:\n        - Management API\n      responses:\n        '200':\n          $ref: '#/components/responses/successZipResponse'\n        '404':\n          $ref: '#/components/responses/notFoundResponse'\n  /status:\n    post:\n      summary: Status service (send to /status)\n      description: Updates will be sent to */status*\n      externalDocs:\n        description: Status\n        url: 'https://www.openpolicyagent.org/docs/latest/management/#status'\n      operationId: postStatus\n      tags:\n        - Management API\n      responses:\n        '200':\n          $ref: '#/components/responses/successZipResponse'\n        '404':\n          $ref: '#/components/responses/notFoundResponse'\n  '/status/{partition_name}':\n    post:\n      summary: Status service\n      description: 'Updates will be sent to `{partition_name}`'\n      externalDocs:\n        description: Status\n        url: 'https://www.openpolicyagent.org/docs/latest/management/#status'\n      operationId: postStatuspartition\n      tags:\n        - Management API\n      parameters:\n        - $ref: '#/components/parameters/partitionNameParameter'\n      responses:\n        '200':\n          $ref: '#/components/responses/successZipResponse'\n        '404':\n          $ref: '#/components/responses/notFoundResponse'\ncomponents:\n  parameters:\n    servicePathParameter:\n      name: service_path\n      in: path\n      description: The path to the required bundle\n      example: /service/v1\n      required: true\n      schema:\n        type: string\n    resourceParameter:\n      name: resource\n      description: The resource bundle (gzip tarball)\n      example: somedir/bundle.tar.gz\n      in: path\n      required: true\n      schema:\n        type: string\n    partitionNameParameter:\n      name: partition_name\n      description: A path segment used to route logs to different backends\n      in: path\n      required: true\n      schema:\n        type: string\n  responses:\n    successZipResponse:\n      description: Success. You will find a gzip file is in the response's message body\n      content:\n        application/gzip:\n          schema:\n            type: string\n            format: binary\n    notFoundResponse:\n      description: Not found (for example, a requested policy module or document does not exist)\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/404'\n  schemas:\n    '404':\n      type: object\n      properties:\n        code:\n          description: The error code name\n          example: resource_not_found\n          type: string\n          minLength: 1\n        message:\n          description: The description of the error (including the name of any undefined policy module)\n          example: 'storage_not_found_error: policy id \\\"partial\\\"'\n          type: string\n          minLength: 1\n      required:\n        - code\n        - message\n  securitySchemes: {}\nsecurity: []",
			"canonicalURL": "/github.com/open-policy-agent/contrib@105043de43257e751235850d90e016a619e62ad7/-/blob/open_api/management.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/open-policy-agent/contrib/blob/105043de43257e751235850d90e016a619e62ad7/open_api/management.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}