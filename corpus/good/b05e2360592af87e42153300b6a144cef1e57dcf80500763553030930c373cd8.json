{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/datablade-io/daisy"
		},
		"file": {
			"name": "search.yaml",
			"size": 0,
			"path": "spec/rest-api/search.yaml",
			"byteSize": 12077,
			"content": "openapi: 3.0.0\ninfo:\n  title: daisy api\n  version: '1.0'\n  description: daisy api\npaths:\n  /dae/v1/search:\n    parameters: []\n    post:\n      summary: Excute SQL query\n      operationId: search\n      responses:\n        '200':\n          description: 'OK, the response format depends on the default_format. If not set, it is JSONCompact. '\n          content:\n            application/json:\n              schema:\n                description: ''\n                type: object\n                x-examples:\n                  example-1:\n                    meta:\n                      - name: sourcetype\n                        type: String\n                      - name: _raw\n                        type: String\n                      - name: _index_time\n                        type: DateTime64(3)\n                    data:\n                      - - daisy\n                        - '2020.08.14 23:54:41.290486 [ 7891 ] {} \u003cDebug\u003e DNSResolver: Updating DNS cache'\n                        - '2020-12-16 07:57:50.347'\n                      - - daisy\n                        - '2020.08.14 23:54:41.290638 [ 7891 ] {} \u003cDebug\u003e DNSResolver: Updated DNS cache'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.489261 [ 7910 ] {} \u003cTrace\u003e SystemLog (system.metric_log): Flushing system log, 7 entries to flush'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.491133 [ 7910 ] {} \u003cDebug\u003e DiskLocal: Reserving 1.00 MiB on disk `default`, having unreserved 466.97 GiB.'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492519 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Selected 2 parts from 202008_1_8832_2713 to 202008_8833_8833_0'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492558 [ 7880 ] {} \u003cDebug\u003e DiskLocal: Reserving 2.01 MiB on disk `default`, having unreserved 466.97 GiB.'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492571 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Merging 2 parts: from 202008_1_8832_2713 to 202008_8833_8833_0 into Wide'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492741 [ 7910 ] {} \u003cTrace\u003e SystemLog (system.metric_log): Flushed system log'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.496145 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Selected MergeAlgorithm: Horizontal'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.496457 [ 7880 ] {} \u003cTrace\u003e MergeTreeSequentialSource: Reading 14 marks from part 202008_1_8832_2713, total 66268 rows starting from the beginning of the part'\n                        - '2020-12-16 07:57:52.937'\n                    rows: 10\n                    rows_before_limit_at_least: 824\n                    statistics:\n                      elapsed: 0.001534583\n                      rows_read: 824\n                      bytes_read: 141480\n                properties:\n                  meta:\n                    type: array\n                    uniqueItems: true\n                    minItems: 1\n                    items:\n                      type: object\n                      properties:\n                        name:\n                          type: string\n                          minLength: 1\n                        type:\n                          type: string\n                          minLength: 1\n                      required:\n                        - name\n                        - type\n                  data:\n                    type: array\n                    items:\n                      type: object\n                  rows:\n                    type: number\n                  rows_before_limit_at_least:\n                    type: number\n                  statistics:\n                    type: object\n                    required:\n                      - elapsed\n                      - rows_read\n                      - bytes_read\n                    properties:\n                      elapsed:\n                        type: number\n                      rows_read:\n                        type: number\n                      bytes_read:\n                        type: number\n                required:\n                  - meta\n                  - data\n                  - rows\n                  - rows_before_limit_at_least\n                  - statistics\n              examples:\n                search-jsoncompact:\n                  value:\n                    meta:\n                      - name: sourcetype\n                        type: String\n                      - name: _raw\n                        type: String\n                      - name: _index_time\n                        type: DateTime64(3)\n                    data:\n                      - - daisy\n                        - '2020.08.14 23:54:41.290486 [ 7891 ] {} \u003cDebug\u003e DNSResolver: Updating DNS cache'\n                        - '2020-12-16 07:57:50.347'\n                      - - daisy\n                        - '2020.08.14 23:54:41.290638 [ 7891 ] {} \u003cDebug\u003e DNSResolver: Updated DNS cache'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.489261 [ 7910 ] {} \u003cTrace\u003e SystemLog (system.metric_log): Flushing system log, 7 entries to flush'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.491133 [ 7910 ] {} \u003cDebug\u003e DiskLocal: Reserving 1.00 MiB on disk `default`, having unreserved 466.97 GiB.'\n                        - '2020-12-16 07:57:52.935'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492519 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Selected 2 parts from 202008_1_8832_2713 to 202008_8833_8833_0'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492558 [ 7880 ] {} \u003cDebug\u003e DiskLocal: Reserving 2.01 MiB on disk `default`, having unreserved 466.97 GiB.'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492571 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Merging 2 parts: from 202008_1_8832_2713 to 202008_8833_8833_0 into Wide'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.492741 [ 7910 ] {} \u003cTrace\u003e SystemLog (system.metric_log): Flushed system log'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.496145 [ 7880 ] {} \u003cDebug\u003e system.metric_log (MergerMutator): Selected MergeAlgorithm: Horizontal'\n                        - '2020-12-16 07:57:52.937'\n                      - - daisy\n                        - '2020.08.14 23:54:46.496457 [ 7880 ] {} \u003cTrace\u003e MergeTreeSequentialSource: Reading 14 marks from part 202008_1_8832_2713, total 66268 rows starting from the beginning of the part'\n                        - '2020-12-16 07:57:52.937'\n                    rows: 10\n                    rows_before_limit_at_least: 824\n                    statistics:\n                      elapsed: 0.001534583\n                      rows_read: 824\n                      bytes_read: 141480\n        '400':\n          $ref: '#/components/responses/error'\n      parameters:\n        - schema:\n            type: string\n          in: query\n          name: default_format\n          description: 'query result output format, like CSV, JSONEachRow, et al. The default value is ''JSONCompact'''\n        - name: x-daisy-request-id\n          in: header\n          required: false\n          description: the unique id to identify a ddl request\n          schema:\n            type: string\n        - name: x-daisy-query-id\n          in: header\n          required: false\n          description: the unique id to identify a ddl request\n          schema:\n            type: string\n        - name: user\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-user\n          in: header\n          required: false\n          schema:\n            type: string\n        - name: password\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-key\n          in: header\n          required: false\n          schema:\n            type: string\n        - name: quota_key\n          in: query\n          required: false\n          schema:\n            type: string\n        - name: x-daisy-quota\n          in: header\n          required: false\n          schema:\n            type: string\n      requestBody:\n        content:\n          application/json:\n            schema:\n              description: ''\n              type: object\n              x-examples:\n                example-1:\n                  end_time: '2021-04-28T07:10:36.392Z'\n                  mode: string\n                  offset: 0\n                  page_size: 0\n                  query: string\n                  start_time: '2021-04-28T07:10:36.392Z'\n              properties:\n                end_time:\n                  type: string\n                  minLength: 1\n                  description: 'end time of the search query, in ISO-8601 format'\n                mode:\n                  type: string\n                  minLength: 1\n                  description: |-\n                    query mode, enum 'standard', 'verbose'\n                    - 'standard': without ...\n                    - 'verbose': fdsfds\n                offset:\n                  type: number\n                  description: 'offset of the query result, should always greater than 0, paging related'\n                page_size:\n                  type: number\n                  description: 'page size of query result, greater than 1, paging related'\n                query:\n                  type: string\n                  minLength: 1\n                start_time:\n                  type: string\n                  minLength: 1\n                  description: 'start time of the search query, in ISO-8601 format'\n              required:\n                - query\n            examples:\n              search-req-1:\n                value:\n                  query: select * from A\n                  offset: 0\n                  page_size: 10000\n                  start_time: '2020-01-01T19:00:00+08:00'\n                  end_time: now64(3) - interval 1 day\n                  mode: standard\n        description: search request\n      description: Execute query\ncomponents:\n  schemas: {}\n  responses:\n    error:\n      description: Example response\n      content:\n        application/json:\n          schema:\n            description: ''\n            type: object\n            x-examples:\n              example-1:\n                code: 408\n                error_msg: Empty query\n                request_id: f488db48-e3a5-4081-b8f4-9573158a4023\n            properties:\n              code:\n                type: number\n                description: error code\n              error_msg:\n                type: string\n                minLength: 1\n                description: readable error message\n              request_id:\n                type: string\n                minLength: 1\n                description: ''\n            required:\n              - code\n              - error_msg\n              - request_id\n          examples:\n            search-error-1:\n              value:\n                code: 408\n                error_msg: Invalid 'limit' or 'page_size\n                request_id: f488db48-e3a5-4081-b8f4-9573158a4023\n",
			"canonicalURL": "/github.com/datablade-io/daisy@b5c9b7b1cc496c1fd45cb5678c273b089d899c63/-/blob/spec/rest-api/search.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/datablade-io/daisy/blob/b5c9b7b1cc496c1fd45cb5678c273b089d899c63/spec/rest-api/search.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	}
}