{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/kyma-incubator/varkes"
		},
		"file": {
			"name": "api.yaml",
			"size": 0,
			"path": "modules/api-server/src/server/resources/api.yaml",
			"byteSize": 22921,
			"content": "openapi: \"3.0.0\"\r\ninfo:\r\n  version: \"1.0.0\"\r\n  title: \"Varkes Application Connector Client\"\r\n  description: \"Client for connecting an application to a Kyma cluster\"\r\npaths:\r\n  /connection:\r\n    post:\r\n      tags:\r\n        - \"connection\"\r\n      summary: \"Connects the mock to a Kyma cluster\"\r\n      requestBody:\r\n        description: \"Connection details of the Kyma cluster\"\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/ConnectionDetails\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful connection to Kyma\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ConnectionResponse\"\r\n        \"400\":\r\n          description: \"Missing required attributes\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n        \"401\":\r\n          description: \"Connection is not authorized, usually the provided token is not valid\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n    get:\r\n      tags:\r\n        - \"connection\"\r\n      summary: Returns active connection info\r\n      responses:\r\n        \"200\":\r\n          description: \"Currently connected application and cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ConnectionResponse\"\r\n        \"404\":\r\n          description: \"Not connected to Kyma cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n    delete:\r\n      tags:\r\n        - \"connection\"\r\n      summary: Disconnects the mock from current kyma cluster\r\n      responses:\r\n        204:\r\n          description: Disconnection was successful\r\n\r\n  /connection/key:\r\n    get:\r\n      tags:\r\n        - \"connection\"\r\n      summary: \"Gets the private key used by the mock\"\r\n      responses:\r\n        \"200\":\r\n          description: Private key of the mock\r\n          content:\r\n            application/file:\r\n              schema:\r\n                $ref: \"#/components/schemas/KeyFile\"\r\n        \"400\":\r\n          description: \"Not connected to kyma cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /connection/cert:\r\n    get:\r\n      tags:\r\n        - \"connection\"\r\n      summary: Get the client certificate for connected Kyma cluster\r\n      responses:\r\n        \"200\":\r\n          description: client certificate for connected Kyma cluster\r\n          content:\r\n            application/file:\r\n              schema:\r\n                $ref: \"#/components/schemas/KeyFile\"\r\n        \"400\":\r\n          description: \"Not connected to kyma cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /connection/renew:\r\n    post:\r\n      tags:\r\n        - \"connection\"\r\n      summary: Renews the client certificate for the connected Kyma cluster\r\n      responses:\r\n        \"200\":\r\n          description: \"Renew of client certificate for connected kyma cluster was successful\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ConnectionResponse\"\r\n        \"400\":\r\n          description: \"Not connected to kyma cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /events:\r\n    post:\r\n      tags:\r\n        - \"event\"\r\n      summary: \"Sends a new event to the connected Kyma cluster\"\r\n      requestBody:\r\n        description: \"Event payload\"\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/EventDetails\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/EventId\"\r\n        \"400\":\r\n          description: \"Not connected to kyma cluster or missing required attributes\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /remote/apis:\r\n    post:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Registers a new API on the connected Kyma cluster\"\r\n      requestBody:\r\n        description: \"API to be registered\"\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/ServiceDetails\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ServiceId\"\r\n        \"400\":\r\n          description: \"Not connected to Kyma cluster or missing required attributes\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n    get:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Gets all registered apis on connected Kyma cluster\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                type: \"array\"\r\n                items:\r\n                  $ref: \"#/components/schemas/Service\"\r\n        \"400\":\r\n          description: \"Not connected to Kyma\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /remote/apis/{Id}:\r\n    get:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Gets a API by ID from connected Kyma cluster\"\r\n      parameters:\r\n        - in: \"path\"\r\n          name: \"Id\"\r\n          description: \"ID of a API\"\r\n          required: true\r\n          schema:\r\n            type: \"string\"\r\n            format: \"uuid\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ServiceDetails\"\r\n        \"404\":\r\n          description: \"API with the requested Id could not be found\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n        \"400\":\r\n          description: \"Not connected to Kyma\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n    put:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Updates a API by ID on connected Kyma cluster\"\r\n      requestBody:\r\n        description: \"API to be stored\"\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/ServiceDetails\"\r\n      parameters:\r\n        - in: \"path\"\r\n          name: \"Id\"\r\n          description: \"ID of a service\"\r\n          required: true\r\n          schema:\r\n            type: \"string\"\r\n            format: \"uuid\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ServiceDetails\"\r\n        \"404\":\r\n          description: \"API with the requested Id could not be found\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n        \"400\":\r\n          description: \"You are not connected to a Kyma instance.\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n    delete:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Deletes a API by ID on connected Kyma cluster\"\r\n      parameters:\r\n        - in: \"path\"\r\n          name: \"Id\"\r\n          description: \"ID of a API\"\r\n          required: true\r\n          schema:\r\n            type: \"string\"\r\n            format: \"uuid\"\r\n      responses:\r\n        \"204\":\r\n          description: \"Successful operation\"\r\n        \"404\":\r\n          description: \"API not found\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /local/registration:\r\n    get:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Gets the status of the batch registration\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/Status\"\r\n    post:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Batch registration action\"\r\n      requestBody:\r\n        description: \"Registration data\"\r\n        required: false\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/RegistrationDetails\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Currently connected application and cluster\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ConnectionResponse\"\r\n        \"400\":\r\n          description: \"Not connected to Kyma\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /local/apis:\r\n    get:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Gets all local apis bundled from the config file\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                type: \"array\"\r\n                items:\r\n                  $ref: \"#/components/schemas/Service\"\r\n  /local/apis/{apiname}:\r\n    get:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Gets a specific local api bundled from the config file\"\r\n      parameters:\r\n        - in: \"path\"\r\n          name: \"apiname\"\r\n          description: \"Name of the API\"\r\n          required: true\r\n          schema:\r\n            type: \"string\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                type: \"array\"\r\n                items:\r\n                  $ref: \"#/components/schemas/Service\"\r\n        \"404\":\r\n          description: \"no Api with that name\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /local/apis/{apiname}/register:\r\n    post:\r\n      tags:\r\n        - \"api\"\r\n      summary: \"Registers a specific local API at the connected Kyma cluster\"\r\n      requestBody:\r\n        description: \"Registration data\"\r\n        required: false\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: \"#/components/schemas/RegistrationDetails\"\r\n      parameters:\r\n        - in: \"path\"\r\n          name: \"apiname\"\r\n          description: \"Name of a API\"\r\n          required: true\r\n          schema:\r\n            type: \"string\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful operation\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ServiceDetails\"\r\n        \"404\":\r\n          description: \"API with the requested name could not be found\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n        \"400\":\r\n          description: \"Not connected to Kyma\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/ErrorResponse\"\r\n  /metadata:\r\n    get:\r\n      tags:\r\n        - \"misc\"\r\n      summary: \"Returns this OpenAPI definition\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful\"\r\n          \r\n  /info:\r\n    get:\r\n      tags:\r\n        - \"misc\"\r\n      summary: \"Returns general information of the application\"\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful\"\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: \"#/components/schemas/Info\"\r\n  /console:\r\n    get:\r\n      tags:\r\n        - \"misc\"\r\n      summary: Returns openapi console for testing\r\n      responses:\r\n        \"200\":\r\n          description: \"Successful\"\r\n\r\ncomponents:\r\n  schemas:\r\n    Info:\r\n      type: \"object\"\r\n      properties:\r\n        name:\r\n          type: \"string\"\r\n          example: \"varkes\"\r\n          description: \"The name of the application\"\r\n        links:\r\n          type: \"object\"\r\n          properties:\r\n            logo:\r\n              type: \"string\"\r\n              example: \"/logo\"\r\n              description: \"url for getting the application logo\"\r\n            localApis:\r\n              type: \"string\"\r\n              example: \"/local/apis\"\r\n              description: \"url for getting local apis\"\r\n            remoteApis:\r\n              type: \"string\"\r\n              example: \"/remote/apis\"\r\n              description: \"url for getting remote apis\"\r\n            connection:\r\n              type: \"string\"\r\n              example: \"/connection\"\r\n              description: \"url for getting kyma connection info\"\r\n            registration:\r\n              type: \"string\"\r\n              example: \"/local/registration\"\r\n              description: \"url for batch registration\"\r\n            events:\r\n              type: \"string\"\r\n              example: \"/events\"\r\n              description: \"url for sending events\"\r\n    Status:\r\n      type: \"object\"\r\n      properties:\r\n        successCount:\r\n          type: \"integer\"\r\n          example: 0\r\n          description: \"The number of apis successfully registered\"\r\n        failedCount:\r\n          type: \"integer\"\r\n          example: 0\r\n          description: \"The number of apis failed to register\"\r\n        apisCount:\r\n          type: \"integer\"\r\n          example: 0\r\n          description: \"The number of apis\"\r\n        inProgress:\r\n          type: \"boolean\"\r\n          example: true\r\n          description: \"shows wheather the registration is still in progress or not\"\r\n        errorMessage:\r\n          type: \"string\"\r\n          example: \"Failed to register api <apiname>: \"\r\n          description: \"error messages of the failed apis\"\r\n    RegistrationDetails:\r\n      type: \"object\"\r\n      properties:\r\n        baseUrl:\r\n          type: \"string\"\r\n          description: \"Base url under which the API will be served\"\r\n          example: \"https://myMock.kyma-cluster.io\"\r\n    ConnectionDetails:\r\n      type: \"object\"\r\n      properties:\r\n        token:\r\n          type: \"string\"\r\n          example: \"https://kyma-cluster/v1/applications/sampleApp/info?token=xxx\"\r\n          description: \"The token provided by a Kyma cluster or the token of a compass application\"\r\n        insecure:\r\n          type: \"boolean\"\r\n          description: \"Connected Kyma cluster is running in minikube?\"\r\n          example: false\r\n      required:\r\n        - token\r\n    ServiceId:\r\n      type: \"object\"\r\n      properties:\r\n        id:\r\n          type: \"string\"\r\n          format: \"uuid\"\r\n          description: ID of the newly created application\r\n          example: \"83a01131-69be-4e52-8a98-2ffa69f7575c\"\r\n    ConnectionResponse:\r\n      type: \"object\"\r\n      properties:\r\n        metadataUrl:\r\n          type: \"string\"\r\n          description: \"URL on connected Kyma cluster to manage APIs\"\r\n          example: https://gateway.mycluster.kyma.cx/event-trial/v1/metadata/services\r\n        infoUrl:\r\n          type: \"string\"\r\n          description: \"URL to retrieve more info about connected kyma cluster\"\r\n          example: https://gateway.mycluster.kyma.cx/event-trial/v1/events\r\n        consoleUrl:\r\n          type: \"string\"\r\n          description: \"URL to open application in kyma console\"\r\n          example: https://console.mycluster.kyma.cx/home/cmf-apps/details/event-trial\r\n        revocationCertUrl:\r\n          type: \"string\"\r\n          description: \"URL on connected Kyma cluster to revoke client certifactes\"\r\n          example: https://gateway.mycluster.kyma.cx/v1/applications/certificates/revocations\r\n        renewCertUrl:\r\n          type: \"string\"\r\n          description: \"URL on connected Kyma cluster to renew client certifactes\"\r\n          example: https://gateway.mycluster.kyma.cx/v1/applications/certificates/renewals\r\n        application:\r\n          type: \"string\"\r\n          description: \"Application name on connected Kyma cluster\"\r\n          example: myapp\r\n        insecure:\r\n          type: \"boolean\"\r\n          description: \"The connection to the Kyma cluster is insecure\"\r\n          example: true\r\n\r\n    ServiceDetails:\r\n      allOf:\r\n        - $ref: \"#/components/schemas/Service\"\r\n        - type: \"object\"\r\n          properties:\r\n            api:\r\n              $ref: \"#/components/schemas/Api\"\r\n            events:\r\n              $ref: \"#/components/schemas/Events\"\r\n            documentation:\r\n              $ref: \"#/components/schemas/Documentation\"\r\n          required:\r\n            - provider\r\n            - name\r\n            - description\r\n    Api:\r\n      description: \"The apis that are being registered with the application\"\r\n      type: \"object\"\r\n      properties:\r\n        targetUrl:\r\n          type: \"string\"\r\n          format: \"uri\"\r\n          description: \"The full URL to the base path of the API including host and protocol\"\r\n          example: \"http://localhost:10000/entity\"\r\n        credentials:\r\n          $ref: \"#/components/schemas/ApiCredentials\"\r\n        spec:\r\n          type: \"object\"\r\n          description: \"OpenApi v2 swagger file: https://github.com/OAI/OpenAPI-Specification/blob/master/schemas/v2.0/schema.json\"\r\n          example:\r\n            $ref: https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/examples/v3.0/petstore.yaml\r\n\r\n      required:\r\n        - targetUrl\r\n    Events:\r\n      type: \"object\"\r\n      description: \"Events that are being registered with the application\"\r\n      properties:\r\n        spec:\r\n          description: \"AsyncApi file v1: https://github.com/asyncapi/asyncapi/blob/develop/schema/asyncapi.json\"\r\n          type: \"object\"\r\n          example:\r\n            $ref: https://raw.githubusercontent.com/asyncapi/asyncapi/master/examples/1.1.0/anyof.yml\r\n    EventDetails:\r\n      type: \"object\"\r\n      properties:\r\n        event-type:\r\n          description: \"Type of event\"\r\n          type: \"string\"\r\n          example: \"customer.created\"\r\n        event-type-version:\r\n          description: \"version of event type\"\r\n          type: \"string\"\r\n          example: \"v1\"\r\n        event-time:\r\n          description: \"time when event was send\"\r\n          type: string\r\n          example: \"2019-03-04T14:19:29.450Z\"\r\n        data:\r\n          description: \"event payload\"\r\n          type: \"object\"\r\n          example:\r\n            mykey: myvalue\r\n            somekey: somevalue\r\n      required:\r\n        - event-type\r\n        - event-type-version\r\n        - event-time\r\n        - data\r\n    Documentation:\r\n      type: \"object\"\r\n      description: \"Documentation of the Application\"\r\n      properties:\r\n        displayName:\r\n          type: \"string\"\r\n          description: Name of the Documentation\r\n          example: \"Schools\"\r\n        description:\r\n          type: \"string\"\r\n          description: Summary of the documentation\r\n          example: \"Schools webservices\"\r\n        type:\r\n          type: \"string\"\r\n          description: Type of the documentation\r\n          example: \"Overview\"\r\n        tags:\r\n          type: \"array\"\r\n          description: Tags of the application\r\n          example:\r\n            - tag1\r\n            - tag2\r\n          items:\r\n            type: \"string\"\r\n        docs:\r\n          type: \"array\"\r\n          description: Docs of the application\r\n          items:\r\n            $ref: \"#/components/schemas/Document\"\r\n      required:\r\n        - displayName\r\n        - description\r\n        - type\r\n    Document:\r\n      type: \"object\"\r\n      description: \"Documentation document\"\r\n      properties:\r\n        title:\r\n          type: \"string\"\r\n          description: Title of the document\r\n          example: Service Overview Documentation\r\n        type:\r\n          type: \"string\"\r\n          description: Type of the document\r\n          example: \"Overview\"\r\n        source:\r\n          type: \"string\"\r\n          description: Source of the document\r\n          example: This service does this and that...\r\n      required:\r\n        - title\r\n        - type\r\n        - source\r\n    ApiCredentials:\r\n      type: \"object\"\r\n      description: Credential endpoint of the API\r\n      properties:\r\n        oauth:\r\n          $ref: \"#/components/schemas/OAuth\"\r\n      required:\r\n        - oauth\r\n    OAuth:\r\n      type: \"object\"\r\n      description: OAuth endpoint of the API\r\n      properties:\r\n        url:\r\n          type: \"string\"\r\n          format: \"uri\"\r\n          example: \"http://localhost:10000/entity/authorizationserver/oauth/token\"\r\n        clientId:\r\n          type: \"string\"\r\n          example: \"*********\"\r\n        clientSecret:\r\n          type: \"string\"\r\n          example: \"*********\"\r\n      required:\r\n        - url\r\n        - clientId\r\n        - clientSecret\r\n    ErrorResponse:\r\n      type: \"object\"\r\n      description: Error returned from the server\r\n      properties:\r\n        error:\r\n          type: \"string\"\r\n          example: You are not connected. Please try to reconnect\r\n    KeyFile:\r\n      type: \"string\"\r\n      format: binary\r\n    EventId:\r\n      type: \"object\"\r\n      description: \"Id of the sent event\"\r\n      properties:\r\n        event-id:\r\n          type: string\r\n          description: Id of the sent event\r\n          example: f64fc421-2759-4685-a184-752208570615\r\n    Service:\r\n      type: \"object\"\r\n      description: \"Info\"\r\n      allOf:\r\n        - $ref: \"#/components/schemas/ServiceId\"\r\n        - properties:\r\n            provider:\r\n              type: \"string\"\r\n              description: provider of the api\r\n              example: \"Texas Education Board\"\r\n            name:\r\n              type: \"string\"\r\n              description: name of the api\r\n              example: \"schools\"\r\n            type:\r\n              type: \"string\"\r\n              description: type of the api\r\n              example: \"OpenAPI\"\r\n            description:\r\n              type: \"string\"\r\n              description: description of the api\r\n              example: \"API to manage schools in Texas\"\r\n            labels:\r\n              type: \"object\"\r\n              example:\r\n                connected-app: event-trial\r\n                label1: value1\r\n",
			"canonicalURL": "/github.com/kyma-incubator/varkes@811fec2004f72909dde1faf967a630cbe3d3147b/-/blob/modules/api-server/src/server/resources/api.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/kyma-incubator/varkes/blob/811fec2004f72909dde1faf967a630cbe3d3147b/modules/api-server/src/server/resources/api.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "buildIR: make ir: path \"/remote/apis/{Id}\": get: responses: 200: contents: application/json: generate schema: allOf: schema type mismatch:  and object"
}