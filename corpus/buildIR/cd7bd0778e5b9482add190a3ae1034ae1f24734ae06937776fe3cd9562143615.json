{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/RedHatInsights/playbook-dispatcher"
		},
		"file": {
			"name": "public.openapi.yaml",
			"size": 0,
			"path": "schema/public.openapi.yaml",
			"byteSize": 13430,
			"content": "---\nopenapi: 3.0.3\ninfo:\n  title: Playbook Dispatcher\n  description: Playbook Dispatcher is a service for running Ansible Playbooks on hosts connected via Cloud Connector.\n  version: 1.0.0\n  contact:\n    email: jozef@redhat.com\n\nservers:\n  - url: https://cloud.redhat.com\n    description: production server\n  - url: /\n    description: relative path\n\npaths:\n  /api/playbook-dispatcher/v1/runs:\n    get:\n      summary: List Playbook runs\n      description: \u003e\n        Returns a list of Playbook runs for the given account.\n        The list can be filtered using the `filter` parameter.\n        The fields returned in the representation can be controller using `fields` parameter.\n      operationId: api.runs.list\n      parameters:\n      - $ref: '#/components/parameters/RunsFilter'\n      - $ref: '#/components/parameters/RunsFields'\n      - $ref: '#/components/parameters/RunsSortBy'\n      - $ref: '#/components/parameters/Limit'\n      - $ref: '#/components/parameters/Offset'\n\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Runs'\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '403':\n          $ref: '#/components/responses/Forbidden'\n\n  /api/playbook-dispatcher/v1/run_hosts:\n    get:\n      summary: List hosts involved in Playbook runs\n      description: \u003e\n        Returns a list of objects representing hosts involved in Playbook runs.\n        Unless restricted using filters the resources spread across multiple Playbook runs.\n        No merging or deduplication is performed by this resource - i.e. if a host X is involved in playbook runs A and B\n        then two subresources with exist, one representing X running A and one for B.\n      operationId: api.run.hosts.list\n      parameters:\n      - $ref: '#/components/parameters/RunHostFilter'\n      - $ref: '#/components/parameters/RunHostFields'\n      - $ref: '#/components/parameters/Limit'\n      - $ref: '#/components/parameters/Offset'\n\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/RunHosts'\n\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '403':\n          $ref: '#/components/responses/Forbidden'\n\ncomponents:\n  schemas:\n    RunId:\n      description: Unique identifier of a Playbook run\n      type: string\n      format: uuid\n\n    RunRecipient:\n      description: Identifier of the host to which a given Playbook is addressed\n      type: string\n      format: uuid\n\n    RunTimeout:\n      description: Amount of seconds after which the run is considered failed due to timeout\n      type: integer\n      default: 3600\n      minimum: 0\n      maximum: 604800\n\n    RunCorrelationId:\n      description: Unique identifier used to match work request with responses\n      type: string\n\n    Account:\n      description: Identifier of the tenant\n      type: string\n      minLength: 1\n      maxLength: 10\n      deprecated: true\n\n    OrgId:\n      description: Identifier of the tenant\n      type: string\n      minLength: 1\n      maxLength: 10\n      example: \"5318290\"\n\n    PlaybookName:\n      description: Human readable name of the playbook run. Used to present the given playbook run in external systems (Satellite).\n      type: string\n      example: Fix Critical CVEs\n      minLength: 1\n\n    WebConsoleUrl:\n      description: URL that points to the section of the web console where the user find more information about the playbook run. The field is optional but highly suggested.\n      type: string\n      format: url\n      minLength: 1\n\n    Service:\n      description: Service that triggered the given Playbook run\n      type: string\n      minLength: 1\n\n    Url:\n      description: URL hosting the Playbook\n      type: string\n      format: url\n\n    Labels:\n      description: Additional metadata about the Playbook run. Can be used for filtering purposes.\n      type: object\n      additionalProperties:\n        type: string\n\n    RunStatus:\n      description: Current status of a Playbook run\n      type: string\n      enum:\n        - running\n        - success\n        - failure\n        - timeout\n        - canceled\n\n    CreatedAt:\n      description: A timestamp when the entry was created\n      type: string\n      format: date-time\n\n    UpdatedAt:\n      description: A timestamp when the entry was last updated\n      type: string\n      format: date-time\n\n    Runs:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: '#/components/schemas/Run'\n        meta:\n          $ref: '#/components/schemas/Meta'\n        links:\n          $ref: '#/components/schemas/Links'\n      required:\n      - data\n      - meta\n      - links\n\n    Run:\n      type: object\n      properties:\n        id:\n          $ref: '#/components/schemas/RunId'\n        account:\n          $ref: '#/components/schemas/Account'\n        org_id:\n          $ref: '#/components/schemas/OrgId'\n        recipient:\n          $ref: '#/components/schemas/RunRecipient'\n        correlation_id:\n          $ref: '#/components/schemas/RunCorrelationId'\n        name:\n          $ref: '#/components/schemas/PlaybookName'\n        web_console_url:\n          $ref: '#/components/schemas/WebConsoleUrl'\n        service:\n          $ref: '#/components/schemas/Service'\n        url:\n          $ref: '#/components/schemas/Url'\n        labels:\n          $ref: '#/components/schemas/Labels'\n        timeout:\n          $ref: '#/components/schemas/RunTimeout'\n        status:\n          $ref: '#/components/schemas/RunStatus'\n        created_at:\n          $ref: '#/components/schemas/CreatedAt'\n        updated_at:\n          $ref: '#/components/schemas/UpdatedAt'\n\n    RunHosts:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: '#/components/schemas/RunHost'\n        meta:\n          $ref: '#/components/schemas/Meta'\n        links:\n          $ref: '#/components/schemas/Links'\n      required:\n      - data\n      - meta\n      - links\n\n    RunHost:\n      type: object\n      properties:\n        host:\n          description: Name used to identify a host within Ansible inventory\n          type: string\n        stdout:\n          description: Output produced by running Ansible Playbook on the given host\n          type: string\n        status:\n          $ref: '#/components/schemas/RunStatus'\n        run:\n          $ref: '#/components/schemas/Run'\n        inventory_id:\n          type: string\n          format: uuid\n        links:\n          $ref: '#/components/schemas/RunHostLinks'\n\n    RunHostLinks:\n      type: object\n      properties:\n        inventory_host:\n          type: string\n          nullable: true\n\n\n    Meta:\n      type: object\n      additionalProperties: false\n      description: Information about returned entities\n      properties:\n        count:\n          type: integer\n          description: number of results returned\n          example: 50\n        total:\n          type: integer\n          description: total number of results matching the query\n          example: 114\n      required:\n      - count\n      - total\n\n    Links:\n      type: object\n      additionalProperties: false\n      required:\n      - first\n      - last\n      properties:\n        first:\n          type: string\n          description: relative link to the first page of the query results\n        last:\n          type: string\n          description: relative link to the last page of the query results\n        next:\n          type: string\n          description: relative link to the next page of the query results\n        previous:\n          type: string\n          description: relative link to the previous page of the query results\n\n    Error:\n      type: object\n      properties:\n        message:\n          type: string\n      required:\n      - message\n\n    RunLabelsNullable:\n      type: object\n      # this property should not be nullable however it is set so as a workaround for\n      # https://github.com/getkin/kin-openapi/issues/293\n      nullable: true\n      additionalProperties:\n        type: string\n\n    StatusNullable:\n      type: string\n      # this property should not be nullable however it is set so as a workaround for\n      # https://github.com/getkin/kin-openapi/issues/293\n      # ideally we would reuse '#/components/schemas/RunStatus' here\n      nullable: true\n      enum:\n        - running\n        - success\n        - failure\n        - timeout\n        - canceled\n\n    ServiceNullable:\n      nullable: true\n      # this property should not be nullable however it is set so as a workaround for\n      # https://github.com/getkin/kin-openapi/issues/293\n      # ideally we would reuse '#/components/schemas/Service' here\n      type: string\n      minLength: 1\n\n    InventoryIdNullable:\n      nullable: true\n      type: string\n      format: uuid\n\n  parameters:\n    RunsFilter:\n      description: Allows for filtering based on various criteria\n      in: query\n      name: filter\n      required: false\n      style: deepObject\n      explode: true\n      schema:\n        type: object\n        properties:\n          status:\n            $ref: '#/components/schemas/StatusNullable'\n          service:\n            $ref: '#/components/schemas/ServiceNullable'\n          recipient:\n            type: string\n            # this property should not be nullable however it is set so as a workaround for\n            # https://github.com/getkin/kin-openapi/issues/293\n            # ideally we would reuse '#/components/schemas/RunRecipient' here\n            nullable: true\n            format: uuid\n          # See ./internal/api/middleware/labelFilters.go\n          labels:\n            $ref: '#/components/schemas/RunLabelsNullable'\n\n    RunHostFilter:\n      description: Allows for filtering based on various criteria\n      in: query\n      name: filter\n      required: false\n      style: deepObject\n      explode: true\n      schema:\n        type: object\n        properties:\n          status:\n            $ref: '#/components/schemas/StatusNullable'\n          run:\n            type: object\n            nullable: true\n            properties:\n              id:\n                type: string\n                # this property should not be nullable however it is set so as a workaround for\n                # https://github.com/getkin/kin-openapi/issues/293\n                # ideally we would reuse '#/components/schemas/RunRecipient' here\n                nullable: true\n                format: uuid\n              # See ./internal/api/middleware/labelFilters.go\n              service:\n                $ref: '#/components/schemas/ServiceNullable'\n              labels:\n                $ref: '#/components/schemas/RunLabelsNullable'\n          inventory_id:\n            $ref: '#/components/schemas/InventoryIdNullable'\n\n\n    RunsFields:\n      description: \u003e\n        Defines fields to be returned in the response.\n      in: query\n      name: fields\n      required: false\n      style: deepObject\n      explode: true\n      schema:\n        type: object\n        properties:\n          data:\n            type: array\n            items:\n              type: string\n              enum:\n                - id\n                - org_id\n                - recipient\n                - correlation_id\n                - url\n                - labels\n                - timeout\n                - status\n                - service\n                - name\n                - web_console_url\n                - created_at\n                - updated_at\n            default:\n              - id\n              - org_id\n              - recipient\n              - url\n              - labels\n              - timeout\n              - status\n\n    RunHostFields:\n      description: \u003e\n        Defines fields to be returned in the response.\n      in: query\n      name: fields\n      required: false\n      style: deepObject\n      explode: true\n      schema:\n        type: object\n        properties:\n          data:\n            type: array\n            items:\n              type: string\n              enum:\n                - host\n                - run\n                - status\n                - stdout\n                - links\n                - inventory_id\n            default:\n              - host\n              - status\n              - run\n\n    RunsSortBy:\n      description: Sort order\n      in: query\n      name: sort_by\n      required: false\n      schema:\n        type: string\n        enum:\n          - created_at\n          - created_at:asc\n          - created_at:desc\n\n    Limit:\n      description: Maximum number of results to return\n      in: query\n      name: limit\n      required: false\n      schema:\n        type: integer\n        minimum: 1\n        maximum: 200\n        default: 50\n\n    Offset:\n      in: query\n      name: offset\n      description: Indicates the starting position of the query relative to the complete set of items that match the query\n      required: false\n      schema:\n        type: integer\n        minimum: 0\n        default: 0\n\n\n  responses:\n    BadRequest:\n      description: Bad Request\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n\n    Forbidden:\n      description: Access to the given resource is not allowed\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n\n",
			"canonicalURL": "/github.com/RedHatInsights/playbook-dispatcher@01f91293e762df5d42dbeec88dfe6b8df57920c0/-/blob/schema/public.openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/RedHatInsights/playbook-dispatcher/blob/01f91293e762df5d42dbeec88dfe6b8df57920c0/schema/public.openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "buildIR: make ir: operations: path \"/api/playbook-dispatcher/v1/run_hosts\": get: parameters: \"filter\": field \"Run\": nested objects not allowed"
}