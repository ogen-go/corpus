{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/alphagov/pay-ledger"
		},
		"file": {
			"name": "ledger_spec.yaml",
			"size": 0,
			"path": "openapi/ledger_spec.yaml",
			"byteSize": 42766,
			"content": "openapi: 3.0.1\ninfo:\n  description: Ledger API\n  title: Ledger API\n  version: v1.0.0\nservers:\n- url: http://ledger_url\npaths:\n  /healthcheck:\n    get:\n      operationId: healthCheck\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: string\n                example:\n                  postgresql:\n                    healthy: true\n                    message: Healthy\n                  sqsQueue:\n                    healthy: true\n                    message: Healthy\n                  deadlocks:\n                    healthy: true\n                    message: Healthy\n          description: OK\n        \"503\":\n          description: Service Unavailable\n      summary: \"Healthcheck endpoint the ledger (checks postgresql, sqs queue)\"\n      tags:\n      - Other\n  /v1/event:\n    post:\n      operationId: writeEvent\n      requestBody:\n        content:\n          '*/*':\n            schema:\n              type: array\n              items:\n                $ref: '#/components/schemas/EventMessageDto'\n      responses:\n        default:\n          content:\n            application/json: {}\n          description: default response\n      tags:\n      - Events\n  /v1/event/ticker:\n    get:\n      operationId: listEvents\n      parameters:\n      - description: from date of events to be searched (this date is inclusive).\n        example: 2015-08-14T12:35:00Z\n        in: query\n        name: from_date\n        required: true\n        schema:\n          type: string\n      - description: to date of events to be searched (this date is exclusive)\n        example: 2015-08-14T12:35:00Z\n        in: query\n        name: to_date\n        required: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/EventTicker'\n          description: OK\n        \"422\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing query parameters\n        \"500\":\n          description: Invalid parameters or Downstream system error\n      summary: Get list of events between a date/time range\n      tags:\n      - Events\n  /v1/event/{eventId}:\n    get:\n      operationId: getEvent\n      parameters:\n      - in: path\n        name: eventId\n        required: true\n        schema:\n          type: integer\n          format: int64\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Event'\n          description: OK\n        \"404\":\n          description: Not found\n      summary: Find event by ID (id of event table)\n      tags:\n      - Events\n  /v1/payout:\n    get:\n      operationId: search\n      parameters:\n      - description: \"State of payout. allowed values are intransit, paidout, failed\"\n        in: query\n        name: state\n        schema:\n          type: string\n      - description: \"Page number requested for the search, should be a positive integer\\\n          \\ (optional, defaults to 1)\"\n        in: query\n        name: page\n        schema:\n          type: integer\n          format: int64\n      - description: \"Number of results to be shown per page, should be a positive\\\n          \\ integer (optional, defaults to 500, max 500)\"\n        in: query\n        name: display_size\n        schema:\n          type: integer\n          format: int64\n      - description: Set to true to list all payouts.\n        in: query\n        name: override_account_id_restriction\n        schema:\n          type: boolean\n      - description: Comma delimited gateway account IDs. Required except when override_account_id_restriction=true\n        example: \"1,2\"\n        in: query\n        name: gateway_account_id\n        required: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PayoutSearchResponse'\n          description: OK\n        \"404\":\n          description: Not found\n      summary: Search payouts by gateway_account_id and state\n      tags:\n      - Payouts\n  /v1/report/gateway-performance-report:\n    get:\n      operationId: getGatewayMonthlyPerformanceReport\n      parameters:\n      - description: From date of transaction summary to be searched (this date is\n          inclusive).\n        example: 2022-03-29\n        in: query\n        name: from_date\n        required: true\n        schema:\n          type: string\n      - description: To date of transaction summary to be searched (this date is inclusive).\n        example: 2022-03-29\n        in: query\n        name: to_date\n        required: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/GatewayAccountMonthlyPerformanceReportEntity'\n          description: OK\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameters (from_date or to_date)\n        \"500\":\n          description: Internal Server Error for invalid query parameter values\n      summary: Get monthly performance report by gateway account. Queries transaction_summary\n        table\n      tags:\n      - Reports\n  /v1/report/payments_by_state:\n    get:\n      operationId: getPaymentCountsByState\n      parameters:\n      - description: Gateway account ID. Required when override_account_id_restriction\n          is 'false'\n        example: 1\n        in: query\n        name: account_id\n        schema:\n          type: string\n      - description: Set to true to return statistics for moto transactions\n        example: false\n        in: query\n        name: include_moto_statistics\n        schema:\n          type: boolean\n      - description: From date of transactions to be searched (this date is exclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: from_date\n        schema:\n          type: string\n      - description: To date of transactions to be searched (this date is exclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: to_date\n        schema:\n          type: string\n      - description: Set to true to get counts for all gateway accounts.\n        in: query\n        name: override_account_id_restriction\n        schema:\n          type: boolean\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: object\n                example:\n                  timedout: 0\n                  submitted: 0\n                  declined: 0\n                  created: 0\n                  success: 1\n                  cancelled: 0\n                  started: 0\n                  error: 0\n                  undefined: 0\n                  capturable: 0\n          description: OK\n        \"422\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required or invalid query parameters (from_date or\n            to_date)\n      summary: Get number of payments by transaction (payment) state\n      tags:\n      - Reports\n  /v1/report/performance-report:\n    get:\n      operationId: getPerformanceReport\n      parameters:\n      - description: From date of the transaction summary to be searched (this date\n          is inclusive). Required when to_date is provided\n        example: 2022-03-29\n        in: query\n        name: from_date\n        schema:\n          type: string\n      - description: To date of the transaction summary to be searched (this date\n          is inclusive). Required when from_date is provided\n        example: 2022-03-29\n        in: query\n        name: to_date\n        schema:\n          type: string\n      - description: Transaction state\n        in: query\n        name: state\n        schema:\n          type: string\n          enum:\n          - UNDEFINED\n          - STARTED\n          - CAPTURABLE\n          - FAILED_REJECTED\n          - FAILED_EXPIRED\n          - FAILED_CANCELLED\n          - CANCELLED\n          - CREATED\n          - SUBMITTED\n          - SUCCESS\n          - ERROR\n          - ERROR_GATEWAY\n          - NEEDS_RESPONSE\n          - UNDER_REVIEW\n          - LOST\n          - WON\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PerformanceReportEntity'\n          description: OK\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: For missing query params or invalid state).\n        \"500\":\n          description: Internal Server Error for invalid query params (from_date/to_date)\n            values\n      summary: Get platform performance report (total volume and total_amount) for\n        the date range and transaction state. Queries transaction_summary table for\n        stats\n      tags:\n      - Reports\n  /v1/report/performance-report-legacy:\n    get:\n      operationId: getLegacyPerformanceReport\n      parameters:\n      - description: From date of transactions to be searched (this date is inclusive).\n        example: 2022-03-29T01:00:00Z\n        in: query\n        name: from_date\n        schema:\n          type: string\n      - description: To date of transactions to be searched (this date is exclusive).\n        example: 2022-03-29T01:00:00Z\n        in: query\n        name: to_date\n        schema:\n          type: string\n      - description: Transaction state\n        in: query\n        name: state\n        schema:\n          type: string\n          enum:\n          - UNDEFINED\n          - STARTED\n          - CAPTURABLE\n          - FAILED_REJECTED\n          - FAILED_EXPIRED\n          - FAILED_CANCELLED\n          - CANCELLED\n          - CREATED\n          - SUBMITTED\n          - SUCCESS\n          - ERROR\n          - ERROR_GATEWAY\n          - NEEDS_RESPONSE\n          - UNDER_REVIEW\n          - LOST\n          - WON\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PerformanceReportEntity'\n          description: OK\n        \"500\":\n          description: Internal Server Error for invalid query parameter values\n      summary: \"Get platform performance report (total volume and total_amount) for\\\n        \\ the date range and transaction state. Queries transaction table for stats,\\\n        \\ so could be slow for large date ranges\"\n      tags:\n      - Reports\n  /v1/report/transactions-by-hour:\n    get:\n      operationId: getTransactionsByHour\n      parameters:\n      - description: From date of transaction summary to be searched (this date is\n          inclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: from_date\n        required: true\n        schema:\n          type: string\n      - description: To date of transaction summary to be searched (this date is inclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: to_date\n        required: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/TimeseriesReportSlice'\n          description: OK\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameters\n        \"500\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Invalid query parameters (from_date or to_date)\n      summary: Get transaction summary by hour\n      tags:\n      - Reports\n  /v1/report/transactions-summary:\n    get:\n      operationId: getTransactionSummaryResult\n      parameters:\n      - description: Gateway account ID. Required when override_account_id_restriction\n          is 'false'\n        example: 1\n        in: query\n        name: account_id\n        schema:\n          type: string\n      - description: Set to true to return statistics for moto transactions\n        example: false\n        in: query\n        name: include_moto_statistics\n        schema:\n          type: boolean\n      - description: From date of transactions to be searched (this date is exclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: from_date\n        schema:\n          type: string\n      - description: To date of transactions to be searched (this date is exclusive).\n        example: 2022-03-29T00:00:00Z\n        in: query\n        name: to_date\n        schema:\n          type: string\n      - description: Set to true to return summary for all accounts.\n        in: query\n        name: override_account_id_restriction\n        schema:\n          type: boolean\n      - description: Set to true to make from_date non-mandatory.\n        in: query\n        name: override_from_date_validation\n        schema:\n          type: boolean\n          default: false\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/TransactionSummaryResult'\n          description: OK\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameter (from_date)\n        \"422\":\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required or invalid query parameters (from_date or\n            to_date)\n      summary: Get transaction summary for query params\n      tags:\n      - Reports\n  /v1/transaction:\n    get:\n      operationId: search transactions\n      parameters:\n      - description: Set to '2' to return failed transaction states FAILED_REJECTED/FAILED_EXPIRED/FAILED_CANCELLED\n          mapped to declined/timedout/cancelled external status respectively.Otherwise\n          these transaction states will all be mapped to `failed` status\n        in: query\n        name: status_version\n        schema:\n          type: integer\n          format: int32\n          default: 2\n      - description: Set to 'true' to search for transactions by exact reference.\n          Otherwise reference is partially matched\n        in: query\n        name: exact_reference_match\n        schema:\n          type: boolean\n          default: false\n      - example: test@example.org\n        in: query\n        name: email\n        schema:\n          type: string\n      - example: my-payment-reference\n        in: query\n        name: reference\n        schema:\n          type: string\n      - example: J Doe\n        in: query\n        name: cardholder_name\n        schema:\n          type: string\n      - example: 7890\n        in: query\n        name: last_digits_card_number\n        schema:\n          type: string\n      - example: 123456\n        in: query\n        name: first_digits_card_number\n        schema:\n          type: string\n      - description: Comma delimited payment states.\n        example: \"success,error\"\n        in: query\n        name: payment_states\n        schema:\n          $ref: '#/components/schemas/CommaDelimitedSetParameter'\n      - example: success\n        in: query\n        name: state\n        schema:\n          type: string\n      - description: Comma delimited refund states.\n        example: \"success,error\"\n        in: query\n        name: refund_states\n        schema:\n          $ref: '#/components/schemas/CommaDelimitedSetParameter'\n      - description: Comma delimited card brands.\n        example: \"visa,mastercard\"\n        in: query\n        name: card_brands\n        schema:\n          $ref: '#/components/schemas/CommaDelimitedSetParameter'\n      - description: From date of transactions to be searched (this date is inclusive).\n        example: 2015-08-14T12:35:00Z\n        in: query\n        name: from_date\n        schema:\n          type: string\n      - description: To date of transactions to be searched (this date is inclusive).\n        example: 2015-08-14T12:35:00Z\n        in: query\n        name: to_date\n        schema:\n          type: string\n      - example: PAYMENT\n        in: query\n        name: transaction_type\n        schema:\n          type: string\n          enum:\n          - PAYMENT\n          - REFUND\n          - DISPUTE\n      - example: po_fj893joishj12lndk\n        in: query\n        name: gateway_payout_id\n        schema:\n          type: string\n      - description: From date of transactions settled date to be searched (this date\n          is inclusive).\n        example: 2015-08-14\n        in: query\n        name: from_settled_date\n        schema:\n          type: string\n      - description: To date of transactions settled date to be searched (this date\n          is inclusive).\n        example: 2015-08-14\n        in: query\n        name: to_settled_date\n        schema:\n          type: string\n      - example: metadata-value-1\n        in: query\n        name: metadata_value\n        schema:\n          type: string\n      - example: 17ii98mg7f6si930tcjt48ldlc\n        in: query\n        name: agreement_id\n        schema:\n          type: string\n      - example: 1\n        in: query\n        name: page\n        schema:\n          type: integer\n          format: int64\n      - example: 100\n        in: query\n        name: display_size\n        schema:\n          type: integer\n          format: int64\n          default: 500\n      - description: Set to 'true' to limit the search counting the total number of\n          transactions to 'limit_total_size' param\n        example: true\n        in: query\n        name: limit_total\n        schema:\n          type: boolean\n          default: false\n      - example: 1000\n        in: query\n        name: limit_total_size\n        schema:\n          type: integer\n          format: int64\n          default: 10000\n      - example: a14f0926-b44d-4160-8184-1b1f66e576ab\n        in: query\n        name: gateway_transaction_id\n        schema:\n          type: string\n      - description: Comma delimited dispute states.\n        example: \"won,needs_response\"\n        in: query\n        name: dispute_states\n        schema:\n          $ref: '#/components/schemas/CommaDelimitedSetParameter'\n      - description: Set to true to list transactions for all accounts.\n        in: query\n        name: override_account_id_restriction\n        schema:\n          type: boolean\n      - description: Comma delimited gateway account IDs. Required except when override_account_id_restriction=true\n        example: \"1,2\"\n        in: query\n        name: account_id\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/TransactionSearchResponse'\n          description: OK\n        \"400\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameters\n        \"504\":\n          description: Search query cancelled due to query timeout\n      summary: Search transactions by query params. Same endpoint can be used to download\n        CSV (with  Accept header=\"text/csv\"). Refer to code for details\n      tags:\n      - Transactions\n  /v1/transaction/gateway-transaction/{gatewayTransactionId}:\n    get:\n      operationId: findByGatewayTransactionId\n      parameters:\n      - description: Transaction ID from payment provider\n        example: a14f0926-b44d-4160-8184-1b1f66e576ab\n        in: path\n        name: gatewayTransactionId\n        required: true\n        schema:\n          type: string\n      - example: sandbox\n        in: query\n        name: payment_provider\n        required: true\n        schema:\n          type: string\n      responses:\n        \"200\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/TransactionView'\n          description: OK\n        \"404\":\n          description: Not found\n        \"422\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: If payment_provider query parameter is missing\n      summary: Get transaction for a gateway transaction ID\n      tags:\n      - Transactions\n  /v1/transaction/redact-reference/{transactionExternalId}:\n    post:\n      operationId: redactReference\n      parameters:\n      - in: path\n        name: transactionExternalId\n        required: true\n        schema:\n          type: string\n      responses:\n        default:\n          content:\n            application/json; qs=1: {}\n          description: default response\n      tags:\n      - Transactions\n  /v1/transaction/{parentTransactionExternalId}/transaction:\n    get:\n      operationId: getTransactionsForParentTransaction\n      parameters:\n      - description: Parent transaction external ID\n        example: d0sk01d9amdk3ks0dk2dj03kd\n        in: path\n        name: parentTransactionExternalId\n        required: true\n        schema:\n          type: string\n      - description: Gateway account ID\n        example: 1\n        in: query\n        name: gateway_account_id\n        required: true\n        schema:\n          type: string\n      - description: The type of transactions to return\n        example: REFUND\n        in: query\n        name: transaction_type\n        schema:\n          type: string\n          enum:\n          - PAYMENT\n          - REFUND\n          - DISPUTE\n      responses:\n        \"200\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/TransactionsForTransactionResponse'\n          description: OK\n        \"404\":\n          description: Not found\n        \"422\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameter (gateway_account_id)\n      summary: \"Get transactions (ex: refunds) related to parent transaction (payment)\"\n      tags:\n      - Transactions\n  /v1/transaction/{transactionExternalId}:\n    get:\n      operationId: getById\n      parameters:\n      - in: path\n        name: transactionExternalId\n        required: true\n        schema:\n          type: string\n      - in: query\n        name: account_id\n        schema:\n          type: string\n      - in: query\n        name: override_account_id_restriction\n        schema:\n          type: boolean\n      - in: query\n        name: transaction_type\n        schema:\n          type: string\n          enum:\n          - PAYMENT\n          - REFUND\n          - DISPUTE\n      - in: query\n        name: parent_external_id\n        schema:\n          type: string\n      - in: query\n        name: status_version\n        schema:\n          type: integer\n          format: int32\n          default: 2\n      responses:\n        \"200\":\n          content:\n            application/json; qs=1:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/TransactionView'\n          description: OK\n        \"400\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameters\n        \"500\":\n          description: Internal Server Error for invalid query parameter values\n      summary: Get transaction by external ID\n      tags:\n      - Transactions\n  /v1/transaction/{transactionExternalId}/event:\n    get:\n      operationId: events\n      parameters:\n      - description: Transaction external ID\n        example: 9np5pocnotgkpp029d5kdfau5f\n        in: path\n        name: transactionExternalId\n        required: true\n        schema:\n          type: string\n      - example: 1\n        in: query\n        name: gateway_account_id\n        required: true\n        schema:\n          type: string\n      - description: Set to 'true' to return all events. By default events that do\n          not map to an external state are removed and duplicate events mapping to\n          same external state are reduced to one event.\n        in: query\n        name: include_all_events\n        schema:\n          type: boolean\n          default: false\n      - description: Set to '2' to return failed transaction states FAILED_REJECTED/FAILED_EXPIRED/FAILED_CANCELLED\n          mapped to declined/timedout/cancelled status respectively.Otherwise these\n          transaction states will all be mapped to `failed` status\n        in: query\n        name: status_version\n        schema:\n          type: integer\n          format: int32\n          default: 2\n      responses:\n        \"200\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/TransactionEventResponse'\n          description: OK\n        \"404\":\n          description: Not found\n        \"422\":\n          content:\n            application/json; qs=1:\n              schema:\n                $ref: '#/components/schemas/ErrorResponse'\n          description: Missing required query parameters\n      summary: Get events for transaction external ID\n      tags:\n      - Transactions\ncomponents:\n  schemas:\n    Address:\n      type: object\n      properties:\n        city:\n          type: string\n          example: London\n        country:\n          type: string\n          example: GB\n        county:\n          type: string\n          example: county\n        line1:\n          type: string\n          example: address line 1\n        line2:\n          type: string\n          example: address line 2\n        postcode:\n          type: string\n          example: Ex 8RR\n    AuthorisationSummary:\n      type: object\n      properties:\n        three_d_secure:\n          $ref: '#/components/schemas/ThreeDSecure'\n    CardDetails:\n      type: object\n      properties:\n        billing_address:\n          $ref: '#/components/schemas/Address'\n        card_brand:\n          type: string\n          example: Visa\n        card_type:\n          type: string\n          enum:\n          - CREDIT\n          - DEBIT\n          example: credit\n        cardholder_name:\n          type: string\n          example: J Doe\n        expiry_date:\n          type: string\n          example: 11/43\n        first_digits_card_number:\n          type: string\n          example: \"424242\"\n        last_digits_card_number:\n          type: string\n          example: \"4242\"\n    CommaDelimitedSetParameter:\n      type: object\n      properties:\n        notEmpty:\n          type: boolean\n        parameters:\n          type: array\n          items:\n            type: string\n        rawString:\n          type: string\n    ErrorResponse:\n      type: object\n      properties:\n        error_identifier:\n          type: string\n          enum:\n          - GENERIC\n          - REFUND_NOT_AVAILABLE\n          - REFUND_AMOUNT_AVAILABLE_MISMATCH\n          - REFUND_NOT_AVAILABLE_DUE_TO_DISPUTE\n          - ZERO_AMOUNT_NOT_ALLOWED\n          - MOTO_NOT_ALLOWED\n          - CANCEL_CHARGE_FAILURE_DUE_TO_CONFLICTING_TERMINAL_STATE_AT_GATEWAY_CHARGE_STATE_FORCIBLY_TRANSITIONED\n          - CANCEL_CHARGE_FAILURE_DUE_TO_CONFLICTING_TERMINAL_STATE_AT_GATEWAY_INVALID_STATE_TRANSITION\n          - AUTH_TOKEN_INVALID\n          - AUTH_TOKEN_REVOKED\n          - ACCOUNT_NOT_LINKED_WITH_PSP\n          - TELEPHONE_PAYMENT_NOTIFICATIONS_NOT_ALLOWED\n          - AGREEMENT_NOT_FOUND\n          - ONE_TIME_TOKEN_INVALID\n          - ONE_TIME_TOKEN_ALREADY_USED\n          - INVALID_ATTRIBUTE_VALUE\n          - CARD_NUMBER_REJECTED\n          - AUTHORISATION_API_NOT_ALLOWED\n          - AUTHORISATION_REJECTED\n          - AUTHORISATION_ERROR\n          - AUTHORISATION_TIMEOUT\n          - AGREEMENT_NOT_ACTIVE\n          - INCORRECT_AUTHORISATION_MODE_FOR_SAVE_PAYMENT_INSTRUMENT_TO_AGREEMENT\n          - MISSING_MANDATORY_ATTRIBUTE\n          - UNEXPECTED_ATTRIBUTE\n          - ACCOUNT_DISABLED\n          example: GENERIC\n        message:\n          type: array\n          items:\n            type: string\n            example: example error message\n    Event:\n      type: object\n      properties:\n        event_data:\n          type: string\n          example: \"{\\\"live\\\": false, \\\"moto\\\": false, \\\"amount\\\": 1000, \\\"source\\\"\\\n            : \\\"CARD_API\\\", \\\"language\\\": \\\"en\\\", \\\"reference\\\": \\\"my payment reference\\\"\\\n            , \\\"return_url\\\": \\\"https://www.payments.service.gov.uk\\\", \\\"description\\\"\\\n            : \\\"my payment\\\", \\\"delayed_capture\\\": false, \\\"payment_provider\\\": \\\"\\\n            sandbox\\\", \\\"gateway_account_id\\\": \\\"3\\\", \\\"credential_external_id\\\":\\\n            \\ \\\"ddb294481de146c09598c8cce0461af9\\\", \\\"save_payment_instrument_to_agreement\\\"\\\n            : false}\\\"\"\n        event_date:\n          type: string\n          format: date-time\n        event_type:\n          type: string\n          example: PAYMENT_CREATED\n        live:\n          type: boolean\n          example: true\n        parent_resource_external_id:\n          type: string\n          default: \"null\"\n          example: l40ajdf0923uojlkfjsldkjfl2\n        reproject_domain_object:\n          type: boolean\n          default: false\n          example: true\n        resource_external_id:\n          type: string\n          example: 58na2dr7rv7h6h53bef1l0soep\n        resource_type:\n          type: string\n          enum:\n          - agreement\n          - payment\n          - refund\n          - service\n          - card_payment\n          - payout\n          - dispute\n          - payment_instrument\n          example: payment\n        service_id:\n          type: string\n          example: ea2d6673b23d4ff7ad88a1fd3c7ab0f6\n        sqs_message_id:\n          type: string\n          example: fe689579-63af-40bf-a783-23de97134b5f\n    EventMessageDto:\n      type: object\n      properties:\n        event_details:\n          type: string\n        event_type:\n          type: string\n        live:\n          type: boolean\n        parent_resource_external_id:\n          type: string\n        reproject_domain_object:\n          type: boolean\n        resource_external_id:\n          type: string\n        resource_type:\n          type: string\n          enum:\n          - agreement\n          - payment\n          - refund\n          - service\n          - card_payment\n          - payout\n          - dispute\n          - payment_instrument\n        service_id:\n          type: string\n        timestamp:\n          type: string\n          format: date-time\n    EventTicker:\n      type: object\n      properties:\n        amount:\n          type: integer\n          format: int64\n          example: 100\n        card_brand:\n          type: string\n          example: visa\n        event_date:\n          type: string\n          format: date-time\n        event_type:\n          type: string\n          example: PAYMENT_CREATED\n        gateway_account_id:\n          type: string\n          example: \"1\"\n        payment_provider:\n          type: string\n          example: sandbox\n        resource_external_id:\n          type: string\n          example: 9np5pocnotgkpp029d5kdfau5f\n        resource_type:\n          type: string\n          enum:\n          - agreement\n          - payment\n          - refund\n          - service\n          - card_payment\n          - payout\n          - dispute\n          - payment_instrument\n          example: payment\n        transaction_type:\n          type: string\n          example: PAYMENT\n    ExternalTransactionState:\n      type: object\n      properties:\n        code:\n          type: string\n          example: P0030\n        finished:\n          type: boolean\n          example: true\n        message:\n          type: string\n          example: Payment was cancelled by the user\n        status:\n          type: string\n          example: cancelled\n    GatewayAccountMonthlyPerformanceReportEntity:\n      type: object\n      properties:\n        average_amount:\n          type: number\n          example: 1000.0\n        gateway_account_id:\n          type: integer\n          format: int64\n          example: 1\n        month:\n          type: integer\n          format: int64\n          example: 3\n        total_amount:\n          type: number\n          example: 1000\n        total_volume:\n          type: integer\n          format: int64\n          example: 1\n        year:\n          type: integer\n          format: int64\n          example: 2022\n    PaginationBuilder:\n      type: object\n      properties:\n        first_page:\n          $ref: '#/components/schemas/PaginationLink'\n        last_page:\n          $ref: '#/components/schemas/PaginationLink'\n        next_page:\n          $ref: '#/components/schemas/PaginationLink'\n        prev_page:\n          $ref: '#/components/schemas/PaginationLink'\n        self:\n          $ref: '#/components/schemas/PaginationLink'\n    PaginationLink:\n      type: object\n      properties:\n        href:\n          type: string\n          example: https://an.example.link\n    PayoutSearchResponse:\n      type: object\n      properties:\n        _links:\n          $ref: '#/components/schemas/PaginationBuilder'\n        count:\n          type: integer\n          format: int64\n          example: 100\n        page:\n          type: integer\n          format: int64\n          example: 1\n        results:\n          type: array\n          items:\n            $ref: '#/components/schemas/PayoutView'\n        total:\n          type: integer\n          format: int64\n          example: 1000\n    PayoutView:\n      type: object\n      properties:\n        amount:\n          type: integer\n          format: int64\n          description: amount in pence\n          example: 1000\n        created_date:\n          type: string\n          format: date-time\n        gateway_account_id:\n          type: string\n          example: \"1\"\n        gateway_payout_id:\n          type: string\n          example: po_sd0fkpam0dlwe10dmlsl3mf\n        live:\n          type: boolean\n          example: true\n        paid_out_date:\n          type: string\n          format: date-time\n        service_id:\n          type: string\n          example: dlsd0dkad20sk0adne9fjd\n        state:\n          type: string\n          enum:\n          - UNDEFINED\n          - IN_TRANSIT\n          - PAID_OUT\n          - FAILED\n          example: \"{\\\"status\\\":\\\"paidout\\\",\\\"finished\\\":true}\"\n    PerformanceReportEntity:\n      type: object\n      properties:\n        average_amount:\n          type: number\n          example: 1000.0\n        total_amount:\n          type: number\n          example: 1000\n        total_volume:\n          type: integer\n          format: int64\n          example: 1\n    RefundSummary:\n      type: object\n      properties:\n        amount_available:\n          type: integer\n          format: int64\n        amount_refunded:\n          type: integer\n          format: int64\n        amount_submitted:\n          type: integer\n          format: int64\n        status:\n          type: string\n          example: unavailable\n        user_external_id:\n          type: string\n    SettlementSummary:\n      type: object\n      properties:\n        settled_date:\n          type: string\n          example: 2022-01-26\n    ThreeDSecure:\n      type: object\n      properties:\n        required:\n          type: boolean\n          description: '`true` if payment requires 3D Secure authentication. '\n          example: true\n        version:\n          type: string\n          example: 2.1.0\n    TimeseriesReportSlice:\n      type: object\n      properties:\n        all_payments:\n          type: integer\n          format: int32\n          example: 10\n        amount:\n          type: integer\n          format: int32\n          example: 70\n        completed_payments:\n          type: integer\n          format: int32\n          example: 7\n        errored_payments:\n          type: integer\n          format: int32\n          example: 3\n        fee:\n          type: integer\n          format: int32\n        net_amount:\n          type: integer\n          format: int32\n        timestamp:\n          type: string\n          format: date-time\n        total_amount:\n          type: integer\n          format: int32\n    TransactionEvent:\n      type: object\n      properties:\n        amount:\n          type: integer\n          format: int64\n          example: 1000\n        data:\n          type: object\n          additionalProperties:\n            type: object\n        event_type:\n          type: string\n          example: CANCELLED_BY_USER\n        resource_type:\n          type: string\n          example: PAYMENT\n        state:\n          $ref: '#/components/schemas/ExternalTransactionState'\n        timestamp:\n          type: string\n          format: date-time\n    TransactionEventResponse:\n      type: object\n      properties:\n        events:\n          type: array\n          items:\n            $ref: '#/components/schemas/TransactionEvent'\n        transaction_id:\n          type: string\n          example: 9np5pocnotgkpp029d5kdfau5f\n    TransactionSearchResponse:\n      type: object\n      properties:\n        _links:\n          $ref: '#/components/schemas/PaginationBuilder'\n        count:\n          type: integer\n          format: int64\n        page:\n          type: integer\n          format: int64\n        results:\n          type: array\n          items:\n            $ref: '#/components/schemas/TransactionView'\n        total:\n          type: integer\n          format: int64\n    TransactionSummaryResult:\n      type: object\n      properties:\n        moto_payments:\n          $ref: '#/components/schemas/TransactionsStatisticsResult'\n        net_income:\n          type: integer\n          format: int64\n          example: 6000\n        payments:\n          $ref: '#/components/schemas/TransactionsStatisticsResult'\n        refunds:\n          $ref: '#/components/schemas/TransactionsStatisticsResult'\n    TransactionView:\n      type: object\n      properties:\n        agreement_id:\n          type: string\n        amount:\n          type: integer\n          format: int64\n          example: 1000\n        authorisation_mode:\n          type: string\n          enum:\n          - web\n          - moto_api\n          - agreement\n          - external\n          example: web\n        authorisation_summary:\n          $ref: '#/components/schemas/AuthorisationSummary'\n        card_details:\n          $ref: '#/components/schemas/CardDetails'\n        corporate_card_surcharge:\n          type: integer\n          format: int64\n          example: 0\n        created_date:\n          type: string\n          format: date-time\n        credential_external_id:\n          type: string\n          example: 7a7a718cb8b0401f8b8f4cdda9804073\n        delayed_capture:\n          type: boolean\n        description:\n          type: string\n          example: New passport application\n        disputed:\n          type: boolean\n        email:\n          type: string\n          example: citizen@example.org\n        evidence_due_date:\n          type: string\n          format: date-time\n        fee:\n          type: integer\n          format: int64\n          example: 2\n        gateway_account_id:\n          type: string\n          example: \"1\"\n        gateway_payout_id:\n          type: string\n          example: po_mdoiu23jkdj1kj23sd\n        gateway_transaction_id:\n          type: string\n          example: fd21-1mdknkls1-2121-csdf\n        language:\n          type: string\n          example: en\n        live:\n          type: boolean\n        metadata:\n          type: object\n          additionalProperties:\n            type: object\n        moto:\n          type: boolean\n        net_amount:\n          type: integer\n          format: int64\n          example: -2\n        parent_transaction_id:\n          type: string\n          description: Parent transaction external ID. Available for refunds\n          example: 4dfdhapsdgftgkpp029d5kdfau5f\n        payment_details:\n          $ref: '#/components/schemas/TransactionView'\n        payment_provider:\n          type: string\n          example: sandbox\n        reason:\n          type: string\n          example: fraudulent\n        reference:\n          type: string\n          example: payment reference\n        refund_summary:\n          $ref: '#/components/schemas/RefundSummary'\n        refunded_by:\n          type: string\n          description: External ID of the service user that refunded payment. Only\n            available for refunds\n          example: dj8923eihsdih23hkjfe8d\n        refunded_by_user_email:\n          type: string\n          description: Service user email that refunded the payment. Only available\n            for refunds\n          example: test@example.org\n        return_url:\n          type: string\n          example: https://service-name.gov.uk/transactions/12345\n        service_id:\n          type: string\n          example: baea0585e30d4acbb438524fca82b51e\n        settlement_summary:\n          $ref: '#/components/schemas/SettlementSummary'\n        source:\n          type: string\n          enum:\n          - CARD_API\n          - CARD_PAYMENT_LINK\n          - CARD_AGENT_INITIATED_MOTO\n          - CARD_EXTERNAL_TELEPHONE\n          example: CARD_API\n        state:\n          $ref: '#/components/schemas/ExternalTransactionState'\n        total_amount:\n          type: integer\n          format: int64\n          example: 1000\n        transaction_id:\n          type: string\n          example: 9np5pocnotgkpp029d5kdfau5f\n        transaction_type:\n          type: string\n          enum:\n          - PAYMENT\n          - REFUND\n          - DISPUTE\n          example: PAYMENT\n        wallet_type:\n          type: string\n          example: APPLE_PAY\n    TransactionsForTransactionResponse:\n      type: object\n      properties:\n        parent_transaction_id:\n          type: string\n          example: 9np5pocnotgkpp029d5kdfau5f\n        transactions:\n          type: array\n          items:\n            $ref: '#/components/schemas/TransactionView'\n    TransactionsStatisticsResult:\n      type: object\n      properties:\n        count:\n          type: integer\n          format: int64\n          example: 1\n        gross_amount:\n          type: integer\n          format: int64\n          example: 2000\n",
			"canonicalURL": "/github.com/alphagov/pay-ledger@560b3144b95de4c31063e5b68ddad15f60a75eef/-/blob/openapi/ledger_spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/alphagov/pay-ledger/blob/560b3144b95de4c31063e5b68ddad15f60a75eef/openapi/ledger_spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "buildIR: make ir: operations: path \"/v1/transaction\": get: parameters: \"payment_states\": field \"Parameters\": nested arrays not allowed",
	"NotImplemented": [
		"unsupported content types"
	]
}