{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/fabric8-analytics/fabric8-analytics-server"
		},
		"file": {
			"name": "stack_analyses.yaml",
			"size": 0,
			"path": "api_specs/v2/stack_analyses.yaml",
			"byteSize": 19920,
			"content": "openapi: 3.0.1\ninfo:\n  title: Stack Analyses API\n  version: \"2.0\"\nservers:\n  - url: https://f8a-analytics-2445582058137.{environment}.gw.apicast.io/api/v2\n    variables:\n      environment:\n        default: production # Production server\n        enum:\n          - production # Production server\n          - staging # Staging server\n\nsecurity: # All endpoints needs 3scale user_key, refer securitySchemes\n  - tokenAuth: []\n\npaths:\n  /stack-analyses:\n    post:\n      tags:\n      - Scan Services\n      summary: |\n        Initiates a scan to gather security and other details about \n        an application stack and related recommendations to improve \n        the stack.\n      parameters:\n      - name: uuid\n        in: header\n        description: Unique identifier for an User.\n        required: true\n        schema:\n          type: string\n          format: uuid\n      requestBody:\n        content:\n          multipart/form-data:\n            schema:\n              required:\n              - file_path\n              - manifest\n              - ecosystem\n              type: object\n              properties:\n                manifest:\n                  type: string\n                  description: | \n                    A manifest file dependencies.txt for maven, npmlist.json\n                    for npm \u0026 pylist.json for pypi. Commands to \n                    generate these files are mentioned in the README.md\n                  format: binary\n                file_path:\n                  type: string\n                  description: |\n                    The absolute or relative path where the manifest file\n                    is located. This has to be mandatorily provided with \n                    the manifest[] parameter and vice versa.\n                show_transitive:\n                  type: boolean\n                  default: true\n                  description: |\n                    This is required to enable or disable the \n                    transitive support.\n                ecosystem:\n                  $ref: '#/components/schemas/Ecosystem'\n        required: true\n      responses:\n        200:\n          headers:\n            uuid:\n              schema:\n                type: string\n                format: uuid\n                description: |\n                  Newly generated or existing identifier for an User.\n              required: true\n          description: |\n            Response with the unique identifier for the stack analysis\n            request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UserStackIdentifier'\n        400:\n          description: Bad request\n          content: {}\n        401:\n          description: Request Unauthorized\n          content: {}\n\n  /stack-analyses/{request_id}:\n    get:\n      tags:\n      - Scan Services\n      summary: |\n        Get security and other details about an application stack \n        and related recommendations to improve the stack.\n      parameters:\n      - name: request_id\n        in: path\n        description: stack analysis request id\n        required: true\n        schema:\n          type: string\n          example: \"478eb2dedca34dbc80146805e08e31b4\"\n      responses:\n        200:\n          description: |\n            Detailed response for the requested application component\n          content:\n            application/json:\n              schema:\n                oneOf:\n                - $ref: '#/components/schemas/StackAnalysesResultForRegisteredUser'\n                - $ref: '#/components/schemas/StackAnalysesResultForFreeTier'\n        202:\n          description: Report generation is inprogress\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  error: \n                    type: string\n                    example: |\n                      Analysis for request \n                      ID '478eb2dedca34dbc80146805e08e31b4' is in progress\n        401:\n          description: Request unauthorized\n          content: {}\n        404:\n          description: Data not found\n          content: {}\n        408:\n          description: Request has timed out on server\n          content: {}\ncomponents:\n  schemas:\n    Ecosystem:\n      title: Ecosystem\n      type: string\n      enum:\n        - maven\n        - pypi\n        - npm\n      description: List of supported package ecosystems\n\n    BasicVulnerabilityFields:\n      title: BasicVulnerabilityFields\n      required: \n        - cvss\n        - cvss_v3\n        - severity\n        - title\n        - id\n        - url\n      properties:\n        cve_ids:\n          type: array\n          items:\n            type: string\n          example: \n            - CVE-2014-0474\n            - CVE-2014-0475\n        cvss:\n          type: number\n          format: float\n          example: 9.8\n        cwes:\n          type: array\n          items:\n            type: string\n          example: \n            - CWE-185\n            - CWE-730\n        cvss_v3:\n          type: string\n          example: \"CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H\"\n        severity:\n          type: string\n          enum:\n            - low\n            - medium\n            - high\n            - critical\n        title:\n          type: string\n          example: SQL Injection\n        id:\n          type: string\n          example: SNYK-PYTHON-DJANGO-40027\n        url:\n          type: string\n          example: https://snyk.io/vuln/SNYK-PYTHON-DJANGO-4002\n      description: Limited private vulnerability details for free tier users\n\n    PremiumVulnerabilityFields:\n      title: PremiumVulnerabilityFields\n      allOf:\n        - $ref: '#/components/schemas/BasicVulnerabilityFields'\n        - type: object\n          properties:\n            malicious:\n              type: boolean\n              default: true\n            patch_exists:\n              type: boolean\n              default: false\n              example: true\n            fixable:\n              type: boolean\n              default: false\n              example: true\n            exploit:\n              type: string\n              enum:\n                - High\n                - Functional\n                - Proof of Concept\n                - Unproven\n                - Not Defined\n              example: High\n            description:\n              type: string\n              example: |\n                \"## Overview\\r\\n[`django`](https://pypi.python.org/pypi/django) is a high-level Python Web framework that encourages rapid development and clean, pragmatic design.\\r\\n\\r\\nAffected versions of this package expose sensitive information due to not properly restricting the use of a query string that performs certain object filtering. An attacker may obtain sensitive information via a series of requests containing regular expressions, as demonstrated by a `created_by__password__regex` parameter.\\r\\n\\r\\n## References\\r\\n- [Django Vulnerability Description](http://www.djangoproject.com/weblog/2010/dec/22/security/)\\r\\n- [GitHub Commit](https://github.com/django/django/commit/732198ed5c)\\r\\n- [Redhat Bugzilla](https://bugzilla.redhat.com/show_bug.cgi?id=665373)\\r\\n- [Openwall](http://www.openwall.com/lists/oss-security/2011/01/03/5)\\r\\n- [CVE](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-4534)\\r\\n\"\n            fixed_in:\n              type: array\n              items:\n                type: string\n              example:\n                - 2.6.7\n                - 2.7.5\n                - 2.8.0\n            references:\n              type: array\n              items:\n                type: object\n                properties:\n                  title:\n                    type: string\n                    example: Redhat Security Advisory\n                  url:\n                    type: string\n                    example: https://access.redhat.com/security/cve/CVE-2013-2186\n          description: |\n            Extended Vulnerability details, available only to registered users\n\n    Package:\n      title: Package\n      type: object\n      required: \n        - name\n        - version\n      properties:\n        name:\n          type: string\n          example: django\n        version:\n          type: string\n          example: 1.2.1\n        dependencies:\n          type: array\n          items:\n            $ref: '#/components/schemas/Package'\n          example:\n            - requests:\n                name: requests\n                version: 1.2.3\n            - six:\n                name: six\n                version: 5.1.1          \n      description: Package details\n\n    UnknownLicenses:\n      title: UnknownLicenses\n      type: object\n      properties:\n        component_conflict:\n          type: array\n          items:\n            type: object\n            properties:\n              package:\n                type: string\n                example: django\n              license1:\n                type: string\n                example: BSD License (BSD)\n              license2:\n                type: string\n                example: General Public License V3(GPL)\n          description: |\n            List of conflicting licenses\n        unknown:\n          type: array\n          items:\n            type: object\n            properties:\n              package:\n                type: string\n                example: django\n              license:\n                type: string\n                example: BSD License (BSD)\n            description: |\n              List of licenses which are unknown to the platform.\n      description: Licesens which are unknown to the platform.\n\n    ConflictPackages:\n      title: ConflictPackages\n      type: object\n      required: \n        - package1\n        - package2\n        - license1\n        - license2\n      properties:\n        package1:\n          type: string\n          example: django\n        license1:\n          type: string\n          example: BSD License (BSD)\n        package2:\n          type: string\n          example: rustdoc\n        license2: \n          type: string\n          example: General Public License V3(GPL)\n      description: Pair of packages which has conflict in license\n\n    LicenseAnalysis:\n      title: LicenseAnalysis\n      type: object\n      required: \n        - outlier_packages\n        - conflict_packages\n        - current_stack_license\n        - unknown_licenses\n      properties:\n        reason:\n          type: string\n          example: |\n            Cannot calculate stack license due to unknown dependencies or license not supported.\n        status:\n          type: string\n          enum:\n            - ComponentConflict\n            - StackConflict\n            - Successful\n            - Unknown\n            - Failure\n        recommended_licenses:\n          type: array\n          items:\n            type: string\n        outlier_packages:\n          type: array\n          items:\n            type: object\n            properties: {}\n        conflict_packages:\n          type: array\n          items:\n            $ref: '#/components/schemas/ConflictPackages'\n        current_stack_license:\n          type: object\n          properties: {}\n        unknown_licenses:\n          $ref: '#/components/schemas/UnknownLicenses'\n        distinct_licenses:\n          type: array\n          items:\n            type: string\n      description: License analyses data\n\n    GitHubDetails:\n      title: GitHubDetails\n      type: object\n      properties:\n        watchers:\n          type: string\n          example: \"100K\"\n        first_release_date:\n          type: string\n        total_releases:\n          type: string\n          example: \"12\"\n        issues:\n          type: object\n          properties: {}\n        pull_requests:\n          type: object\n          properties: {}\n        dependent_repos:\n          type: string\n        open_issues_count:\n          type: string\n        latest_release_duration:\n          type: string\n        forks_count:\n          type: string\n          example: \"123\"\n        contributors:\n          type: string\n          example: \"12\"\n        size:\n          type: string\n        stargazers_count:\n          type: string\n          example: \"50K\"\n        used_by:\n          type: array\n          items:\n            type: string\n        dependent_projects:\n          type: string\n          example: \"11K\"\n      description: Github details\n\n    PackageDetails:\n      title: PackageDetails\n      allOf:\n        - $ref: '#/components/schemas/Package'\n        - type: object\n          required:\n            - name\n            - version\n            - latest_version\n            - ecosystem\n          properties:\n            latest_version:\n              type: string\n              example: 3.0.5\n            github:\n              $ref: '#/components/schemas/GitHubDetails'\n            licenses:\n              type: array\n              items:\n                type: string\n              example:\n                - Apache License, Version 2.0\n            ecosystem:\n              $ref: '#/components/schemas/Ecosystem'\n            url:\n              type: string\n              example: \n                - https://snyk.io/vuln/pip:django\n                - https://snyk.io/vuln/pip:jinja2\n          description: Details of the package\n\n    PackageDetailsForRegisteredUser:\n      title: PackageDetailsForRegisteredUser\n      allOf:\n        - $ref: '#/components/schemas/PackageDetails'\n        - type: object\n          properties:\n            public_vulnerabilities:\n              type: array\n              description: Publicly known vulnerability details\n              items:\n                $ref: '#/components/schemas/PremiumVulnerabilityFields'\n            private_vulnerabilities:\n              type: array\n              description: |\n                Private vulnerability details, available only to registered\n                users\n              items:\n                $ref: '#/components/schemas/PremiumVulnerabilityFields'\n            recommended_version:\n              type: string\n              example: 3.0.0\n              description: |\n                Recommended package version which includes fix for both public and private vulnerabilities.\n            vulnerable_dependencies:\n              type: array\n              items:\n                $ref: '#/components/schemas/PackageDetailsForRegisteredUser'\n              description: |\n                List of dependencies which are vulnerable.\n          description: Details of the package for registered users\n\n    PackageDetailsForFreeTier:\n      title: PackageDetailsForFreeTier\n      allOf:\n        - $ref: '#/components/schemas/PackageDetails'\n        - type: object\n          properties:\n            public_vulnerabilities:\n              type: array\n              description: Publicly known vulnerability details\n              items:\n                $ref: '#/components/schemas/BasicVulnerabilityFields'\n            private_vulnerabilities:\n              type: array\n              description: Private vulnerability details with limited info\n              items:\n                $ref: '#/components/schemas/BasicVulnerabilityFields'\n            recommended_version:\n              type: string\n              example: 3.0.0\n              description: |\n                Recommended package version which includes fix for public vulnerabilities.\n            vulnerable_dependencies:\n              type: array\n              items:\n                $ref: '#/components/schemas/PackageDetailsForFreeTier'    \n              description: |\n                List of dependencies which are vulnerable.\n          description: Details of the package for free tier users\n\n    RecommendedPackageData:\n      title: RecommendedPackageData\n      description: Recommended packages data\n      allOf:\n      - $ref: '#/components/schemas/PackageDetails'\n      - type: object\n        properties:\n          cooccurrence_probability:\n            type: number\n            format: float\n            example: 83.16431\n          cooccurrence_count:\n            type: string\n          topic_list:\n            type: array\n            items:\n              type: string\n              \n    StackRecommendation:\n      title: StackRecommendation\n      type: object\n      properties:\n        companion:\n          type: array\n          items:\n            $ref: '#/components/schemas/RecommendedPackageData'\n        manifest_file_path:\n          type: string\n          example: pom.xml\n        usage_outliers:\n          type: array\n          items:\n            type: object\n            properties: {}\n      description: Application stack recommendations              \n              \n    RegistrationStatus:\n      title: RegistrationStatus\n      type: string\n      enum:\n        - registered\n        - freetier\n      default: freetier\n      \n    StackAnalysesResult:\n      title: StackAnalysesResult\n      type: object\n      required:\n        - uuid\n        - registration_status\n        - manifest_file_path\n        - manifest_name\n        - ecosystem\n        - unknown_dependencies\n        - license_analysis\n        - recommendation\n      discriminator:\n        propertyName: registration_status\n        mapping:\n          registered: '#/components/schemas/StackAnalysesResultForRegisteredUser'\n          freetier: '#/components/schemas/StackAnalysesResultForFreeTier'\n      properties:\n        uuid:\n          type: string\n          format: uuid      \n        registration_status:\n          $ref: '#/components/schemas/RegistrationStatus'\n        manifest_file_path:\n          type: string\n          example: pom.xml\n        manifest_name:\n          type: string\n          example: dependencies.txt\n        ecosystem:\n          $ref: '#/components/schemas/Ecosystem'\n        unknown_dependencies:\n          type: array\n          items:\n            $ref: '#/components/schemas/Package'\n          example:\n            - name: rocket-db\n              version: 2020.1.alpha\n            - name: jsonp\n              version: 0.0.1\n        license_analysis:\n          $ref: '#/components/schemas/LicenseAnalysis'\n        recommendation:\n          $ref: '#/components/schemas/StackRecommendation'\n      description: Stack analyses result data\n\n    StackAnalysesResultForRegisteredUser:\n      title: StackAnalysesResultForRegisteredUser\n      allOf:\n      - $ref: '#/components/schemas/StackAnalysesResult'      \n      - type: object\n        required:\n          - analyzed_dependencies\n        properties:\n          analyzed_dependencies:\n            type: array\n            items:\n              $ref: '#/components/schemas/PackageDetailsForRegisteredUser'\n            description: |\n              All direct dependencies details regardless of it's vulnerability status\n      description: Stack analyses result for registered user\n      \n    StackAnalysesResultForFreeTier:\n      title: StackAnalysesResultForFreeTier\n      allOf:\n      - $ref: '#/components/schemas/StackAnalysesResult'\n      - type: object\n        required:\n          - registration_link\n          - analyzed_dependencies\n        properties:\n          registration_link:\n            type: string\n          analyzed_dependencies:\n            type: array\n            items:\n              $ref: '#/components/schemas/PackageDetailsForFreeTier'\n            description: |\n              All direct dependencies details regardless of it's vulnerability status\n      description: Stack analyses result for free tier user\n\n    UserStackIdentifier:\n      title: UserStackIdentifier\n      type: object\n      properties:\n        id:\n          type: string\n          example: 229e7da76708fe374d8c10fa752e72989f\n        status:\n          type: string\n          example: success\n        submitted_at:\n          type: string\n          example: \"2020-04-06 11:56:08.349405\"\n      description: |\n        Response structure for stack analyses post call.\n\n  securitySchemes:\n    tokenAuth:\n      type: apiKey\n      description: 3Scale user key\n      name: user_key\n      in: query\n",
			"canonicalURL": "/github.com/fabric8-analytics/fabric8-analytics-server@034a9246cf51208fb71839ddd6f1a6f427cd27ab/-/blob/api_specs/v2/stack_analyses.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/fabric8-analytics/fabric8-analytics-server/blob/034a9246cf51208fb71839ddd6f1a6f427cd27ab/api_specs/v2/stack_analyses.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "buildIR: make ir: path \"/stack-analyses/{request_id}\": get: responses: code 200: contents: application/json: generate schema: oneOf: collect variants: oneOf[0]: allOf: field recommendation: field companion: item: allOf: schema type mismatch:  and object"
}