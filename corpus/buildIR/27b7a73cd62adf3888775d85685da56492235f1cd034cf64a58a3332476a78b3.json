{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/scau-tuzi/tiku"
		},
		"file": {
			"name": "publicapi.yaml",
			"size": 0,
			"path": "doc/api/publicapi.yaml",
			"byteSize": 17340,
			"content": "openapi: 3.0.0\n# Added by API Auto Mocking Plugin\nservers:\n  - description: 题库测试接口\n    url: http://203.195.239.100:10086/tiku/api/v1/\ninfo:\n  description: 题库系统供其他应用调用的接口\n  version: \"1.3.0\"\n  title: 题库外部接口\n  contact:\n    email: czfshine@outlook.com\n  license:\n    name: MIT license\npaths:\n  /problems:\n    post:\n      summary: 增加题目\n      operationId: addProblems\n      description: |\n        增加一道题目到题库\n      responses:\n        '200':\n          description: 项目被创建\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/BasicResponse'\n        '401':\n          description: 参数错误\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ProblemInfo'\n    delete:\n      summary: 删除题目\n      description: 删除题目，swagger的del不能有请求体，只能写在参数里面了\n      parameters:\n        - name: X-tiku-poolId\n          in: header\n          description: 题库id\n          required: true\n          schema:\n            type: string\n            format: uuid\n        - name: X-tiku-token\n          in: header\n          description: 授权码\n          required: true\n          schema:\n            type: string\n            format: uuid\n        - name: problemId\n          in: query\n          description: 待删除的问题\n          required: true\n          example: \"13245678\"\n          schema:\n            type: string\n            \n      responses:\n        '200':\n          description: 成功\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/BasicResponse'\n        '401':\n          description: 参数错误\n          \n  /queryProblems:\n    post:\n      summary : 查询题目信息\n      operationId: queryProblems\n      description: |\n        按条件查询题目\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/QuerryInfo'\n      responses:\n        '200':\n          description: 返回查询到的项目列表\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/QuerryResult'\n        '401':\n          description: 参数格式错误\n  /queryCollection:\n    post:\n      summary : 查询题目集合信息\n      operationId: queryCollection\n      description: |\n        按条件查询集合，与查询题目一模一样，不过是去集合里面找而已\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/QuerryInfo'\n      responses:\n        '200':\n          description: 返回查询到的项目列表\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/QuerryResult'\n        '401':\n          description: 参数格式错误\n  /problemStatus:\n    put:\n      operationId: problemStatus\n      summary: 更新题目状态\n      description: 更新错题状态\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/StatusInfo'\n      responses:\n        '200':\n          description: 更新状态成功\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/BasicResponse'\n        '401':\n          description: 参数格式错误\n    post:\n      operationId: getProblemStatus\n      summary: 获取题目状态\n      description: 获取错题状态\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ProblemIdList'\n      responses:\n        '200':\n          description: 获取状态成功\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/StatusInfoList'\n        '401':\n          description: 参数格式错误\n  /collection:\n    post:\n      summary: 增加题目集合\n      description: 添加题目集合信息\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/CollectionInfo'\n      responses:\n        '200':\n          description: 添加成功\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/CollectionIdResult'\n        '401':\n          description: 参数格式错误\n  /revokeUserToken:\n    post:\n      summary: 撤销授权\n      requestBody:\n        content:\n           application/json:\n            schema:\n              $ref: '#/components/schemas/RevokeInfo'\n      responses:\n        '200':\n          description: 成功\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/BasicResponse'\n        '401':\n          description: 参数错误\n      \n  /grantUserToken:\n    post:\n      summary: 授权\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/GrantInfo\"\n      responses:\n        '200':\n          description: 成功\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/GrantResult\"\n        '401':\n          description: 参数错误\n  /getUserInfo:\n    post:\n      summary: 获取用户信息\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/UserId\"\n      responses:\n        '200':\n          description: 成功\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/UserInfo\"\n        '401':\n          description: 参数错误\n  /userInfo:\n    post:\n      summary: 增加用户信息\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/UserInfo\"\n      responses:\n        '200':\n          description: 成功\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/BasicResponse\"\n        '401':\n          description: 参数错误\n\n            \ncomponents:\n  schemas:\n    AnyValue:\n      description: 题目和其他对象的具体信息，任意对象 https://www.yuque.com/czfshine/olm1pa/xrw896\n      example: {\"grade\":\"一年级\",\"subject\":\"小学数学\",\"sorce\":5.5,\"stem\":\"请写出下列数字的相反数\",\"caption\":\"1. 5 \\n 2. 6 \\n 3. -1 \\n\",\"answer\":[-5,-6,1]}\n    ProblemInfo:\n      type: object\n      required:\n        - poolId\n        - token\n        - properties\n      properties:\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        problems:\n          type: array\n          items:\n            $ref: '#/components/schemas/AnyValue'\n    QuerryInfo:\n      type: object\n      required:\n        - poolId\n        - token\n        - querry\n      properties:\n      # 必须的属性\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        querry:\n          $ref: '#/components/schemas/Expression'\n        \n      # 可选\n        random:\n          type: boolean\n          example: false\n          description: 是否打乱顺序输出\n        deep:\n          type: boolean\n          example: false\n          description: 是否递归获取所有信息 \n            为false的话，result就只是一个id列表数组 \n            为true的话，result是具体的信息对象，在可能有大量结果的时候慎用\n        ordering: \n          $ref:  '#/components/schemas/OrderInfo'\n        pagination:\n          $ref:  '#/components/schemas/Pagination'\n    BasicResponse:\n      type: object\n      required:\n        - status\n      properties:\n        status:\n          $ref: '#/components/schemas/StatusCode'\n        data:\n          type: object\n    Expression:\n      type: object\n      description: |\n        要查询执行的操作，类型是一个 操作表达式对象 ，每个 操作表达式 对象包括 operator(操作名),argument1/2 参数。同时参数也可以是另外的一个表达式对象。样例的查询等价于 ((grade == \"一年级\") and (sroce \u003c= 10))|\n        具体信息在：https://www.yuque.com/czfshine/olm1pa/mxeyum\n      required:\n        - operator\n        - argument1\n        - argument2\n      properties:\n        operator:\n          type: string\n          example: and\n        argument1:\n          oneOf:\n            - type: string\n            - $ref: '#/components/schemas/Expression'\n          example: {\"operator\":\"==\",\"argument1\":\"grade\",\"argument2\":\"一年级\"}\n        argument2:\n          oneOf:\n            - type: string\n            - type: number\n            - type: array\n              items: {}\n            - $ref: '#/components/schemas/Expression'\n          example: {\"operator\":\"==\",\"argument1\":\"subject\",\"argument2\":\"小学数学\"}\n    OrderInfo:\n      type : object\n      example: {\"field\": \"create_time\",\"sorttype\": \"desc\"}\n      description: 排序方式，type 有desc 和asce 两种，next是下一级的排序项\n      required:\n        - sorttype\n        - field\n      properties:\n        sorttype:\n          type: string\n          enum:\n            - desc\n            - asce\n        field:\n          type: string\n          example: create_time\n        next:\n          $ref:  '#/components/schemas/OrderInfo'\n    Pagination:\n      type: object\n      description: 分页器\n      required:\n        - page\n        - size\n      properties:\n        page:\n          type: number\n          example: 1\n        size:\n          type: number\n          example : 10\n        total:\n          description: 后端返回还有多少数据的\n          type: number\n    QuerryResult:\n      type: object\n      description: 查询结果\n      required:\n        - status\n        - results\n      properties:\n        status:\n          $ref: '#/components/schemas/StatusCode'\n        results:\n          type: array\n          items:\n            $ref: '#/components/schemas/AnyValue'\n        pagination:\n          $ref:  '#/components/schemas/Pagination'\n          \n    StatusCode:\n      type: string\n      example: ok\n      enum: \n        - ok\n        - error\n        \n    StatusInfo:\n      description: 状态信息\n      type: object\n      required:\n        - problemId\n        - unionid\n        - status\n        - poolId\n        - token\n      properties:\n      # 必须的属性\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        problemId:\n          type: string\n          example : \"123456\"\n          description: 题目id\n        unionid:\n          type: string\n          example: xxxxxxxxxxx\n          description: 微信用户唯一id\n        status:\n          type: string\n          example: \"错题+已解决\"\n          description: 用户对应的问题状态信息，具体格式看上传者的定义\n        date:\n          type: number\n          example: 123456789\n          description: 状态时间戳\n          \n    ProblemIdList:\n      description: 待获取的状态查询信息列表，下面三个是and的关系\n      type: object\n      required:\n        - poolId\n        - token\n      properties:\n      # 必须的属性\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        ids:\n          description: 问题id列表\n          type: array\n          example: [\"123456\"]\n          items:\n            type: string\n        tags:\n          description: 包含的标签列表\n          type: array\n          items: \n            type: string\n          example: [\"数学\"]\n        unionids:\n          description: 用户id列表\n          type: array\n          example: [\"xxxxxxx\"]\n          items:\n            type: string\n        status:\n          description: 状态列表\n          type: array\n          example: [\"错题\"]\n          items:\n            type: string\n        startTime:\n          type: number\n          example: 123456789000\n          description: 开始时间\n        endTime:\n          type: number\n          example: 987654321000\n          description: 结束时间，左闭右开\n    StatusInfoList:\n      type: object\n      description: 查询结果\n      required:\n        - status\n        - results\n      properties:\n        status:\n          $ref: '#/components/schemas/StatusCode'\n        results:\n          type: array\n          items:\n            $ref: '#/components/schemas/StatusInfo'\n    \n    CollectionInfo:\n      type: object\n      required:\n        - title\n        - problemIds\n        - poolId\n        - token\n      properties:\n      # 必须的属性\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        title:\n          type : string\n          example: \"试卷标题\"\n        problemIds:\n          type: array\n          example: [\"123465\",\"654321\"]\n          items:\n            type: string\n        tags:\n          type: array\n          example: [\"一年级\",\"语文\"]\n          items:\n            type: string\n    CollectionIdResult:\n      type: object\n      description: 添加结果\n      required:\n        - status\n        - results\n      properties:\n        status:\n          $ref: '#/components/schemas/StatusCode'\n        results:\n          type: string\n          example: \"963258\"\n    RevokeInfo:\n      type: object\n      properties: \n        token: \n          type: string\n          format: uuid\n    GrantResult:\n      type: object\n      properties:\n        status: \n          type: string\n        token:\n          type: string\n          format: uuid\n    GrantInfo:\n      type: object\n      required:\n        - appToken\n        - grantRole\n      properties:\n        appToken:\n          type: string\n          format: uuid\n          description: 应用授权id，从管理平台获取\n        userToken:\n          type: string\n          format: uuid\n          description: 待授权的用户授权码，可本地自行生成，或者不传，服务器生成\n        grantRole:\n          type: string\n          description: 权限角色\n        expiresIn:\n          type: string\n          description: 时效，默认300s\n          example: \"300\"\n          \n    UserId:\n      type: object\n      required:\n        - poolId\n        - token\n        - unionid\n      properties:\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        unionid:\n          type: string\n          example: xxxxxxxxxxx\n          description: 微信用户唯一id\n    UserInfo:\n      type: object\n      required:\n        - unionid\n        - grade\n      properties:\n        unionid:\n          type: string\n          example: xxxxxxxxxxx\n          description: 微信用户唯一id\n        grade:\n          type: string\n          example: \"一年级\"\n        poolId:\n          type: string\n          format: uuid\n          example: 4468c74d-759e-4d78-8c43-e1c5405f193b\n          description: 题库对应的id，从管理平台获取 \n        token:\n          type: string\n          format: uuid\n          example: 06e599f3-78db-4c71-b4fa-2b496beab1f6\n          description: 验证用户权限的OAuth令牌，从管理平台申请，暂时无用\n        hasTags:\n          type: array\n          items:\n            type: string\n          example: [\"语文\",\"数学\"]",
			"canonicalURL": "/github.com/scau-tuzi/tiku@63479211c9d0d6d2a267d0572c00d7904bf68c6d/-/blob/doc/api/publicapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/scau-tuzi/tiku/blob/63479211c9d0d6d2a267d0572c00d7904bf68c6d/doc/api/publicapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "buildIR: make ir: path \"/queryCollection\": post: requestBody: contents: application/json: generate schema: save schema types: #/components/schemas/Expression: wrap field \"Argument1\" with generic type: infinite recursion: Expression.Argument1 is required"
}