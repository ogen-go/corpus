{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/Nexmo/api-specification"
		},
		"file": {
			"name": "messages.yml",
			"path": "definitions/developer/messages.yml",
			"content": "openapi: 3.0.0\ninfo:\n  title: Message Search API\n  version: 1.0.6\n  description: \u003e-\n\n    \u003cdiv class=\"Vlt-callout Vlt-callout--critical\"\u003e\n    \u003ci\u003e\u003c/i\u003e\n    \u003cdiv class=\"Vlt-callout__content\"\u003e\n      \u003ch4\u003eThe Message Search API is deprecated\u003c/h4\u003e\n      Please use the \u003ca href=\"/reports/overview\"\u003eReports API\u003c/a\u003e instead. See the \u003ca href=\"/reports/guides/migrate-from-sms-message-search\"\u003eMigrating from the SMS Message Search API guide\u003c/a\u003e to get started.\n    \u003c/div\u003e\n    \u003c/div\u003e\n\n    The Messages API lets you retrieve messages you have sent via the SMS API by\n    ID, as well as retrieve details of messages that were rejected.\n  contact:\n    name: Vonage.com\n    email: devrel@vonage.com\n    url: \"https://developer.nexmo.com/\"\n    x-twitter: Vonage\n  termsOfService: \"https://www.nexmo.com/terms-of-use\"\n  license:\n    name: The MIT License (MIT)\n    url: \"https://opensource.org/licenses/MIT\"\n  x-logo:\n    url: \"https://twitter.com/Nexmo/profile_image?size=original\"\n  x-apiClientRegistration: \"https://dashboard.nexmo.com/sign-up\"\nservers:\n  - url: \"https://rest.nexmo.com/search\"\nexternalDocs:\n  url: \"/api/developer/messages\"\n  x-sha1: d8836c374e2a7504bd2cd59e05fcee440f67cb44\nsecurity:\n  - apiKey: []\n    apiSecret: []\npaths:\n  /message:\n    get:\n      summary: Get a single message\n      description: \u003e-\n        Retrieve information about a single message that you sent using SMS API\n        or that was received on your number.\n      operationId: searchMessage\n      parameters:\n        - name: id\n          in: query\n          required: true\n          description: The ID of the message you want to retrieve.\n          example: 00A0B0C0\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: OK\n          content:\n            application/json:\n              schema:\n                oneOf:\n                  - $ref: \"#/components/schemas/messageBase\"\n                  - $ref: \"#/components/schemas/messageMT\"\n            application/xml:\n              schema:\n                oneOf:\n                  - $ref: \"#/components/schemas/messageBase\"\n                  - $ref: \"#/components/schemas/messageMT\"\n        \"400\":\n          description: Bad request\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/errorJson\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/errorXml\"\n        \"401\":\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/error\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/error\"\n  /messages:\n    get:\n      summary: Search messages\n      description: \u003e-\n        Retrieve multiple messages that you sent using the SMS API or that were received\n        on your number. You may provide one or more `ids` are specified, or both `date` and `number` \n        to identify the messages.\n      operationId: searchMessages\n      parameters:\n        - name: ids\n          in: query\n          description: A message ID to search for. You can specify up to 10 message IDs to search for as query parameters.\n          example: \"ids=123456789\u0026ids=987654321\"\n          schema:\n            type: string\n        - name: date\n          in: query\n          description: \u003e-\n            The date the request to SMS API was submitted in the following\n            format: `YYYY-MM-DD`\n          example: \"2020-01-01\"\n          schema:\n            type: string\n            format: date\n        - name: to\n          in: query\n          description: The phone number the message was sent to.\n          example: \"447700900000\"\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/messages\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/messages\"\n        \"400\":\n          description: Bad request\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/errorJson\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/errorXml\"\n        \"401\":\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/error\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/error\"\n  /rejections:\n    get:\n      summary: Search for rejections\n      description: \u003e-\n        Search for messages that have been rejected by Vonage. Messages rejected\n        by the carrier do not appear.\n      operationId: searchRejections\n      parameters:\n        - name: date\n          in: query\n          description: \u003e-\n            The date the request to SMS API was submitted in the following\n            format: `YYYY-MM-DD`\n          required: true\n          example: \"2020-01-01\"\n          schema:\n            type: string\n            format: date\n        - name: to\n          in: query\n          description: The phone number the message was sent to.\n          required: true\n          example: \"447700900000\"\n          schema:\n            type: string\n      responses:\n        \"200\":\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/rejections\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/rejections\"\n        \"400\":\n          description: Bad request\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/errorJson\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/errorXml\"\n        \"401\":\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/error\"\n            application/xml:\n              schema:\n                $ref: \"#/components/schemas/error\"\ncomponents:\n  schemas:\n    messageBase:\n      type: object\n      description: Inbound (MO)\n      required:\n        - type\n        - message-id\n        - account-id\n        - network\n        - from\n        - to\n        - body\n        - date-received\n      xml:\n        name: message\n      properties:\n        type:\n          type: string\n          description: \u003e-\n            The message type. `MT` (mobile terminated or outbound) or `MO`\n            (mobile originated or inbound)\n          example: MO\n          enum:\n            - MO\n        message-id:\n          type: string\n          description: The id of the message you sent.\n          example: 0A00000000ABCD00\n        account-id:\n          type: string\n          description: Your API Key.\n          example: API_KEY\n        date-received:\n          type: string\n          description: \u003e-\n            The date and time at UTC+0 when Platform received your request in\n            the following format: `YYYY-MM-DD HH:MM:SS`.\n          example: \"2020-01-01 12:00:00\"\n        network:\n          type: string\n          description: \u003e-\n            The [MCCMNC](https://en.wikipedia.org/wiki/Mobile_Network_Code) for\n            the carrier who delivered the message.\n          example: \"012345\"\n        from:\n          type: string\n          description: \u003e-\n            The sender ID the message was sent from. Could be a phone number or\n            name.\n          example: Vonage\n        to:\n          type: string\n          description: The phone number the message was sent to.\n          example: \"447700900000\"\n        body:\n          type: string\n          description: The body of the message.\n          example: A text message sent using the Vonage SMS API\n    messageMT:\n      description: Outbound (MT)\n      type: object\n      required:\n        - type\n        - message-id\n        - account-id\n        - network\n        - from\n        - to\n        - body\n        - date-received\n        - price\n        - final-status\n        - date-closed\n        - latency\n      xml:\n        name: message\n      properties:\n        type:\n          type: string\n          description: \u003e-\n            The message type. `MT` (mobile terminated or outbound) or `MO`\n            (mobile originated or inbound)\n          example: MT\n          enum:\n            - MT\n        message-id:\n          $ref: \"#/components/schemas/messageBase/properties/message-id\"\n        account-id:\n          $ref: \"#/components/schemas/messageBase/properties/account-id\"\n        network:\n          $ref: \"#/components/schemas/messageBase/properties/network\"\n        from:\n          $ref: \"#/components/schemas/messageBase/properties/from\"\n        to:\n          $ref: \"#/components/schemas/messageBase/properties/to\"\n        body:\n          $ref: \"#/components/schemas/messageBase/properties/body\"\n        date-received:\n          $ref: \"#/components/schemas/messageBase/properties/date-received\"\n        price:\n          type: number\n          description: Price in Euros for a MT message.\n          example: 0.0333\n        date-closed:\n          type: string\n          description: \u003e-\n            The date and time at UTC+0 when Platform received the delivery\n            receipt from the carrier who delivered the MT message. This\n            parameter is in the following format `YYYY-MM-DD HH:MM:SS`.\n          format: date-time\n          example: \"2020-01-01 12:00:00\"\n        latency:\n          type: number\n          description: \u003e-\n            The overall latency between `date-received` and `date-closed` in\n            milliseconds.\n          example: 3000\n        client-ref:\n          type: string\n          maxLength: 40\n          description: \u003e-\n            The [internal\n            reference](/api/sms#send-an-sms) you set\n            in the request.\n          example: my-personal-reference\n        status:\n          type: string\n          description: \u003e-\n            A code that explains where the message is in the delivery process.\n            If status is not `delivered` check `error-code` for more\n            information. If status is `accepted` ignore the value of\n            `error-code`.\n          enum:\n            - delivered\n            - expired\n            - failed\n            - rejected\n            - accepted\n            - buffered\n            - unknown\n          x-ms-enum:\n            name: status\n            values:\n              - value: delivered\n                description: This message has been delivered to the phone number.\n              - value: expired\n                description: \u003e-\n                  The target carrier did not send a status in the 48 hours after\n                  this message was delivered to them.\n              - value: failed\n                description: The target carrier failed to deliver this message.\n              - value: rejected\n                description: The target carrier rejected this message.\n              - value: accepted\n                description: The target carrier has accepted to send this message.\n              - value: buffered\n                description: This message is in the process of being delivered.\n              - value: unknown\n                description: The target carrier has returned an undocumented status code.\n        final-status:\n          type: string\n          description: The status of `message-id` at `date-closed`.\n          enum:\n            - DELIVRD\n            - EXPIRED\n            - UNDELIV\n            - REJECTD\n            - UNKNOWN\n          x-ms-enum:\n            name: final-status\n            values:\n              - value: DELIVRD\n                description: This message has been delivered to the phone number.\n              - value: EXPIRED\n                description: \u003e-\n                  The target carrier did not send a status in the 48 hours after\n                  this message was delivered to them.\n              - value: UNDELIV\n                description: The target carrier failed to deliver this message.\n              - value: REJECTD\n                description: The target carrier rejected this message.\n              - value: UNKNOWN\n                description: The target carrier has returned an undocumented status code.\n          example: DELIVRD\n        error-code:\n          $ref: \"#/components/schemas/error-code\"\n        error-code-label:\n          $ref: \"#/components/schemas/error-code-label\"\n    messages:\n      type: object\n      properties:\n        count:\n          type: integer\n          description: The number of messages included in the response.\n        items:\n          type: array\n          description: The messages in the response.\n          xml:\n            wrapped: true\n          items:\n            type: object\n            xml:\n              name: message\n            oneOf:\n              - $ref: \"#/components/schemas/messageBase\"\n              - $ref: \"#/components/schemas/messageMT\"\n    rejections:\n      type: object\n      properties:\n        count:\n          type: integer\n          description: The number of messages included in the response.\n        items:\n          type: array\n          xml:\n            wrapped: true\n          items:\n            type: object\n            properties:\n              account-id:\n                $ref: \"#/components/schemas/messageBase/properties/account-id\"\n              from:\n                $ref: \"#/components/schemas/messageBase/properties/from\"\n              to:\n                $ref: \"#/components/schemas/messageBase/properties/to\"\n              date-received:\n                $ref: \"#/components/schemas/messageBase/properties/date-received\"\n              error-code:\n                $ref: \"#/components/schemas/error-code\"\n              error-code-label:\n                $ref: \"#/components/schemas/error-code-label\"\n            xml:\n              name: rejection\n            required:\n              - account-id\n              - from\n              - to\n              - date-received\n              - error-code\n              - error-code-label\n    error-code:\n      type: string\n      description: Will be set if the `status` is not `accepted`.\n      example: \"0\"\n      enum:\n        - \"0\"\n        - \"1\"\n        - \"2\"\n        - \"3\"\n        - \"4\"\n        - \"5\"\n        - \"6\"\n        - \"7\"\n        - \"8\"\n        - \"9\"\n        - \"10\"\n        - \"11\"\n        - \"12\"\n        - \"13\"\n        - \"14\"\n        - \"15\"\n        - \"99\"\n        - \"400\"\n        - \"401\"\n      x-ms-enum:\n        name: error-code\n        values:\n          - value: \"0\"\n            description: Delivered.\n          - value: \"1\"\n            description: \u003e-\n              Unknown - either; An unknown error was received from the carrier\n              who tried to send this this message. _or_ Depending on the\n              carrier, that `to` is unknown. When you see this error, and\n              `status` is rejected, always check if `to` in your request was\n              valid.\n          - value: \"2\"\n            description: \u003e-\n              Absent Subscriber Temporary - this message was not delivered\n              because `to` was temporarily unavailable. For example, the handset\n              used for `to` was out of coverage or switched off. This is a\n              temporary failure, retry later for a positive result.\n          - value: \"3\"\n            description: \u003e-\n              Absent Subscriber Permanent - `to` is no longer active, you should\n              remove this phone number from your database.\n          - value: \"4\"\n            description: \u003e-\n              Call barred by user - you should remove this phone number from\n              your database. If the user wants to receive messages from you,\n              they need to contact their carrier directly.\n          - value: \"5\"\n            description: \u003e-\n              Portability Error - there is an issue after the user has changed\n              carrier for `to` If the user wants to receive messages from you,\n              they need to contact their carrier directly.\n          - value: \"6\"\n            description: \u003e-\n              Anti-Spam Rejection - carriers often apply restrictions that block\n              messages following different criteria. For example, on SenderID or\n              message content.\n          - value: \"7\"\n            description: \u003e-\n              Handset Busy - the handset associated with `to` was not available\n              when this message was sent. If `status` is `Failed` this is a\n              temporary failure; retry later for a positive result. If `status`\n              is `Accepted` this message has is in the retry scheme and will be\n              resent until it expires in 24-48 hours.\n          - value: \"8\"\n            description: \u003e-\n              Network Error - a network failure while sending your message. This\n              is a temporary failure, retry later for a positive result.\n          - value: \"9\"\n            description: \u003e-\n              Illegal Number - you tried to send a message to a blacklisted\n              phone number. That is, the user has already sent a STOP opt-out\n              message and no longer wishes to receive messages from you.\n          - value: \"10\"\n            description: \u003e-\n              Invalid Message - the message could not be sent because one of the\n              parameters in the message was incorrect. For example, incorrect\n              `type` or `udh`\n          - value: \"11\"\n            description: \u003e-\n              Unroutable - the chosen route to send your message is not\n              available. This is because the phone number is either; Currently\n              on an unsupported _or_ network. On a pre-paid or reseller account\n              that could not receive a message sent by `from` To resolve this\n              issue either email us at\n              [support@nexmo.com](mailto:support@nexmo.com) or create a helpdesk\n              ticket at [https://help.nexmo.com](https://help.nexmo.com).\n          - value: \"12\"\n            description: \u003e-\n              Destination unreachable - the message could not be delivered to\n              the phone number.\n          - value: \"13\"\n            description: \u003e-\n              Subscriber Age Restriction - the carrier blocked this message\n              because the content is not suitable for `to` based on age\n              restrictions.\n          - value: \"14\"\n            description: \u003e-\n              Number Blocked by Carrier - the carrier blocked this message. This\n              could be due to several reasons. For example, `to` s plan does not\n              include SMS or the account is suspended.\n          - value: \"15\"\n            description: \u003e-\n              Pre-Paid - Insufficent funds - `to`’s pre-paid account does not\n              have enough credit to receive the message.\n          - value: \"99\"\n            description: \u003e-\n              General Error - there is a problem with the chosen route to send\n              your message. To resolve this issue either email us at\n              [support@nexmo.com](mailto:support@nexmo.com) or create a helpdesk\n              ticket at [https://help.nexmo.com](https://help.nexmo.com).\n          - value: \"400\"\n            description: wrong parameters\n          - value: \"401\"\n            description: authentication failed\n    error-code-label:\n      type: string\n      description: A text label to explain `error-code`.\n      example: Delivered\n    error:\n      type: object\n      properties:\n        error-code:\n          $ref: \"#/components/schemas/error-code\"\n        error-code-label:\n          $ref: \"#/components/schemas/error-code-label\"\n    errorJson:\n      type: object\n      properties:\n        type:\n          type: string\n          example: BAD_REQUEST\n        error_title:\n          type: string\n          example: Bad Request\n        invalid_parameters:\n          type: object\n          additionalProperties:\n            type: string\n            example: Is required.\n    errorXml:\n      type: object\n      xml:\n        name: error\n      properties:\n        type:\n          type: string\n          example: BAD_REQUEST\n        error_title:\n          type: string\n          example: Bad Request\n        invalid_parameters:\n          type: array\n          items:\n            type: object\n            xml:\n              name: entry\n            properties:\n              key:\n                type: string\n                example: date\n              value:\n                type: string\n                example: Is required.\n  securitySchemes:\n    apiKey:\n      type: apiKey\n      name: api_key\n      in: query\n      description: \u003e-\n        You can find your API key in your [account\n        overview](https://dashboard.nexmo.com/account-overview)\n    apiSecret:\n      type: apiKey\n      name: api_secret\n      in: query\n      description: \u003e-\n        You can find your API secret in your [account\n        overview](https://dashboard.nexmo.com/account-overview)\n"
		}
	},
	"Error": "parse: paths: /message: get: operation \"searchMessage\": responses: 200: content: \"application/json\": schema: parse schema: oneOf: [1]: parse schema: reference \"#/components/schemas/messageMT\": parse schema: account-id: parse schema: reference \"#/components/schemas/messageBase/properties/account-id\": resolve reference \"#/components/schemas/messageBase/properties/account-id\": schema not found"
}