{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/ngageoint/scale"
		},
		"file": {
			"name": "batch.yml",
			"size": 0,
			"path": "scale/docs/rest/v6/batch.yml",
			"byteSize": 29445,
			"content": "openapi: \"3.0.0\"\ninfo:\n  title: Batch Services\n  version: v6\npaths:\n  /batches/:\n    get:\n      operationId: _rest_v6_batch_list\n      summary: Batch List\n      description: Returns a list of all batches\n      parameters:\n        - in: query\n          name: page\n          schema:\n            type: integer\n          description: The page of the results to return. Defaults to 1.\n        - in: query\n          name: page_size\n          schema:\n            type: integer\n          description: The size of the page to use for pagination of results. |\n            Defaults to 100, and can be anywhere from 1-1000.\n        - in: query\n          name: started\n          schema:\n            type: string\n            format: date-time\n          description: The start of the time range to query\n        - in: query\n          name: ended\n          schema:\n            type: string\n            format: date-time\n          description: End of the time range to query, defaults to the current time\n        - in: query\n          name: recipe_type_id\n          schema:\n            type: integer\n          description: Return only batches with a given recipe type identifier. |\n            Duplicate it to filter by multiple values.\n        - in: query\n          name: is_creation_done\n          schema:\n            type: boolean\n          description: Return only batches that match this value, indicating if the batch |\n            has/has not finished creating its recipes\n        - in: query\n          name: is_superseded\n          schema:\n            type: boolean\n          description: Return only batches that match this value, indicating if the batch |\n              has/has not been superseded\n        - in: query\n          name: root_batch_id\n          schema:\n            type: integer\n          description: Return only batches that belong to the chain with this root batch. |\n            Duplicate it to filter by multiple values.\n        - in: query\n          name: order\n          schema:\n            type: string\n          description: One or more fields to use when ordering the results. |\n                       Duplicate it to multi-sort, (ex: order=host_name\u0026order=created) |\n                       Prefix fields with a dash to reverse the sort, (ex: order=-created)\n      responses:\n        '200':\n          description: 200 response\n          content:\n            application/json: \n              schema:\n                $ref: '#/components/schemas/batch_list'\n    post:\n      operationId: _rest_v6_batch_create\n      summary: Batch Create\n      description: Creates a batch\n      requestBody:\n        required: true\n        content:\n          application/json: \n            schema:\n              $ref: '#/components/schemas/batch_post'\n      responses:\n        '201':\n          description: The 201 CREATED response indicates a successful event\n          headers:\n            location:\n              schema:\n                type: string\n              description: The url of the created batch\n          content:\n            application/json: \n              schema:\n                $ref: '#/components/schemas/batch_detail'\n                \n  /batches/{id}/:\n    get:\n      operationId: _rest_v6_batch_details\n      summary: Batch Details\n      description: Returns detailed information about the batch with the specified id\n      parameters:\n        - in: path\n          name: id\n          schema:\n            type: integer\n          description: id of an existing batch\n      responses:\n        '200':\n          description: 200 response\n          content:\n            application/json: \n              schema:\n                $ref: '#/components/schemas/batch_detail'\n    patch:\n      operationId: _rest_v6_batch_update\n      summary: Batch Update\n      description: Update one or more fields in an existing batch\n      requestBody:\n        required: true\n        content:\n          application/json: \n            schema:\n              $ref: '#/components/schemas/batch_update'\n      parameters:\n        - in: path\n          name: id\n          schema:\n            type: integer\n          description: id of an existing batch\n      responses:\n        '204':\n          description: 204 no content\n\n  /batches/comparison/{id}/:\n    get:\n      operationId: _rest_v6_batch_details\n      summary: Batch Comparison\n      description: Returns the list of batches with the given root batch ID along with their metrics\n      parameters:\n        - in: path\n          name: id\n          schema:\n            type: integer\n          description: root batch ID of a chain of batches\n      responses:\n        '200':\n          description: 200 response\n          content:\n            application/json: \n              schema:\n                $ref: '#/components/schemas/batch_comparison'\n\n  /batches/validation/:\n    post:\n      operationId: _rest_v6_batch_validation\n      summary: Batch Validation\n      description: Validates a batch without creating/editing it\n      requestBody:\n        required: true\n        content:\n          application/json: \n            schema:\n              $ref: '#/components/schemas/batch_validation_post'\n      responses:\n        '200':\n          description: The 200 OK response indicates a successful event\n          content:\n            application/json: \n              schema:\n                $ref: '#/components/schemas/batch_validation'\ncomponents:\n  schemas:\n    batch_list:\n      title: Batch List\n      type: object\n      properties:\n        count:\n          type: integer\n          description: The total number of results that match the query parameters \n          example: 10\n        next:\n          type: string\n          format: uri\n          description: A URL to the next page of results.\n          example: null\n        previous:\n          type: string\n          format: uri\n          description: A URL to the previous page of results.\n          example: null\n        results:\n          type: array\n          items:\n            $ref: '#/components/schemas/batch'\n          description: List of Batch objects\n\n    batch_base:\n      title: Batch Base\n      type: object\n      properties:\n        id:\n          type: integer\n          example: 1\n        title:\n          type: string\n          example: My Batch\n        description:\n          type: string\n          example: My Batch Description \n        created:\n          type: string\n          format: date-time\n          description: When the associated database model was initially created.\n          example: 2015-09-10T15:24:53.503Z\n\n    batch:\n      title: Batch\n      allOf:\n        - ref: '#/components/schemas/batch_base'\n        - type: object\n          properties:\n            recipe_type:\n              $ref: '#/components/schemas/recipe_type_base'\n              description: The recipe type that is associated with the batch  \n            recipe_type_rev:\n              $ref: '#/components/schemas/recipe_type_revision_base'\n              description: The recipe type revision that is associated with the batch  \n            event:\n              $ref: '#/components/schemas/event_base'\n              description: The trigger event that is associated with the batch  \n            is_superseded:\n              type: boolean\n              description: Whether this batch has been replaced and is now obsolete.\n            root_batch:\n              $ref: '#/components/schemas/batch_base'\n              description: The root batch for the chain that contains this batch, possibly null\n            superseded_batch:\n              $ref: '#/components/schemas/batch_base'\n              description: The previous batch in the chain superseded by this batch, possibly null\n            jobs_total:\n              type: integer\n              description: The total count of jobs within this batch's recipes\n              example: 1\n            jobs_pending:\n              type: integer\n              description: The count of PENDING jobs within this batch's recipes\n              example: 1\n            jobs_blocked:\n              type: integer\n              description: The count of BLOCKED jobs within this batch's recipes\n              example: 1\n            jobs_queued:\n              type: integer\n              description: The count of QUEUED jobs within this batch's recipes\n              example: 1\n            jobs_running:\n              type: integer\n              description: The count of RUNNING jobs within this batch's recipes\n              example: 1\n            jobs_failed:\n              type: integer\n              description: The count of FAILED jobs within this batch's recipes\n              example: 1\n            jobs_completed:\n              type: integer\n              description: The count of COMPLETED jobs within this batch's recipes\n              example: 1\n            jobs_canceled:\n              type: integer\n              description: The count of CANCELED jobs within this batch's recipes\n              example: 1\n            recipes_estimated:\n              type: integer\n              description: The estimated count of recipes (including sub-recipes) that will be created |\n                for this batch\n              example: 1\n            recipes_total:\n              type: integer\n              description: The total count of recipes (including sub-recipes) within this batch\n              example: 1\n            recipes_completed:\n              type: integer\n              description: The count of completed recipes (including sub-recipes) within this batch \n              example: 1\n            superseded:\n              type: string\n              format: date-time\n              description: When the the batch became superseded by another batch.\n              example: 2015-09-10T15:24:53.987Z\n            last_modified:\n              type: string\n              format: date-time\n              description: When the associated database model was last saved.\n              example: 2015-09-10T15:24:53.987Z\n\n    batch_details:\n      title: Batch Details\n      allOf:\n        - ref: '#/components/schemas/batch'\n        - type: object\n          properties:\n            recipe_type_rev:\n              $ref: '#/components/schemas/recipe_type_revision'\n              description: The recipe type revision that is associated with the batch  \n            event:\n              $ref: '#/components/schemas/event_details'\n              description: The trigger event that is associated with the batch  \n            definition:\n              $ref: '#/components/schemas/batch_definition'\n              description: The definition of the batch    \n            configuration:\n              $ref: '#/components/schemas/batch_config'\n              description: The configuration of the batch           \n            job_metrics:\n              type: object\n              additionalProperties:\n                $ref: '#/components/schemas/job_metrics'\n              description: The metrics for each top level recipe job (not in a sub-recipe) in the batch. |\n                Each recipe job name maps to the metrics for that job. The job count metrics |\n                (e.g. jobs_total) are similar to the top level batch metrics. The duration |\n                metrics (e.g. min_seed_duration) detail the minimum, average, and maximum |\n                durations for completing the Seed run and completing the overall Scale job. |\n                The durations are provided in the ISO-8601 duration format.\n\n    batch_definition:\n      title: Batch Definition\n      type: object\n      properties:\n        supersedes:\n          type: boolean\n          description: Indicates if the recipes created by the batch should be supserseded |\n            or if they should be treated as new recipes.\n        dataset: \n          type: integer\n          description: Id of the dataset to create the batch from\n        forced_nodes:\n          $ref: '#/components/schemas/forced_nodes'\n          description:  A forced nodes JSON object that defines the batch recipe nodes to |\n            force to re-process even if there are no changes to them.\n        previous_batch:\n          $ref: '#/components/schemas/previous_batch_definition'\n          description: Indicates that the batch should re-process the recipes from a |\n            previous batch. This will link the previous and new batch together |\n            so that their metrics can be easily compared. The previous batch |\n            must have the same recipe type as the new batch and must have |\n            finished creating all of its recipes.\n\n    previous_batch_definition:\n      title: Batch Definition\n      type: object\n      required: [root_batch_id]\n      properties:\n        root_batch_id:\n          type: integer\n          description: The root batch ID of the previous batch. Scale will find the last |\n            (non-superseded) batch with this root ID and it will be reprocessed by this batch.\n          example: 4\n        forced_nodes:\n          $ref: '#/components/schemas/forced_nodes'\n          description:  A forced nodes JSON object that defines the batch recipe nodes to |\n            force to re-process even if there are no changes to them.\n      \n    forced_nodes:\n      title: Forced Nodes Definition\n      type: object\n      required: [all]\n      properties:\n        all:\n          type: boolean\n          description: If true, then all nodes within the recipe should be forced to |\n            re-process and the 'nodes' and 'sub_recipes' fields should be omitted. |\n            If false, then the 'nodes' array is used to indicate which nodes should be forced to re-process.\n          example: false\n        nodes:\n          type: array\n          items:\n            type: string\n          description:  names of the recipe nodes that should be forced to reprocess\n        sub_recipes:\n          type: object\n          additionalProperties:\n            $ref: '#/components/schemas/forced_nodes'\n          description: Key/value pairs of sub-recipe node names and forced node |\n            objects that recursively define the nodes with the sub-recipe to |\n            force to reprocess.\n\n    input_map:\n      title: Input Map Definition\n      type: object\n      required: [all]\n      properties:\n        input:\n          type: string\n          description: The recipe type input the dataset parameter should map to\n          example: INPUT_FILE\n        datasetParameter:\n          type: string\n          description: The dataset parameter name the input maps to\n          example: FILE_INPUT\n\n    batch_config:\n      title: Batch Configuration\n      type: object\n      properties:\n        priority:\n          type: integer\n          description: Sets a new priority to use for all jobs within the batch\n        inputMap:\n          type: array\n          description: Maps the recipe inputs to the proper dataset parameters\n          items:\n            type: object\n            additionalProperties:\n               $ref: '#/components/schemas/input_map'\n\n    job_metrics:\n      title: Job Metrics\n      type: object\n      properties:\n        jobs_total:\n          type: integer\n          description: The total count of jobs within this top level recipe\n          example: 1\n        jobs_pending:\n          type: integer\n          description: The count of PENDING jobs within this top level recipe\n          example: 1\n        jobs_blocked:\n          type: integer\n          description: The count of BLOCKED jobs within this top level recipe\n          example: 1\n        jobs_queued:\n          type: integer\n          description: The count of QUEUED jobs within this top level recipe\n          example: 1\n        jobs_running:\n          type: integer\n          description: The count of RUNNING jobs within this top level recipe\n          example: 1\n        jobs_failed:\n          type: integer\n          description: The count of FAILED jobs within this top level recipe\n          example: 1\n        jobs_completed:\n          type: integer\n          description: The count of COMPLETED jobs within this top level recipe\n          example: 1\n        jobs_canceled:\n          type: integer\n          description: The count of CANCELED jobs within this top level recipe\n          example: 1\n        min_seed_duration:\n          type: string\n          description: Minimum seed run duration within this top level recipe\n          example: PT10M12S\n        avg_seed_duration:\n          type: string\n          description: Average seed run duration within this top level recipe\n          example: PT15M12S\n        max_seed_duration:\n          type: string\n          description: Maximum seed run duration within this top level recipe\n          example: PT9M2S\n        min_job_duration:\n          type: string\n          description: Minimum overall scale job run duration within this top level recipe\n          example: PT9M2S\n        avg_job_duration:\n          type: string\n          description: Average overall scale job run duration within this top level recipe\n          example: PT10M12S\n        max_job_duration:\n          type: string\n          description: Maximum overall scale job run duration within this top level recipe\n          example: PT16M12S\n\n    job_metrics_array:\n      title: Job Metrics Array\n      type: object\n      properties:\n        jobs_total:\n          type: array\n          items:\n            type: integer\n          description: The total count of jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_pending:\n          type: array\n          items:\n            type: integer\n          description: The count of PENDING jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_blocked:\n          type: array\n          items:\n            type: integer\n          description: The count of BLOCKED jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_queued:\n          type: array\n          items:\n            type: integer\n          description: The count of QUEUED jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_running:\n          type: array\n          items:\n            type: integer\n          description: The count of RUNNING jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_failed:\n          type: array\n          items:\n            type: integer\n          description: The count of FAILED jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_completed:\n          type: array\n          items:\n            type: integer\n          description: The count of COMPLETED jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_canceled:\n          type: array\n          items:\n            type: integer\n          description: The count of CANCELED jobs within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        min_seed_duration:\n          type: array\n          items:\n            type: string\n          description: Minimum seed run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT9M12S\", \"PT8M12S\"]\n        avg_seed_duration:\n          type: array\n          items:\n            type: string\n          description: Average seed run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT10M12S\", \"PT10M12S\"]\n        max_seed_duration:\n          type: array\n          items:\n            type: string\n          description: Maximum seed run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT15M12S\", \"PT14M12S\"]\n        min_job_duration:\n          type: array\n          items:\n            type: string\n          description: Minimum overall scale job run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT1M12S\", \"PT2M12S\"]\n        avg_job_duration:\n          type: array\n          items:\n            type: string\n          description: Average overall scale job run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT10M12S\", \"PT10M12S\"]\n        max_job_duration:\n          type: array\n          items:\n            type: string\n          description: Maximum overall scale job run duration within this top level recipe for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [\"PT15M12S\", \"PT14M12S\"]\n          \n    batch_metrics_array:\n      title: Batch Metrics Array\n      type: object\n      properties:\n        jobs_total:\n          type: array\n          items:\n            type: integer\n          description: The total count of jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_pending:\n          type: array\n          items:\n            type: integer\n          description: The count of PENDING jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_blocked:\n          type: array\n          items:\n            type: integer\n          description: The count of BLOCKED jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_queued:\n          type: array\n          items:\n            type: integer\n          description: The count of QUEUED jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_running:\n          type: array\n          items:\n            type: integer\n          description: The count of RUNNING jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_failed:\n          type: array\n          items:\n            type: integer\n          description: The count of FAILED jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_completed:\n          type: array\n          items:\n            type: integer\n          description: The count of COMPLETED jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        jobs_canceled:\n          type: array\n          items:\n            type: integer\n          description: The count of CANCELED jobs within the top level recipes for each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        recipes_estimated:\n          type: array\n          items:\n            type: integer\n          description: The estimated count of recipes (including sub-recipes) that will be created |\n            for each batch. The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        recipes_total:\n          type: array\n          items:\n            type: integer\n          description: The total count of recipes (including sub-recipes) within each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        recipes_completed:\n          type: array\n          items:\n            type: integer\n          description: The count of completed recipes (including sub-recipes) within each batch |\n            The order of the values in each array corresponds to the order of batches in the batches array\n          example: [1,2]\n        job_metrics:\n          type: object\n          additionalProperties:\n            $ref: '#/components/schemas/job_metrics_array'\n            \n    batch_post:\n      title: Batch Post\n      type: object\n      required: [recipe_type_id, definition]\n      properties:\n        title:\n          type: string\n          example: My Batch\n        description:\n          type: string\n          example: My Batch Description \n        recipe_type_id:\n          type: integer\n          description: The ID of the recipe type for this batch's recipes\n          example: 11\n        definition:\n          $ref: '#/components/schemas/batch_definition'\n          description: definition for processing the batch\n        configuration:\n          $ref: '#/components/schemas/batch_config'\n          description: configuration for processing the batch\n\n    batch_update:\n      title: Batch Update\n      type: object\n      properties:\n        title:\n          type: string\n          example: My Batch\n        description:\n          type: string\n          example: My Batch Description \n        configuration:\n          $ref: '#/components/schemas/batch_config'\n          description: configuration for processing the batch\n\n    batch_comparison:\n      title: Batch Comparison\n      type: object\n      properties:\n        batches:\n          type: array\n          items:\n            $ref: '#/components/schemas/batch_base'\n        metrics:\n          type: object\n          properties:\n            metrics:\n              $ref: '#/components/schemas/job_metrics_array'\n              description: Contains the top-level and per job metrics fields for each batch in the |\n                chain. This is similar to the metrics in a batch details response, except |\n                that instead of each metric containing a single value, each metric here holds |\n                an array of values. The order of the values in each array corresponds to the |\n                order of the batches in the *batches* array.\n\n    batch_validation_post:\n      title: Batch Validation Post\n      type: object\n      required: [recipe_type_id, definition]\n      properties:\n        recipe_type_id:\n          type: integer\n          description: The ID of the recipe type for this batch's recipes\n          example: 11\n        definition:\n          $ref: '#/components/schemas/batch_definition'\n          description: definition for processing the batch\n        configuration:\n          $ref: '#/components/schemas/batch_config'\n          description: configuration for processing the batch\n      \n    batch_validation:\n      title: Batch Validation\n      type: object\n      properties:\n        is_valid:\n          type: boolean\n          description: The batch is valid\n          example: true\n        validation_error:\n          type: array\n          items:\n            $ref: '#/components/schemas/validation_error'\n        validation_warning:\n          type: array\n          items:\n            $ref: '#/components/schemas/validation_warning'\n        recipes_estimated:\n          type: integer\n          description: The estimated number of recipes that would be created by this batch\n          example: 11\n        recipe_type:\n          $ref: '#/components/schemas/recipe_type_base'\n          description: The recipe type that is associated with the batch\n        prev_batch:\n          type: object\n          description: Object containing information about the previous batch |\n            (will be omitted if there is no previous batch)\n          properties:\n            recipe_type_rev:\n              $ref: '#/components/schemas/recipe_type_revision_base'\n              description: The recipe type revision of the previous batch\n            diff:\n              $ref: '#/components/schemas/recipe_type_diff'\n              description: The recipe graph diff between the batch's recipe type |\n                revision and the previous batch's recipe type revision. The diff |\n                explains which recipe jobs will be reprocessed by the new batch."
		}
	},
	"Error": "invalidYAML: yaml: line 64: mapping values are not allowed in this context"
}