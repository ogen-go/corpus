{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/SocialGouv/kontinuous"
		},
		"file": {
			"name": "api.v1.spec.yaml",
			"size": 0,
			"path": "packages/webhook/tests/__snapshots__/api.v1.spec.yaml",
			"byteSize": 25779,
			"content": "// Jest Snapshot v1, https://goo.gl/fbAQLP\n\nexports[`kontinuous webhook service expose open-api spec 1`] = `\n\"components:\n  parameters: {}\n  schemas:\n    error:\n      type: object\n      additionalProperties: true\n      properties:\n        message:\n          type: string\n        code:\n          type: integer\n    httpError:\n      type: object\n      additionalProperties: true\n      properties:\n        message:\n          type: string\n        code:\n          type: integer\n          minimum: 400\n          maximum: 599\n    textStream:\n      type: string\n      description: A stream of text\n  securitySchemes:\n    bearerAuth:\n      type: http\n      scheme: bearer\n    commitToken:\n      type: apiKey\n      in: query\n      name: token\n    giteaHmac:\n      type: apiKey\n      in: header\n      name: X-Gitea-Signature\n    githubHmac:\n      type: apiKey\n      in: header\n      name: X-Hub-Signature-256\n    gitlabToken:\n      type: apiKey\n      in: header\n      name: X-Gitlab-Token\n    token:\n      type: apiKey\n      in: query\n      name: token\nopenapi: 3.0.3\ninfo:\n  title: Kontinuous Webhook API ðŸš€\n  version: 0.0.0\n  description: Run workflow in kube from webhook call\n  license:\n    name: MIT\n    url: https://opensource.org/licenses/MIT\nservers:\n  - url: http://0.0.0.0:3000/api/v1/oas\npaths:\n  /artifacts/download:\n    get:\n      security:\n        - bearerAuth:\n            - artifacts\n        - token:\n            - artifacts\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: repository\n          schema:\n            type: string\n            example: socialgouv/sample-next-app\n          required: true\n        - in: query\n          name: branch\n          schema:\n            type: string\n            example: feat/space-flight\n          required: true\n        - in: query\n          name: commit\n          schema:\n            type: string\n            example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n            format: sha1\n          required: true\n        - in: query\n          name: name\n          schema:\n            type: string\n            minLength: 1\n            example: manifests\n            default: manifests\n          required: false\n      responses:\n        '200':\n          content:\n            text/x-yaml:\n              schema:\n                type: string\n                format: binary\n          description: 'Default description: Success results getOneArtifactsDownload'\n      operationId: getOneArtifactsDownload\n      description: 'Default description: Query: getOneArtifactsDownload'\n      summary: getOneArtifactsDownload\n    parameters: []\n    description: /artifacts/download\n  /artifacts/status:\n    get:\n      security:\n        - bearerAuth:\n            - status\n        - token:\n            - status\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: repository\n          schema:\n            type: string\n            example: socialgouv/sample-next-app\n          required: true\n        - in: query\n          name: branch\n          schema:\n            type: string\n            example: feat/space-flight\n          required: true\n        - in: query\n          name: commit\n          schema:\n            type: string\n            example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n            format: sha1\n          required: true\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  status:\n                    type: string\n                    enum:\n                      - loading\n                      - success\n                      - failed\n                  ok:\n                    type: boolean\n                    nullable: true\n          description: 'Default description: Success results getOneArtifactsStatus'\n        '404':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 404 for getOneArtifactsStatus'\n      operationId: getOneArtifactsStatus\n      description: 'Default description: Query: getOneArtifactsStatus'\n      summary: getOneArtifactsStatus\n    post:\n      security:\n        - bearerAuth:\n            - status\n        - token:\n            - status\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: repository\n          schema:\n            type: string\n            example: socialgouv/sample-next-app\n          required: true\n        - in: query\n          name: branch\n          schema:\n            type: string\n            example: feat/space-flight\n          required: true\n        - in: query\n          name: commit\n          schema:\n            type: string\n            example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n            format: sha1\n          required: true\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - status\n              properties:\n                status:\n                  type: string\n                  enum:\n                    - loading\n                    - success\n                    - failed\n                ok:\n                  type: boolean\n                  nullable: true\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: Success results addOneArtifactsStatus'\n      operationId: addOneArtifactsStatus\n      description: 'Default description: Insert mutation: addOneArtifactsStatus'\n      summary: addOneArtifactsStatus\n    parameters: []\n    description: /artifacts/status\n  /artifacts/upload:\n    post:\n      security:\n        - bearerAuth:\n            - artifacts\n        - token:\n            - artifacts\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: repository\n          schema:\n            type: string\n            example: socialgouv/sample-next-app\n          required: true\n        - in: query\n          name: branch\n          schema:\n            type: string\n            example: feat/space-flight\n          required: true\n        - in: query\n          name: commit\n          schema:\n            type: string\n            example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n            format: sha1\n          required: true\n        - in: query\n          name: name\n          schema:\n            type: string\n            minLength: 1\n            example: manifests\n            default: manifests\n          required: false\n      requestBody:\n        required: true\n        content:\n          multipart/form-data:\n            schema:\n              type: object\n              properties:\n                manifests:\n                  type: string\n                  format: binary\n              required:\n                - manifests\n            encoding:\n              manifests:\n                contentType: text/x-yaml, text/yaml, application/x-yaml, application/yaml\n      responses:\n        '201':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 201 for addOneArtifactsUpload'\n      operationId: addOneArtifactsUpload\n      description: 'Default description: Insert mutation: addOneArtifactsUpload'\n      summary: addOneArtifactsUpload\n    parameters: []\n    description: /artifacts/upload\n  /hooks/custom:\n    post:\n      security:\n        - bearerAuth:\n            - webhook\n        - token:\n            - webhook\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: env\n          schema:\n            type: string\n            enum:\n              - dev\n              - preprod\n              - prod\n          allowEmptyValue: true\n        - in: query\n          name: cluster\n          schema:\n            type: string\n            format: clusterName\n        - in: query\n          name: hash\n          schema:\n            type: string\n            format: md5\n          required: true\n        - in: query\n          name: repositoryUrl\n          schema:\n            type: string\n            example: https://github.com/socialgouv/template.git\n          required: false\n        - in: query\n          name: kontinuousVersion\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: serviceAccountName\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: mountKubeconfig\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: mountSecrets\n          required: false\n          schema:\n            oneOf:\n              - type: array\n                items:\n                  type: string\n              - type: string\n      requestBody:\n        required: true\n        content:\n          multipart/form-data:\n            schema:\n              type: object\n              properties:\n                manifests:\n                  type: string\n                  format: binary\n                deployConfig:\n                  type: string\n              required:\n                - manifests\n            encoding:\n              manifests:\n                contentType: text/x-yaml, text/yaml, application/x-yaml, application/yaml\n      responses:\n        '202':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 202 for addOneHooksCustom'\n        '204':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 204 for addOneHooksCustom'\n      operationId: addOneHooksCustom\n      description: 'Default description: Insert mutation: addOneHooksCustom'\n      summary: addOneHooksCustom\n    parameters: []\n    description: /hooks/custom\n  /hooks/github:\n    post:\n      security:\n        - githubHmac:\n            - webhook\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: event\n          schema:\n            type: string\n            enum:\n              - pushed\n              - deleted\n              - custom\n              - created\n          required: true\n        - in: query\n          name: chart\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: ignoreProjectTemplates\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: kontinuousVersion\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: serviceAccountName\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: mountKubeconfig\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: mountSecrets\n          required: false\n          schema:\n            oneOf:\n              - type: array\n                items:\n                  type: string\n              - type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - ref\n              properties:\n                ref:\n                  type: string\n                  example: feat/space-flight\n                after:\n                  type: string\n                  example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n                  format: sha1\n                created:\n                  type: boolean\n                repository:\n                  type: object\n                  properties:\n                    default_branch:\n                      type: string\n                    clone_url:\n                      type: string\n                commits:\n                  type: array\n                  items:\n                    type: object\n                    properties:\n                      added:\n                        type: array\n                        items:\n                          type: string\n                      modified:\n                        type: array\n                        items:\n                          type: string\n                      removed:\n                        type: array\n                        items:\n                          type: string\n                project:\n                  type: object\n                  required:\n                    - clone_url\n                  properties:\n                    clone_url:\n                      type: string\n                      example: https://github.com/socialgouv/sample-next-app.git\n      responses:\n        '202':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 202 for addOneHooksGithub'\n        '204':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 204 for addOneHooksGithub'\n      operationId: addOneHooksGithub\n      description: 'Default description: Insert mutation: addOneHooksGithub'\n      summary: addOneHooksGithub\n    parameters: []\n    description: /hooks/github\n  /hooks/gitlab:\n    post:\n      security:\n        - gitlabHmac:\n            - webhook\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: chart\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: ignoreProjectTemplates\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: kontinuousVersion\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: serviceAccountName\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: mountKubeconfig\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: mountSecrets\n          required: false\n          schema:\n            oneOf:\n              - type: array\n                items:\n                  type: string\n              - type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                ref:\n                  type: string\n                  example: feat/space-flight\n                after:\n                  type: string\n                  example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n                  format: sha1\n                commits:\n                  type: array\n                  items:\n                    type: object\n                    properties:\n                      added:\n                        type: array\n                        items:\n                          type: string\n                      modified:\n                        type: array\n                        items:\n                          type: string\n                      removed:\n                        type: array\n                        items:\n                          type: string\n                repository:\n                  type: object\n                  required:\n                    - git_http_url\n                  properties:\n                    git_http_url:\n                      type: string\n                      example: http://example.com/gitlabhq/gitlab-test.git\n      responses:\n        '202':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 202 for addOneHooksGitlab'\n        '204':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 204 for addOneHooksGitlab'\n      operationId: addOneHooksGitlab\n      description: 'Default description: Insert mutation: addOneHooksGitlab'\n      summary: addOneHooksGitlab\n    parameters: []\n    description: /hooks/gitlab\n  /hooks/user:\n    post:\n      security:\n        - bearerAuth:\n            - webhook\n        - token:\n            - webhook\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: event\n          schema:\n            type: string\n            enum:\n              - pushed\n              - deleted\n              - custom\n          required: true\n        - in: query\n          name: ignoreProjectTemplates\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: chart\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: env\n          schema:\n            type: string\n            enum:\n              - dev\n              - preprod\n              - prod\n          allowEmptyValue: true\n        - in: query\n          name: kontinuousVersion\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: serviceAccountName\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: mountKubeconfig\n          schema:\n            type: boolean\n          required: false\n        - in: query\n          name: mountSecrets\n          required: false\n          schema:\n            oneOf:\n              - type: array\n                items:\n                  type: string\n              - type: string\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                ref:\n                  type: string\n                  example: test-ci\n                repositoryUrl:\n                  type: string\n                  example: https://github.com/socialgouv/sample-next-app.git\n                commit:\n                  type: string\n                  example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n                  format: sha1\n                commits:\n                  type: array\n                  items:\n                    type: object\n                    properties:\n                      added:\n                        type: array\n                        items:\n                          type: string\n                      modified:\n                        type: array\n                        items:\n                          type: string\n                      removed:\n                        type: array\n                        items:\n                          type: string\n              required:\n                - ref\n                - repositoryUrl\n      responses:\n        '202':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 202 for addOneHooksUser'\n        '204':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  message:\n                    type: string\n          description: 'Default description: HTTP 204 for addOneHooksUser'\n      operationId: addOneHooksUser\n      description: 'Default description: Insert mutation: addOneHooksUser'\n      summary: addOneHooksUser\n    parameters: []\n    description: /hooks/user\n  /logs/pipeline:\n    get:\n      security:\n        - bearerAuth:\n            - logs\n        - token:\n            - logs\n      parameters:\n        - in: query\n          name: project\n          schema:\n            type: string\n            format: projectName\n          required: true\n        - in: query\n          name: event\n          schema:\n            type: string\n            enum:\n              - pushed\n              - deleted\n              - custom\n          required: true\n        - in: query\n          name: repository\n          schema:\n            type: string\n            example: socialgouv/sample-next-app\n          required: true\n        - in: query\n          name: ref\n          schema:\n            type: string\n            example: feat/space-flight\n          required: true\n        - in: query\n          name: commit\n          schema:\n            type: string\n            example: 49ed5a2aeea3dc3438acf53f795fb34805d3c8ed\n            format: sha1\n          required: true\n        - in: query\n          name: env\n          schema:\n            type: string\n            enum:\n              - dev\n              - preprod\n              - prod\n          allowEmptyValue: true\n        - in: query\n          name: chart\n          schema:\n            type: string\n          required: false\n        - in: query\n          name: follow\n          schema:\n            type: boolean\n        - in: query\n          name: catch\n          schema:\n            type: boolean\n        - in: query\n          name: since\n          schema:\n            type: string\n            format: humanDuration\n            description: 'human duration format, eg: 24h'\n      responses:\n        '200':\n          content:\n            text/plain:\n              schema:\n                $ref: '#/components/schemas/textStream'\n          description: 'Default description: Success results getOneLogsPipeline'\n        '204':\n          content:\n            text/plain:\n              schema:\n                type: string\n          description: 'Default description: HTTP 204 for getOneLogsPipeline'\n      operationId: getOneLogsPipeline\n      description: 'Default description: Query: getOneLogsPipeline'\n      summary: getOneLogsPipeline\n    parameters: []\n    description: /logs/pipeline\n  /support/namespace/:\n    get:\n      security:\n        - token:\n            - webhook\n        - bearerAuth:\n            - webhook\n      parameters:\n        - in: query\n          name: cluster\n          schema:\n            type: string\n            format: clusterName\n          required: true\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  namespaces:\n                    type: array\n                    items:\n                      type: string\n          description: 'Default description: Success results getManySupportNamespace'\n      operationId: getManySupportNamespace\n      description: 'Default description: Query: getManySupportNamespace'\n      summary: getManySupportNamespace\n    parameters: []\n    description: /support/namespace/\n  /support/rollout-status:\n    get:\n      security:\n        - token:\n            - webhook\n        - bearerAuth:\n            - webhook\n      parameters:\n        - in: query\n          name: cluster\n          schema:\n            type: string\n            format: clusterName\n          required: true\n        - in: query\n          name: namespace\n          schema:\n            type: string\n            format: namespace\n          required: true\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  status:\n                    type: object\n                    properties:\n                      status:\n                        type: boolean\n                      error:\n                        type: object\n                        properties:\n                          code:\n                            type: string\n                          message:\n                            type: string\n                          type:\n                            type: string\n          description: 'Default description: Success results getOneSupportRolloutStatus'\n      operationId: getOneSupportRolloutStatus\n      description: 'Default description: Query: getOneSupportRolloutStatus'\n      summary: getOneSupportRolloutStatus\n    parameters: []\n    description: /support/rollout-status\n\"\n`;\n",
			"canonicalURL": "/github.com/SocialGouv/kontinuous@0680cc31a63484a24076aa3ccfc27de3f55c6855/-/blob/packages/webhook/tests/__snapshots__/api.v1.spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/SocialGouv/kontinuous/blob/0680cc31a63484a24076aa3ccfc27de3f55c6855/packages/webhook/tests/__snapshots__/api.v1.spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "invalidYAML: yaml: line 4:11: mapping values are not allowed in this context"
}