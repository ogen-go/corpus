{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/chanzuckerberg/single-cell-data-portal"
		},
		"file": {
			"name": "wmg-api.yml",
			"size": 0,
			"path": "backend/config/wmg-api.yml",
			"byteSize": 13098,
			"content": "openapi: 3.0.3\ninfo:\n  version: \"1.0.0\"\n  title: Chan Zuckerburg Initiative cellxgene Where's My Gene (WMG) API\n  description: \u003e-\n    This API is for internal use only by WMG web client.\nservers:\n  - description: Local\n    url: /\n  - description: Production environment\n    url: https://api.cellxgene.cziscience.com/\n  - description: Development environment\n    url: https://api.dev.single-cell.czi.technology/\n  - description: Staging environment\n    url: https://api.staging.single-cell.czi.technology/\n\npaths:\n  /v1/primary_filter_dimensions:\n    get:\n      summary: Returns the ontology terms for organism and tissue type that can be used when specifying a WMG query.\n      description: \u003e-\n      tags:\n        - wmg\n      operationId: backend.wmg.api.v1.primary_filter_dimensions\n      parameters: []\n      responses:\n        \"200\":\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  snapshot_id:\n                    $ref: \"#/components/schemas/wmg_snapshot_id\"\n                  organism_terms:\n                    $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                  tissue_terms:\n                  # TODO: specify further: https://app.zenhub.com/workspaces/single-cell-5e2a191dad828d52cc78b028/issues/chanzuckerberg/single-cell-data-portal/1967\n                  # {\"organism_ontology_term_id_0\": [ {\"tissue_ontology_term_id_0\": \"tissue_ontology_term_id_0_label\"}],}\n                    type: object\n                  gene_terms:\n                    # TODO: specify further: https://app.zenhub.com/workspaces/single-cell-5e2a191dad828d52cc78b028/issues/chanzuckerberg/single-cell-data-portal/1967\n                    # {\"organism_ontology_term_id_0\": [ {\"gene_ontology_term_id_0\": \"gene_ontology_term_id_0_label\"}],}\n                    type: object\n        \"404\":\n          $ref: \"#/components/responses/404\"\n  /v1/query:\n    post:\n      tags:\n        - wmg\n      operationId: backend.wmg.api.v1.query\n      parameters: []\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                filter:\n                  type: object\n                  required:\n                    - gene_ontology_term_ids\n                    - organism_ontology_term_id\n                    - tissue_ontology_term_ids\n                  properties:\n                      gene_ontology_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                      organism_ontology_term_id:\n                        type: string\n                      tissue_ontology_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                      dataset_ids:\n                        type: array\n                        items:\n                          type: string\n                          format: uuid\n                      disease_ontology_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                      sex_ontology_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                      development_ontology_stage_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                      ethnicity_ontology_term_ids:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_list\"\n                include_filter_dims:\n                  type: boolean\n                  default: false\n              required:\n                - filter\n      responses:\n        \"200\":\n          description: OK\n          content:\n            application/json:\n              example:\n                {\n                  'snapshot_id': '8ce15034-162a-4e2e-9987-eb1af08bd4d4',\n                  'expression_summary': {\n                    'gene1': {\n                      'tissuetype1': [\n                        { 'id': 'CL00000', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00001', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00002', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 }\n                      ],\n                      'tissuetype2': [\n                        { 'id': 'CL00000', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00001', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00002', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 }\n                      ]\n                    },\n                    'gene2': {\n                      'tissuetype1': [\n                        { 'id': 'CL00000', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00001', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00002', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 }\n                      ],\n                      'tissuetype2': [\n                        { 'id': 'CL00000', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00001', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 },\n                        { 'id': 'CL00002', 'me': 0.0, 'n': 0, 'pc': 0.0, 'tpc': 0.0 }\n                      ]\n                    }\n                  },\n                  'term_id_labels': {\n                    'cell_types': [\n                      { 'CL00000': 'CL00000_label' },\n                      { 'CL00001': 'CL00001_label' },\n                      { 'CL00002': 'CL00002_label' }\n                    ],\n                    'genes': [\n                      { 'gene1': 'gene1_label' },\n                      { 'gene2': 'gene2_label' }\n                    ]\n                  }\n                }\n              schema:\n                type: object\n                required:\n                  - expression_summary\n                  - term_id_labels\n                properties:\n                  snapshot_id:\n                    $ref: \"#/components/schemas/wmg_snapshot_id\"\n                  expression_summary:\n                    type: object\n                    # we use `additionalProperties` instead of `properties`, since the object's property names are\n                    # ontology term ids, rather than a fixed set of names\n                    additionalProperties:\n                      description: -\u003e\n                        One property per gene, where the gene ontology term id is the property name, and the property\n                        value is an object of tissue types.\n                      type: object\n                      # we use `additionalProperties` instead of `properties`, since the object's property names are\n                      # ontology term ids, rather than a fixed set of names\n                      additionalProperties:\n                        description: -\u003e\n                          One property per tissue type, where the tissue type ontology term id is the property name,\n                          and the property value is an ordered array of viz matrix \"dots\" (data points). The ordering of\n                          the array elements (cell types) should be preserved in the client's rendering of this\n                          data.\n                        type: array\n                        items:\n                          type: object\n                          properties:\n                            id:\n                              description: cell type ontology term id\n                              type: string\n                            me:\n                              description: mean expression\n                              type: number\n                              format: float\n                              maxLength: 4\n                            pc:\n                              description: percentage of cells expressing gene within this cell type\n                              type: number\n                              format: float\n                              maxLength: 4\n                              minimum: 0.0\n                              maximum: 100.0\n                            tpc:\n                              description: perecentage of cells for this cell type within tissue (cell type's cell count / tissue's total cell count)\n                              type: number\n                              format: float\n                              maxLength: 4\n                              minimum: 0.0\n                              maximum: 100.0\n                            n:\n                              description: number of expressed cells (non-zero expression) within this cell type\n                              type: integer\n                              minimum: 0.0\n                  term_id_labels:\n                    type: object\n                    required:\n                      - genes\n                      - cell_types\n                    properties:\n                      genes:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                      cell_types:\n                        type: object\n                        # TODO: specify further (grouped by tissue now): https://app.zenhub.com/workspaces/single-cell-5e2a191dad828d52cc78b028/issues/chanzuckerberg/single-cell-data-portal/1967\n#                        items:\n#                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                  filter_dimensions:\n                    type: object\n                    properties:\n                      datasets:\n                        type: array\n                        items:\n                          type: object\n                          properties:\n                            id:\n                              type: string\n                              format: uuid\n                            label:\n                              type: string\n                            collection_label:\n                              type: string\n                            collection_url:\n                              type: string\n                              format: url\n                      disease_terms:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                      sex_terms:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                      development_stage_terms:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n                      ethnicity_terms:\n                        $ref: \"#/components/schemas/wmg_ontology_term_id_label_list\"\n\ncomponents:\n  schemas:\n    problem:\n      type: object\n      description: Error message container for HTTP APIs.\n      properties:\n        type:\n          type: string\n        title:\n          type: string\n        detail:\n          type: string\n    wmg_ontology_term_id_label_list:\n      description: -\u003e\n        An array of ontology term ids and labels, where array elements are single-element objects of the\n        form \"\u003cid\u003e\":\"\u003clabel\u003e\"\n      type: array\n      items:\n        description: -\u003e\n          A single-element object with the ontology term id as the element's property name and the ontology term label\n          as the element's property value.\n        type: object\n        # TODO: fix: https://app.zenhub.com/workspaces/single-cell-5e2a191dad828d52cc78b028/issues/chanzuckerberg/single-cell-data-portal/1967\n        # `{\"\u003contology_term_id\u003e\": \"\u003contology_term_label\"}`\n#        maxProperties: 1\n#        additionalProperties:\n#          type: string\n    wmg_ontology_term_id_list:\n      type: array\n      items:\n        type: string\n    wmg_snapshot_id:\n      type: string\n      format: uuid\n  \n  parameters: {}\n\n  responses:\n    200:\n      description: OK.\n    201:\n      description: Created.\n    202:\n      description: Accepted\n    204:\n      description: No Content\n    400:\n      description: Invalid parameter.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    401:\n      description: Failed to authenticate.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    403:\n      description: Unauthorized.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    404:\n      description: Resource not found.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    405:\n      description: Method not allowed.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    409:\n      description: File conflict.\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n    413:\n      description: Exceed File Size Limit\n      content:\n        application/problem+json:\n          schema:\n            $ref: \"#/components/schemas/problem\"\n\n  securitySchemes: {}\n",
			"canonicalURL": "/github.com/chanzuckerberg/single-cell-data-portal@6591fd9b0773db669ed694a6c5df1fa095d1de4d/-/blob/backend/config/wmg-api.yml",
			"externalURLs": [
				{
					"url": "https://github.com/chanzuckerberg/single-cell-data-portal/blob/6591fd9b0773db669ed694a6c5df1fa095d1de4d/backend/config/wmg-api.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "notImplemented: path \"/v1/primary_filter_dimensions\": get: responses: 404: contents: unsupported content types: [application/problem+json]",
	"NotImplemented": [
		"unsupported content types"
	]
}