{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/networknt/light-docker"
		},
		"file": {
			"name": "openapi.yaml",
			"size": 0,
			"path": "controller/openapi.yaml",
			"byteSize": 13380,
			"content": "openapi: 3.0.2\ninfo:\n  title: Control Panel - OpenAPI 3.0\n  description: |-\n    All light-4j services can register here during startup and deregister during the shutdown. It ensures that the control panel has a snapshot of running services all the time. The control panel also sends health check requests to each service continuously to ensure its healthy and server info request to assist the service certification. With the information above, this service can serve as a global discovery for service to service invocations. \n  termsOfService: 'http://swagger.io/terms/'\n  contact:\n    email: stevehu@gmail.com\n  license:\n    name: Apache 2.0\n    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'\n  version: 1.0.0\nservers:\n  - url: 'https://lightapi.net'\npaths:\n  '/services':\n    post:\n      summary: Add a new service with opitonal health checks\n      description: Register a service during its startup\n      operationId: register\n      requestBody:\n        description: Register a service with optional health checks\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Service'\n        required: true\n      responses:\n        '200':\n          description: Successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '400':\n          description: Invalid Service Register Request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.w'\n    delete:\n      summary: Remove a service and its health checks from the registry\n      description: Deregister a service during its shutdown\n      operationId: deregister\n      parameters:\n        - name: serviceId\n          in: query\n          description: ID of the service\n          required: true\n          schema:\n            type: string\n        - name: tag\n          in: query\n          description: Return only nodes with the tag\n          required: false\n          schema:\n            type: string\n        - name: protocol\n          in: query\n          description: Return only nodes with the prototol\n          required: true\n          schema:\n            type: string\n        - name: address\n          in: query\n          description: IP address of the node\n          required: true\n          schema:\n            type: string\n        - name: port\n          in: query\n          description: Port number of the node\n          required: true\n          schema:\n            type: integer\n      \n      responses:\n        '200':\n          description: Successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '400':\n          description: Invalid Service Register Request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.w'\n    get:\n      summary: Query all healthy services\n      description: Returns a list of services\n      operationId: getHealthService\n      responses:\n        '200':\n          description: successful operation\n        '400':\n          description: Invalid request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '404':\n          description: Service not found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.r'\n            - 'portal.w'\n  '/services/lookup':\n    get:\n      summary: Discover service with serviceId and optional tag\n      description: Returns a list of nodes for the service\n      operationId: getLookupService\n      parameters:\n        - name: serviceId\n          in: query\n          description: ID of the service\n          required: true\n          schema:\n            type: string\n        - name: tag\n          in: query\n          description: Return only nodes with the tag\n          required: false\n          schema:\n            type: string\n      responses:\n        '200':\n          description: successful operation\n        '400':\n          description: Invalid request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '404':\n          description: Service not found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.r'\n            - 'portal.w'\n  '/services/check':\n    put:\n      summary: TTL type check to set the status of the check to pass or fail\n      description: TTL check to from the service for pass or not\n      operationId: checkStatus\n      requestBody:\n        description: TTL check to notify if the service is pass or not\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/CheckStatus'\n        required: true\n      responses:\n        '200':\n          description: Successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '400':\n          description: Invalid Service Register Request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.w'\n  '/services/check/{id}':\n    get:\n      summary: Retrieve the current check status for a check id\n      description: Get the live check status for the node\n      operationId: getCheckStatus\n      parameters:\n        - name: id\n          in: path\n          description: id of the check object in format serviceId|tag:address:port\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Check'\n        '400':\n          description: Invalid Service Register Request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.r'\n            - 'portal.w'\n  '/services/info/{node}':\n    get:\n      summary: Query service info by node of address and port\n      description: Returns a service info object\n      operationId: getServiceInfo\n      parameters:\n        - name: node\n          in: path\n          description: node of the service in address:port format\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: successful operation\n        '400':\n          description: Invalid request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '404':\n          description: Service not found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.r'\n            - 'portal.w'\n\n  '/services/logger':\n    get:\n      summary: Query logger for a particular instance\n      description: Returns a list of loggers with logging levels\n      operationId: getServiceLogger\n      parameters:\n        - name: protocol\n          in: query\n          description: target server protocol, http or https.\n          required: true\n          schema:\n            type: string\n            enum: [\n              \"http\",\n              \"https\"\n            ]\n        - name: address\n          in: query\n          description: target server address.\n          required: true\n          schema:\n            type: string\n        - name: port\n          in: query\n          description: target server port number.\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: successful operation\n        '400':\n          description: Invalid request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '404':\n          description: Service not found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.r'\n            - 'portal.w'\n    post:\n      summary: Update the logging level for a particular instance\n      description: Returns a list of loggers with logging levels after updated.\n      operationId: postServiceLogger\n      requestBody:\n        description: Service that is updating loggers.\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/LoggerConfig'\n      responses:\n        '200':\n          description: successful operation\n        '400':\n          description: Invalid request\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        '404':\n          description: Service not found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n      security:\n        - portal_auth:\n            - 'portal.w'\ncomponents:\n  schemas:\n    Service:\n      type: object\n      properties:\n        serviceId:\n          type: string\n          description: a unique ID for the service across the organization.\n          example: com.networknt.petstore.v1\n        name:\n          type: string\n          description: a logical name of the service.\n          example: com.networknt.petstore.v1\n        tag:\n          type: string\n          description: a list of tags to assign to the service.\n        protocol:\n          type: string\n          description: http or https for the server.\n        address:\n          type: string\n          description: The address of the service.\n        port:\n          type: integer\n          description: The port number of the service\n          example: 8080\n        check:\n          $ref: '#/components/schemas/Check'\n      required:\n        - serviceId\n        - protocol\n        - address\n        - port  \n    Check:\n      type: object\n      properties:\n        name:\n          type: string\n          description: The name of the check\n        id:\n          type: string\n          description: A unique ID for this check on the node\n        interval:\n          type: integer\n          description: The frequency at which to run this check in millisecond\n        notes:\n          type: string\n          description: Arbitrary information for humans. \n        deregisterCriticalServiceAfter:\n          type: integer\n          description: Check associated with a service should deregister after this time in millisecond\n        http: \n          type: string\n          description: An HTTP check to perform a GET request against the value of HTTP every Interval. \n        tlsSkipVerify: \n          type: boolean\n          description: If the certificate for an HTTPS check should not be verified.\n      required:\n        - id\n        - interval\n        - deregisterCriticalServiceAfter\n    CheckStatus:\n      type: object\n      properties:\n        id:\n          type: string\n          description: A unique ID for the check with serviceId, address and port combination\n        pass:\n          type: boolean\n          description: If the check is passed or failed\n    LoggerConfig:\n      type: object\n      properties:\n        protocol:\n          type: string\n          description: Target server protocol\n        address:\n          type: string\n          description: Target server IP address\n        port:\n          type: integer\n          description: Target server port number\n        loggers:\n          type: array\n          description: A list of LoggerInfo entries\n          items:\n            $ref: '#/components/schemas/LoggerInfo'\n      required:\n        - protocol\n        - address\n        - port\n        - loggers\n\n    LoggerInfo:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Name of the logger\n        level:\n          type: string\n          enum: [\n            \"ERROR\",\n            \"WARN\",\n            \"INFO\",\n            \"DEBUG\",\n            \"TRACE\"\n          ]\n          description: Logging level\n      required:\n        - name\n        - level\n    Status:\n      type: object\n      properties:\n        statusCode:\n          type: integer\n        code:\n          type: string\n        message:\n          type: string\n        description:\n          type: string\n        severity:\n          type: string\n      required:\n        - statusCode\n        - code\n        - message\n        - description\n\n  securitySchemes:\n    portal_auth:\n      type: oauth2\n      flows:\n        clientCredentials:\n          tokenUrl: 'https://lightapi.net/token'\n          scopes:\n            'portal.w': update control panel\n            'portal.r': query control panel\n",
			"canonicalURL": "/github.com/networknt/light-docker@781ec1d6ea78dbd6aa6391f9470936a6d779d4b0/-/blob/controller/openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/networknt/light-docker/blob/781ec1d6ea78dbd6aa6391f9470936a6d779d4b0/controller/openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "notImplemented: path \"/services/info/{node}\": get: security: security \"portal_auth\" (index 0): oauth2 security not implemented",
	"NotImplemented": [
		"oauth2 security"
	]
}