{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/alphagov/verify-service-provider"
		},
		"file": {
			"name": "verify-service-provider-api.swagger.yml",
			"size": 0,
			"path": "docs/api/verify-service-provider-api.swagger.yml",
			"byteSize": 11814,
			"content": "openapi: 3.0.0\ninfo:\n  description: |\n    This is a description of the API for the Verify Service Provider.\n\n    The API allows you to generate a SAML authentication request and to translate a SAML response into JSON. To use the Verify Service Provider, you must [download your own version](https://github.com/alphagov/verify-service-provider/releases).\n\n    If you are using the legacy setup involving a [Matching Service Adapter](https://github.com/alphagov/verify-matching-service-adapter), see the [API documentation for the legacy setup](https://alphagov.github.io/verify-service-provider/api/verify-service-provider-with-matching-api.swagger.html).\n  version: 2.0.0\n  title: Verify Service Provider\n  x-logo:\n    url: 'https://github.com/alphagov/verify-service-provider/blob/master/docs/api/verify-logo-redoc.png?raw=true'\n    altText: GOV.UK Verify logo\nexternalDocs:\n  description: Find out more about setting up the Verify Service Provider.\n  url: 'https://www.docs.verify.service.gov.uk/get-started/set-up-successful-verification-journey/#set-up-the-successful-verification-user-journey'\npaths:\n  /generate-request:\n    post:\n      summary: Generate a SAML authentication request\n      description: |\n        Generate a SAML authentication request, known as an AuthnRequest, to send to Verify Hub.\n\n        See the GOV.UK Verify technical  documentation for more information on [how to generate an authentication request](https://www.docs.verify.service.gov.uk/get-started/set-up-successful-verification-journey/#send-a-request).\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/RequestGenerationBody'\n        required: true\n      responses:\n        '200':\n          description: \u003e-\n            Contains an object with a valid SAML authentication request that can be consumed by the GOV.UK Verify Hub.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/RequestResponseBody'\n        '422':\n          description: \u003e-\n            An error due to a JSON request in an invalid format, for example missing required parameters.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 422\n                message: Some error message\n        '500':\n          description: An error due to an internal server error.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 500\n                message: Some error message\n  /translate-response:\n    post:\n      summary: Translate a SAML response\n      description: |\n        Translate a SAML response received from the GOV.UK Verify Hub into JSON.\n\n        See the GOV.UK Verify technical documentation for more information on [how to handle the response](https://www.docs.verify.service.gov.uk/get-started/set-up-successful-verification-journey/#handle-a-response)\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/TranslateSamlResponseBody'\n        description: An object containing the SAML response returned by the GOV.UK Verify Hub.\n        required: true\n      responses:\n        '200':\n          description: 'Contains the details of the SAML response, translated into JSON.'\n          content:\n            application/json:\n              schema:\n               oneOf:\n                  - $ref: '#/components/schemas/IdentityVerificationScenario'\n                  - $ref: '#/components/schemas/AuthenticationFailedScenario'\n                  - $ref: '#/components/schemas/NoAuthenticationScenario'\n                  - $ref: '#/components/schemas/RequestErrorScenario'\n        '400':\n          description: An error due to a problem with translating the response.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 400\n                message: Some error message\n        '422':\n          description: \u003e-\n            An error due to a JSON request in an invalid format, for example missing required parameters.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 422\n                message: Some error message\n        '500':\n          description: An error due to an internal server error.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 500\n                message: Some error message\ncomponents:\n  schemas:\n    RequestGenerationBody:\n      type: object\n      properties:\n        entityId:\n          $ref: '#/components/schemas/EntityId'\n    RequestResponseBody:\n      type: object\n      required:\n        - samlRequest\n        - requestId\n        - ssoLocation\n      properties:\n        samlRequest:\n          description: SAML authentication request as a base64 string.\n          type: string\n          format: byte\n        requestId:\n          description: \u003e-\n            A token that identifies the authentication request. This is used later to verify that the authentication request and SAML response have passed through the same browser.\n          type: string\n          format: byte\n        ssoLocation:\n          description: \u003e-\n            The GOV.UK Verify Hub URL where your service sends the authentication request.\n          type: string\n          format: url\n    TranslateSamlResponseBody:\n      type: object\n      required:\n        - samlResponse\n        - requestId\n        - levelOfAssurance\n      properties:\n        samlResponse:\n          description: A SAML response as a base64 encoded string.\n          type: string\n          format: byte\n        requestId:\n          description: \u003e-\n            A token that was generated for the original SAML authentication request. This is used to verify that the SAML authentication request and SAML response have passed  through the same browser.\n          type: string\n          format: byte\n        levelOfAssurance:\n          $ref: '#/components/schemas/RequiredLevelOfAssurance'\n    RequestErrorScenario:\n      description: Returned when there was an error in the request.\n      type: object\n      required:\n        - scenario\n      properties:\n        scenario:\n          type: string\n          enum:\n            - REQUEST_ERROR\n          description: Returned when there was an error in the request.\n    AuthenticationFailedScenario:\n      description: Returned when the `urn:oasis:names:tc:SAML:2.0:status:AuthnFailed` status code is included in the SAML response from the GOV.UK Verify Hub.\n      type: object\n      required:\n        - scenario\n      properties:\n        scenario:\n          type: string\n          enum:\n            - AUTHENTICATION_FAILED\n          description: Returned when the `urn:oasis:names:tc:SAML:2.0:status:AuthnFailed` status code is included in the SAML response from the GOV.UK Verify Hub.\n    NoAuthenticationScenario:\n      description: Returned when the `urn:oasis:names:tc:SAML:2.0:status:NoAuthnContext` status code is included in the SAML response from the GOV.UK Verify Hub.\n      type: object\n      required:\n        - scenario\n      properties:\n        scenario:\n          type: string\n          enum:\n            - NO_AUTHENTICATION\n          description: Returned when the `urn:oasis:names:tc:SAML:2.0:status:NoAuthnContext` status code is included in the SAML response from the GOV.UK Verify Hub.\n    IdentityVerificationScenario:\n      description: Returned when the user's identity was successfully verified\n      type: object\n      required:\n        - scenario\n        - pid\n        - attributes\n        - levelOfAssurance\n      properties:\n        scenario:\n          type: string\n          enum:\n          - IDENTITY_VERIFIED\n          description: Returned when the user's identity was successfully verified\n        pid:\n          description: \u003e-\n            A unique identifier that can identify a user against an internal\n            record.\n          type: string\n          format: byte\n        levelOfAssurance:\n          $ref: '#/components/schemas/ReceivedLevelOfAssurance'\n        attributes:\n          $ref: '#/components/schemas/Attributes'\n    RequiredLevelOfAssurance:\n      description: The minimum level of assurance required by the service.\n      type: string\n      enum:\n        - LEVEL_1\n        - LEVEL_2\n        - LEVEL_3\n        - LEVEL_4\n    EntityId:\n      description: \u003e-\n        The EntityId for the service interacting with the Verify Service Provider. This is required if there is more than one service connected to the same Verify Service Provider deployment, otherwise it is optional. The value, if provided, must be one of those listed in the configuration for the Verify Service Provider.\n      type: string\n    ReceivedLevelOfAssurance:\n      description: Level of assurance the user's identity was verified with.\n      type: string\n      enum:\n        - LEVEL_1\n        - LEVEL_2\n        - LEVEL_3\n        - LEVEL_4\n    Attributes:\n      description: \u003e-\n        An object containing the user attributes returned from the identity provider.\n      type: object\n      properties:\n        firstNames:\n          type: array\n          items:\n            $ref: '#/components/schemas/PersonalName'\n        middleNames:\n          type: array\n          items:\n            $ref: '#/components/schemas/PersonalName'\n        surnames:\n          type: array\n          items:\n            $ref: '#/components/schemas/PersonalName'\n        datesOfBirth:\n          type: array\n          items:\n            allOf:\n              - $ref: '#/components/schemas/VerifiableAttribute'\n              - properties:\n                  value:\n                    $ref: '#/components/schemas/Date'\n        gender:\n          type: object\n          properties:\n            verified:\n              type: boolean\n            value:\n              type: string\n              enum:\n                - FEMALE\n                - MALE\n                - NOT_SPECIFIED\n                - OTHER\n        addresses:\n          type: array\n          items:\n            $ref: '#/components/schemas/VerifiableAddress'\n    Date:\n      type: string\n      format: date\n    VerifiableAttribute:\n      type: object\n      properties:\n        verified:\n          type: boolean\n        from:\n          $ref: '#/components/schemas/Date'\n        to:\n          $ref: '#/components/schemas/Date'\n    PersonalName:\n      allOf:\n      - $ref: '#/components/schemas/VerifiableAttribute'\n      - description: 'An object describing a forename, middlename or surname'\n        properties:\n          value:\n            type: string\n          nonLatinScriptValue:\n            type: string\n    VerifiableAddress:\n      allOf:\n        - $ref: '#/components/schemas/VerifiableAttribute'\n        - description: An object describing the address fields of a user\n          properties:\n            value:\n              $ref: '#/components/schemas/Address'\n    Address:\n      type: object\n      description: An object describing the address fields of a user\n      properties:\n        lines:\n          type: array\n          items:\n            type: string\n        postCode:\n          type: string\n        internationalPostCode:\n          type: string\n        uprn:\n          type: string\n    ErrorMessage:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: number\n        message:\n          type: string\n",
			"canonicalURL": "/github.com/alphagov/verify-service-provider@f085eea34267c6d9396f402e22edf7b05d31be55/-/blob/docs/api/verify-service-provider-api.swagger.yml",
			"externalURLs": [
				{
					"url": "https://github.com/alphagov/verify-service-provider/blob/f085eea34267c6d9396f402e22edf7b05d31be55/docs/api/verify-service-provider-api.swagger.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "notImplemented: path \"/translate-response\": post: responses: 200: contents: application/json: generate schema: oneOf: oneOf TranslateResponsePostOK: variant NoAuthenticationScenario: no unique fields, unable to parse without discriminator: discriminator inference not implemented",
	"NotImplemented": [
		"discriminator inference"
	]
}