{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/alphagov/verify-service-provider"
		},
		"file": {
			"name": "verify-service-provider-with-matching-api.swagger.yml",
			"size": 0,
			"path": "docs/api/verify-service-provider-with-matching-api.swagger.yml",
			"byteSize": 11695,
			"content": "openapi: 3.0.0\ninfo:\n  description: |\n    This is a description of the API for the Verify Service Provider when it's connected to a [Matching Service Adapter](https://github.com/alphagov/verify-matching-service-adapter).\n\n    If you don't have a Matching Service Adapter, see the [API documentation for services connecting using only the Verify Service Provider](https://alphagov.github.io/verify-service-provider/api/verify-service-provider-with-matching-api.swagger.html).\n\n    The API allows you to generate a SAML authentication request and to translate a SAML response into JSON. To use the Verify Service Provider, you must [download your own version](https://github.com/alphagov/verify-service-provider/releases).\n  version: 2.0.0\n  title: Verify Service Provider\n  x-logo:\n    url: 'https://github.com/alphagov/verify-service-provider/blob/master/docs/api/verify-logo-redoc.png?raw=true'\n    altText: GOV.UK Verify logo\npaths:\n  /generate-request:\n    post:\n      summary: Generate a SAML authentication request\n      description:  Generate a SAML authentication request, known as an AuthnRequest, to send to Verify Hub.\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/RequestGenerationBody'\n        required: true\n      responses:\n        '200':\n          description: \u003e-\n            Contains an object with a valid SAML Authentication request that can\n            be consumed by the GOV.UK Verify Hub.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/RequestResponseBody'\n        '422':\n          description: \u003e-\n            An error due to a JSON request in an invalid format for example, missing required parameters.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 422\n                message: A description of the error\n        '500':\n          description: An error due to an internal server error.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 500\n                message: A description of the error\n  /translate-response:\n    post:\n      summary: Translate a SAML response\n      description: \u003e-\n        Translate a SAML response received from the GOV.UK Verify Hub into JSON.\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/TranslateSamlResponseBody'\n        description: An object containing the SAML response returned by the GOV.UK Verify Hub.\n        required: true\n      responses:\n        '200':\n          description: 'Contains the details of the SAML response, translated into JSON.'\n          content:\n            application/json:\n              schema:\n                oneOf:\n                - $ref: '#/components/schemas/SuccessfulMatchResponseBody'\n                - $ref: '#/components/schemas/AccountCreationResponseBody'\n                - $ref: '#/components/schemas/NoMatchResponseBody'\n                - $ref: '#/components/schemas/CancellationResponseBody'\n                - $ref: '#/components/schemas/AuthenticationFailedResponseBody'\n                - $ref: '#/components/schemas/RequestErrorResponseBody'\n        '400':\n          description: An error due to a problem with translating the Response.\n          content:\n            application/json:\n              schema:\n                allOf:\n                  - $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 400\n                message: A description of the error\n        '422':\n          description: \u003e-\n            An error due to a JSON request in an invalid format, for example missing\n            required parameters).\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 422\n                message: A description of the error\n        '500':\n          description: An error due to an internal server error.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ErrorMessage'\n              example:\n                code: 500\n                message: A description of the error\ncomponents:\n  schemas:\n    RequestGenerationBody:\n      type: object\n      properties:\n        entityId:\n          $ref: '#/components/schemas/EntityId'\n    RequestResponseBody:\n      type: object\n      required:\n        - samlRequest\n        - requestId\n        - ssoLocation\n      properties:\n        samlRequest:\n          description: 'SAML authentication request as a base64 string.'\n          type: string\n          format: byte\n        requestId:\n          description: \u003e-\n            A token that identifies the authentication request. This is used later to verify that the authentication request and SAML response have passed through the same browser.\n          type: string\n          format: byte\n        ssoLocation:\n          description: \u003e-\n            The GOV.UK Verify Hub URL where your service sends the authentication request.\n          type: string\n          format: url\n    TranslateSamlResponseBody:\n      type: object\n      required:\n        - samlResponse\n        - requestId\n        - levelOfAssurance\n      properties:\n        samlResponse:\n          description: 'A SAML response as a base64 string.'\n          type: string\n          format: byte\n        requestId:\n          description: \u003e-\n            A token that was generated for the original SAML authentication request. This is used to verify that the authentication request and SAML response have passed through the same browser.\n          type: string\n          format: byte\n        levelOfAssurance:\n          $ref: '#/components/schemas/RequiredLevelOfAssurance'\n        entityId:\n          $ref: '#/components/schemas/EntityId'\n    SuccessfulMatchResponseBody:\n      type: object\n      description: Returned when the user has been successfully matched to your local datastore.\n      properties:\n        scenario:\n          type: string\n          enum:\n            - SUCCESS_MATCH\n          description: Returned when the user has been successfully matched to your local datastore.\n        pid:\n          description: \u003e-\n            A unique identifier that can identify a user against an internal\n            record.\n          type: string\n          format: byte\n        levelOfAssurance:\n          $ref: '#/components/schemas/ReceivedLevelOfAssurance'\n    AccountCreationResponseBody:\n      type: object\n      description: Returned when the user has not been successfully matched to your local datastore, but your service supports the creation of accounts.\n      properties:\n        scenario:\n          type: string\n          enum:\n            - ACCOUNT_CREATION\n          description: Returned when the user has not been successfully matched to your local datastore, but your service supports the creation of accounts.\n        pid:\n          description: \u003e-\n            A unique identifier that can identify a user against an internal\n            record.\n          type: string\n          format: byte\n        levelOfAssurance:\n          $ref: '#/components/schemas/ReceivedLevelOfAssurance'\n        attributes:\n          $ref: '#/components/schemas/AccountCreationAttributes'\n    NoMatchResponseBody:\n      description: Returned when the user has not been successfully matched to your local datastore\n      type: object\n      properties:\n        scenario:\n          type: string\n          enum:\n            - NO_MATCH\n          description: Returned when the user has not been successfully matched to your local datastore\n    CancellationResponseBody:\n      description: Returned when the user has cancelled\n      type: object\n      properties:\n        scenario:\n          type: string\n          enum:\n            - CANCELLATION\n          description: Returned when the `urn:oasis:names:tc:SAML:2.0:status:NoAuthnContext` status code is included in the SAML response from the GOV.UK Verify Hub.\n    RequestErrorResponseBody:\n      description: Returned when there was an error in the request.\n      type: object\n      properties:\n        scenario:\n          type: string\n          enum:\n            - REQUEST_ERROR\n          description: Returned when there was an error in the request.\n    AuthenticationFailedResponseBody:\n      description: Returned when there was a failure to authenticate.\n      type: object\n      properties:\n        scenario:\n          type: string\n          enum:\n            - AUTHENTICATION_FAILED\n          description: Returned when there was a failure to authenticate.\n    RequiredLevelOfAssurance:\n      description: The minimum level of assurance required by the service.\n      type: string\n      enum:\n        - LEVEL_1\n        - LEVEL_2\n    EntityId:\n      description: \u003e-\n        The EntityId for the service interacting with the Verify Service Provider. This is required if there is more than one service connected to the same Verify Service Provider deployment, otherwise it is optional. The value, if provided, must be one of those listed in the configuration for the Verify Service Provider.\n      type: string\n    ReceivedLevelOfAssurance:\n      description: Level of assurance the user's identity was verified with.\n      type: string\n      enum:\n        - LEVEL_1\n        - LEVEL_2\n    AccountCreationAttributes:\n      description: \u003e-\n        When user-account-creation is supported by the service, and no\n        match was possible, these attributes are used to create a new account.\n      type: object\n      properties:\n        firstName:\n          type: object\n          properties:\n            value:\n              type: string\n            verified:\n              type: boolean\n        middleName:\n          type: object\n          properties:\n            value:\n              type: string\n            verified:\n              type: boolean\n        surname:\n          type: object\n          properties:\n            value:\n              type: string\n            verified:\n              type: boolean\n        dateOfBirth:\n          type: object\n          properties:\n            value:\n              type: string\n              format: date\n            verified:\n              type: boolean\n        address:\n          type: object\n          properties:\n            value:\n              $ref: '#/components/schemas/Address'\n            verified:\n              type: boolean\n        addressHistory:\n          type: array\n          items:\n            type: object\n            properties:\n              value:\n                $ref: '#/components/schemas/Address'\n              verified:\n                type: boolean\n        cycle3:\n          type: string\n    Address:\n      description: \u003e-\n        An object describing the address fields of a user\n      type: object\n      properties:\n        lines:\n          type: array\n          items:\n            type: string\n        postCode:\n          type: string\n        internationalPostCode:\n          type: string\n        uprn:\n          type: string\n        fromDate:\n          type: string\n          format: date\n        toDate:\n          type: string\n          format: date\n    ErrorMessage:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: number\n          description: The HTTP status code\n        message:\n          description: A description of the error\n          type: string\n",
			"canonicalURL": "/github.com/alphagov/verify-service-provider@f085eea34267c6d9396f402e22edf7b05d31be55/-/blob/docs/api/verify-service-provider-with-matching-api.swagger.yml",
			"externalURLs": [
				{
					"url": "https://github.com/alphagov/verify-service-provider/blob/f085eea34267c6d9396f402e22edf7b05d31be55/docs/api/verify-service-provider-with-matching-api.swagger.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "notImplemented: path \"/translate-response\": post: responses: 200: contents: application/json: generate schema: oneOf: oneOf TranslateResponsePostOK: variant NoMatchResponseBody: no unique fields, unable to parse without discriminator: discriminator inference not implemented",
	"NotImplemented": [
		"discriminator inference"
	]
}