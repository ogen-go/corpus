{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/uc-cdis/hatchery"
		},
		"file": {
			"name": "openapi.yaml",
			"size": 0,
			"path": "openapis/openapi.yaml",
			"byteSize": 7802,
			"content": "openapi: 3.0.1\ninfo:\n  title: Hatchery API\n  description: Workspace service for launching and interacting with containers.\n  license:\n    name: Apache 2.0\n    url: http://www.apache.org/licenses/LICENSE-2.0.html\n  version: 1.0.0\nservers:\n- url: http://nci-crdc-demo.datacommons.io/lw-workspace/\ntags:\n- name: workspace\n  description: Operations about workspaces\nsecurity:\n  - bearerAuth: []\npaths:\n  /launch:\n    post:\n      tags:\n      - workspace\n      summary: Launch a workspace\n      operationId: launch\n      parameters:\n      - in: query\n        name: id\n        schema:\n          type: string\n        description: The ID of the workspace to launch from the /options list.\n      responses:\n        200:\n          description: successfully started launching\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n  /terminate:\n    post:\n      tags:\n      - workspace\n      summary: Terminate the actively running workspace\n      operationId: terminate\n      responses:\n        200:\n          description: successfully started terminating\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n  /status:\n    get:\n      tags:\n      - workspace\n      summary: Get the current status of the workspace\n      operationId: status\n      responses:\n        200:\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Status'\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n  /options:\n    get:\n      tags:\n      - workspace\n      summary: Get the available workspace options that can be launched\n      operationId: options\n      responses:\n        200:\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                items:\n                    $ref: '#/components/schemas/Container'\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n  /paymodels:\n    get:\n      tags:\n      - workspace\n      summary: Get the current user's pay model data\n      operationId: paymodels\n      responses:\n        200:\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                  $ref: '#/components/schemas/PayModel'\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n        404:\n          $ref: '#/components/responses/NotFoundError'\n        500:\n          $ref: '#/components/responses/InternalServerError'\n  /allpaymodels:\n    get:\n      tags:\n      - workspace\n      summary: Get the current user's all pay model data, including the currently activated one\n      operationId: allpaymodels\n      responses:\n        200:\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                  $ref: '#/components/schemas/AllPayModels'\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n        404:\n          $ref: '#/components/responses/NotFoundError'\n        500:\n          $ref: '#/components/responses/InternalServerError'\n  /setpaymodel:\n    post:\n      tags:\n      - workspace\n      summary: Set the currently activated paymodel for user\n      operationId: setpaymodel\n      parameters:\n      - in: query\n        name: id\n        schema:\n          type: string\n        description: The unique ID of the pay model\n      responses:\n        200:\n          description: successfully set current pay model\n        400:\n          $ref: '#/components/responses/BadRequestError'\n        401:\n          $ref: '#/components/responses/UnauthorizedError'\n        404:\n          $ref: '#/components/responses/NotFoundError'\n        500:\n          $ref: '#/components/responses/InternalServerError'\n\ncomponents:\n  schemas:\n    Status:\n      type: object\n      properties:\n        status:\n          type: string\n          enum: [Launching, Running, Terminating, Stopped, Not Found]\n          description: >\n            Value:\n             * `Terminating` - The workspace is shutting down\n             * `Launching` - The workspace is starting up\n             * `Stopped` - The workspace is in a failed state and must be terminated\n             * `Running` - The workspace is running and ready to be used\n             * `Not Found` - The workspace could not be found\n        conditions:\n          type: array\n          items:\n            $ref: '#/components/schemas/PodCondition'\n          description: The condition of the pod\n        containerStates:\n          type: array\n          items:\n            $ref: '#/components/schemas/ContainerState'\n          description: The state of all the containers\n    Container:\n      type: object\n      properties:\n        name:\n          type: string\n          description: The display name for the container\n        cpu-limit:\n          type: string\n          description: The CPU limit for the container\n        memory-limit:\n          type: string\n          description: The memory limit for the container\n        id:\n          type: string\n          description: The hash of the container, passed to /launch\n    PodCondition:\n      type: object\n      properties:\n        type:\n          type: string\n          enum: [PodScheduled, Initialized, ContainersReady, Ready]\n          description: Name of this Pod condition\n        status:\n          type: string\n          enum: [\"True\", \"False\", Unknown]\n          description: Indicates whether that condition is applicable\n    ContainerState:\n      type: object\n      properties:\n        name:\n          type: string\n          description: Name of this container\n        state:\n          type: object\n          description: Details about the container's current condition\n    PayModel:\n      type: object\n      properties:\n        bmh_workspace_id:\n          type: string\n          description: Unique ID of this pay model\n        workspace_type:\n          type: string\n          description: Type of this pay model, can be used as the name of pay model\n        user_id:\n          type: string\n          description: The ID of user\n        account_id:\n          type: string\n          description: The ID of the provisioned AWS account for this pay model\n        region:\n          type: string\n          description: The region of the provisioned AWS account for this pay model\n        ecs:\n          type: string\n          description: Whether to launch workspace using AWS ECS for this pay model\n        subnet:\n          type: string\n          description: The subnet identifier\n        hard-limit:\n          type: string\n          description: The hard limit set for this AWS account\n        soft-limit:\n          type: string\n          description: The soft limit set for this AWS account\n        total-usage:\n          type: string\n          description: The total occurred usage so far for this AWS account\n        current_pay_model:\n          type: boolean\n          description: Is this pay model activated as current pay model\n    AllPayModels:\n      type: object\n      properties:\n        current_pay_model:\n          type: object\n          $ref: '#/components/schemas/PayModel'\n          description: The currently activated pay model associated with this user\n        all_pay_models:\n          type: array\n          items:\n            $ref: '#/components/schemas/PayModel'\n          description: All pay models associated with this user, including the currently activated one\n  responses:\n    BadRequestError:\n      description: Missing required information in request\n    UnauthorizedError:\n      description: Access token is missing or invalid\n    NotFoundError:\n      description: Can't find pay model information for user\n    InternalServerError:\n      description: Can't process user's request\n",
			"canonicalURL": "/github.com/uc-cdis/hatchery@f611912ddf511dab07c7858da4c27484a495ae63/-/blob/openapis/openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/uc-cdis/hatchery/blob/f611912ddf511dab07c7858da4c27484a495ae63/openapis/openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse operations: path \"/setpaymodel\": at 1:5243: post: operation \"setpaymodel\": at 1:5251: security: unknown security schema \"bearerAuth\""
}