{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/ably/open-specs"
		},
		"file": {
			"name": "platform-v1.yaml",
			"size": 0,
			"path": "definitions/platform-v1.yaml",
			"byteSize": 44794,
			"content": "openapi: 3.0.1\ninfo:\n  title: Platform API\n  description: The [REST API specification](https://www.ably.io/documentation/rest-api) for Ably.\n  version: \"1.1.0\"\n  contact:\n    name: \"Ably Support\"\n    url: \"https://www.ably.io/contact\"\n    email: \"support@ably.io\"\ncomponents:\n  securitySchemes:\n    basicAuth:\n      type: http\n      scheme: basic\n      description: Basic Authentication using an [API key](https://www.ably.io/documentation/core-features/authentication#basic-authentication).\n    bearerAuth:\n      type: http\n      scheme: bearer\n      description: Token Authentication using an [Ably Token](https://www.ably.io/documentation/core-features/authentication#basic-authentication), or optionally an [Ably JWT](https://www.ably.io/documentation/core-features/authentication#ably-jwt-process).\n\n  headers:\n    # TODO: Issue exists for integrating pagination with OpenAPI, https://github.com/OAI/OpenAPI-Specification/issues/667. If this is ever actioned, we should enable it within our spec.\n    Link:\n      description: Links to related resources, in the format defined by [RFC 5988](https://tools.ietf.org/html/rfc5988#section-5). This will potentially include a link with relation type `next`, `first`, and `current`, where appropiate.\n      schema:\n        type: string\n        pattern: '(\u003c(.*)?\u003e; rel=\\\"(first|current|last)?\\\",)*(\u003c(.*)?\u003e; rel=\\\"(first|current|last)?\\\")+'\n      required: true\n\n    ServerId:\n      description: The ID for the server communicated with.\n      schema:\n        type: string\n      required: true\n\n    ErrorCode:\n      description: The error code.\n      schema:\n        type: integer\n\n    ErrorMessage:\n      description: The error message.\n      schema:\n        type: string\n\n  parameters:\n    # Currently each parameter needs to be defined seperately. If https://github.com/OAI/OpenAPI-Specification/issues/445 ever goes through, can amalagmate pagination parameters\n    filterStart:\n      name: start\n      in: query\n      schema:\n        type: string\n\n    filterLimit:\n      name: limit\n      in: query\n      schema:\n        type: integer\n        default: '100'\n\n    filterEnd:\n      name: end\n      in: query\n      schema:\n        type: string\n        default: now\n\n    filterDirection:\n      name: direction\n      in: query\n      schema:\n        type: string\n        default: backwards\n        enum: [forwards, backwards ]\n\n    channelId:\n      name: channel_id\n      in: path\n      schema:\n        type: string\n      required: true\n      description: The [Channel's ID](https://www.ably.io/documentation/rest/channels).\n\n    # TODO: Better document what the name is\n    key_name:\n      name: keyName\n      in: path\n      schema:\n        type: string\n      required: true\n      description: The [key name](https://www.ably.io/documentation/rest-api/token-request-spec#api-key-format) comprises of the app ID and key ID of an API key.\n\n    deviceId:\n      name: device_id\n      in: path\n      schema:\n        type: string\n      required: true\n      description: Device's ID.\n\n    versionHeader:\n      in: header\n      name: X-Ably-Version\n      schema:\n        type: string\n      description: The version of the API you wish to use.\n\n    responseFormat:\n      in: query\n      name: format\n      schema:\n        type: string\n        enum:\n          - json\n          - jsonp\n          - msgpack\n          - html\n      description: The response format you would like\n\n  schemas:\n    # Message components\n    Message:\n      type: object\n      description: Message object.\n      properties:\n        name:\n          description: The event name, if provided.\n          type: string\n        data:\n          description: The string encoded payload, with the encoding specified below.\n          type: string\n        id:\n          description: A Unique ID that can be specified by the publisher for [idempotent publishing](https://www.ably.io/documentation/rest/messages#idempotent).\n          type: string\n          readOnly: true\n        timestamp:\n          description: Timestamp when the message was received by the Ably, as milliseconds since the epoch.\n          type: integer\n          format: int64\n          readOnly: true\n        encoding:\n          description: This will typically be empty as all messages received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the data payload.\n          type: string\n        clientId:\n          description: The [client ID](https://www.ably.io/documentation/core-features/authentication#identified-clients) of the publisher of this message.\n          type: string\n        connectionId:\n          description: The connection ID of the publisher of this message.\n          type: string\n        # TODO: Currently object does not work with application/x-www-form-urlencoded\n        extras:\n          $ref: '#/components/schemas/Extras'\n\n    Extras:\n      type: object\n      description: Extras object. Currently only allows for [push](https://www.ably.io/documentation/general/push/publish#channel-broadcast-example) extra.\n      properties:\n        push:\n          $ref: '#/components/schemas/Push'\n\n    Push:\n      type: object\n      properties:\n        data:\n          description: Arbitrary [key-value string-to-string payload](https://www.ably.io/documentation/general/push/publish#channel-broadcast-example).\n          type: string\n        notification:\n          $ref: '#/components/schemas/Notification'\n        apns:\n          description: Extends and overrides generic values when delivering via APNs. [See examples](https://www.ably.io/documentation/general/push/publish#payload-structure)\n          type: object\n          properties:\n            notification:\n              $ref: '#/components/schemas/Notification'\n        fcm:\n          description: Extends and overrides generic values when delivering via GCM/FCM. [See examples](https://www.ably.io/documentation/general/push/publish#payload-structure)\n          type: object\n          properties:\n            notification:\n              $ref: '#/components/schemas/Notification'\n        web:\n          description: Extends and overrides generic values when delivering via web. [See examples](https://www.ably.io/documentation/general/push/publish#payload-structure)\n          type: object\n          properties:\n            notification:\n              $ref: '#/components/schemas/Notification'\n\n    Notification:\n      type: object\n      properties:\n        title:\n          description: Title to display at the notification.\n          type: string\n        body:\n          description: Text below title on the expanded notification.\n          type: string\n        icon:\n          description: Platform-specific icon for the notification.\n          type: string\n        sound:\n          description: Platform-specific sound for the notification.\n          type: string\n        collapseKey:\n          # Needs more information\n          description: Platform-specific, used to group notifications together.\n          type: string\n\n    PresenceMessage:\n      type: object\n      properties:\n        id:\n          description: Unique ID assigned by Ably to this presence update.\n          type: string\n          readOnly: true\n        action:\n          description: The event signified by a PresenceMessage.\n          type: string\n          enum: [ ABSENT, PRESENT, ENTER, LEAVE, UPDATE ]\n          readOnly: true\n        data:\n          description: The presence update payload, if provided.\n          type: string\n        clientId:\n          description: The client ID of the publisher of this presence update.\n          type: string\n        connectionId:\n          description: The connection ID of the publisher of this presence update.\n          type: string\n        timestamp:\n          description: Timestamp when the presence update was received by Ably, as milliseconds since the epoch.\n          type: integer\n          format: int64\n          readOnly: true\n        encoding:\n          description: This will typically be empty as all presence updates received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the data payload.\n          type: string\n        extras:\n          $ref: '#/components/schemas/Extras'\n\n    TokenRequest:\n      type: object\n      properties:\n        keyName:\n          type: string\n          description: Name of the key used for the TokenRequest. The keyName comprises of the app ID and key ID on an API Key.\n          example: xVLyHw.LMJZxw\n        capability:\n          type: object\n          description: The [capabilities](https://www.ably.io/documentation/core-features/authentication#capabilities-explained) (i.e. a set of channel names/namespaces and, for each, a set of operations) which should be a subset of the set of capabilities associated with the key specified in keyName.\n          example: { \"channel1\": [ \"publish\", \"subscribe\" ]}\n        clientId:\n          type: string\n          description: The [client ID](https://www.ably.io/documentation/core-features/authentication#identified-clients) to be assosciated with the token. Can be set to * to allow for any client ID to be used.\n        timestamp:\n          type: integer\n          description: Time of creation of the Ably TokenRequest.\n        nonce:\n          type: string\n          description: An unquoted, un-escaped random string of at least 16 characters. Used to ensure the Ably TokenRequest cannot be reused.\n      required:\n        - keyName\n        - capability\n        - timestamp\n        - nonce\n\n    SignedTokenRequest:\n      allOf:\n        - $ref: '#/components/schemas/TokenRequest'\n        - type: object\n          properties:\n            mac:\n              type: string\n              description: A signature, generated as an HMAC of each of the above components, using the key secret value.\n          required:\n            - mac\n\n    TokenDetails:\n      type: object\n      properties:\n        token:\n          type: string\n          description: The Ably Token.\n        keyName:\n          type: string\n          description: Name of the key used to create the token\n        issued:\n          type: integer\n          description: Timestamp of token creation.\n        expires:\n          type: integer\n          description: Timestamp of token expiration.\n        capability:\n          # TODO: capabilities object representation, does validation as well\n          type: string\n          description: Regular expression representation of the capabilities of the token.\n\n    ChannelDetails:\n      type: object\n      properties:\n        channelId:\n          type: string\n          description: The required name of the channel including any qualifier, if any.\n        region:\n          type: string\n          description: In events relating to the activity of a channel in a specific region, this optionally identifies the region.\n        isGlobalMaster:\n          type: boolean\n          description: In events relating to the activity of a channel in a specific region, this optionally identifies whether or not that region is responsible for global coordination of the channel.\n        status:\n          $ref: '#/components/schemas/ChannelStatus'\n      required:\n        - channelId\n\n    ChannelStatus:\n      type: object\n      description: A ChannelStatus instance.\n      properties:\n        isActive:\n          type: boolean\n          description: A required boolean value indicating whether the channel that is the subject of the event is active. For events indicating regional activity of a channel this indicates activity in that region, not global activity.\n        occupancy:\n          $ref: '#/components/schemas/Occupancy'\n      required:\n        - isActive\n\n    Occupancy:\n      type: object\n      description: An Occupancy instance indicating the occupancy of a channel. For events indicating regional activity of a channel this indicates activity in that region, not global activity.\n      properties:\n        publishers:\n          type: integer\n          description: The number of connections attached to the channel that are authorised to publish.\n        subscribers:\n          type: integer\n          description: The number of connections attached that are authorised to subscribe to messages.\n        presenceSubscribers:\n          type: integer\n          description: The number of connections that are authorised to subscribe to presence messages.\n        presenceConnections:\n          type: integer\n          description: The number of connections that are authorised to enter members into the presence channel.\n        presenceMembers:\n          type: integer\n          description: The number of members currently entered into the presence channel.\n\n    DeviceDetails:\n      type: object\n      properties:\n        id:\n          type: string\n          description: Unique identifier for the device generated by the device itself.\n        clientId:\n          type: string\n          description: Optional trusted client identifier for the device.\n        formFactor:\n          type: string\n          description: Form factor of the push device.\n          enum: [ phone, tablet, desktop, tv, watch, car, embedded ]\n        metadata:\n          type: object\n          description: Optional metadata object for this device. The metadata for a device may only be set by clients with push-admin privileges and will be used more extensively in the future with smart notifications.\n        platform:\n          type: string\n          description: Platform of the push device.\n          enum: [ ios, android ]\n        deviceSecret:\n          type: string\n          description: Secret value for the device.\n        push.recipient:\n          $ref: '#/components/schemas/Recipient'\n        push.state:\n          type: string\n          description: the current state of the push device.\n          enum: [ Active, Failing, Failed ]\n          readOnly: true\n\n    # Excludes web for now due to not being supported\n    Recipient:\n      type: object\n      description: Push recipient details for a device.\n      properties:\n        transportType:\n          type: string\n          description: Defines which push platform is being used.\n          enum: [ apns, fcm, gcm ]\n        deviceToken:\n          type: string\n          # TODO: Link to above enum for required\n          description: when using APNs, specifies the required device token.\n        registrationToken:\n          type: string\n          # TODO: Link to above enum for required\n          description: when using GCM or FCM, specifies the required registration token.\n        clientId:\n          type: string\n          # TODO: Link to no transportType\n          description: Client ID of recipient\n          writeOnly: true\n        deviceId:\n          type: string\n          # TODO: Link to no transportType\n          description: Client ID of recipient\n          writeOnly: true\n\n    Error:\n      type: object\n      description: Returned error from failed REST.\n      properties:\n        message:\n          type: string\n          description: Message explaining the error's cause.\n        code:\n          type: integer\n          description: Error code.\n        statusCode:\n          type: integer\n          description: Status error code.\n        href:\n          type: string\n          description: Link to help with error.\n        serverId:\n          type: string\n          description: Server ID with which error was encountered.\n\n  responses:\n    Error:\n      description: Error\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n        application/x-msgpack:\n          schema:\n            $ref: '#/components/schemas/Error'\n        text/html:\n          schema:\n            $ref: '#/components/schemas/Error'\n      headers:\n        x-ably-errorcode:\n          $ref: '#/components/headers/ErrorCode'\n        x-ably-errormessage:\n          $ref: '#/components/headers/ErrorMessage'\n        x-ably-serverid:\n          $ref: '#/components/headers/ServerId'\n\nsecurity:\n  - basicAuth: []\n  - bearerAuth: []\n\nservers:\n- url: https://rest.ably.io\n\npaths:\n  /channels/{channel_id}/messages:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Get message history for a channel\n      operationId: getMessagesByChannel\n      tags:\n        - History\n      description: Get message history for a channel\n      parameters:\n        - $ref: '#/components/parameters/channelId'\n        - $ref: '#/components/parameters/filterStart'\n        - $ref: '#/components/parameters/filterLimit'\n        - $ref: '#/components/parameters/filterEnd'\n        - $ref: '#/components/parameters/filterDirection'\n      responses:\n        '2XX':\n          description: OK\n          headers:\n            link:\n              $ref: '#/components/headers/Link'\n            x-ably-serverid:\n              $ref: '#/components/headers/ServerId'\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Message'\n            application/x-msgpack:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Message'\n            text/html:\n              schema:\n                type: string\n        default:\n          description: Error\n          headers:\n            x-ably-errorcode:\n              $ref: '#/components/headers/ErrorCode'\n            x-ably-errormessage:\n              $ref: '#/components/headers/ErrorMessage'\n            x-ably-serverid:\n              $ref: '#/components/headers/ServerId'\n\n    post:\n      summary: Publish a message to a channel\n      operationId: publishMessagesToChannel\n      description: Publish a message to the specified channel\n      tags:\n        - Publishing\n      parameters:\n        - $ref: '#/components/parameters/channelId'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Message'\n          application/x-msgpack:\n            schema:\n              $ref: '#/components/schemas/Message'\n          application/x-www-form-urlencoded:\n            schema:\n              $ref: '#/components/schemas/Message'\n      responses:\n        '2XX':\n          description: OK\n          headers:\n            x-ably-serverid:\n              $ref: '#/components/headers/ServerId'\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  channel:\n                    type: string\n                  messageId:\n                    type: string\n            application/x-msgpack:\n              schema:\n                type: object\n                properties:\n                  channel:\n                    type: string\n                  messageId:\n                    type: string\n            text/html:\n              schema:\n                type: object\n                properties:\n                  channel:\n                    type: string\n                  messageId:\n                    type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n  /channels/{channel_id}/presence:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Get presence of a channel\n      operationId: getPresenceOfChannel\n      description: Get presence on a channel\n      tags:\n        - Status\n      parameters:\n        - $ref: '#/components/parameters/channelId'\n        - name: clientId\n          in: query\n          schema:\n            type: string\n        - name: connectionId\n          in: query\n          schema:\n            type: string\n        - name: limit\n          in: query\n          schema:\n            type: integer\n            default: 100\n      responses:\n        '200':\n          description: OK\n          headers:\n            link:\n              $ref: '#/components/headers/Link'\n            x-ably-serverid:\n              $ref: '#/components/headers/ServerId'\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/PresenceMessage'\n            application/x-msgpack:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/PresenceMessage'\n            text/html:\n              schema:\n                type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n  /channels/{channel_id}/presence/history:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Get presence history of a channel\n      operationId: getPresenceHistoryOfChannel\n      description: Get presence on a channel\n      tags:\n        - History\n      parameters:\n        - $ref: '#/components/parameters/channelId'\n        - $ref: '#/components/parameters/filterStart'\n        - $ref: '#/components/parameters/filterLimit'\n        - $ref: '#/components/parameters/filterEnd'\n        - $ref: '#/components/parameters/filterDirection'\n      responses:\n        '2XX':\n          description: OK\n          headers:\n            link:\n              $ref: '#/components/headers/Link'\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/PresenceMessage'\n            application/x-msgpack:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/PresenceMessage'\n            text/html:\n              schema:\n                type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n  /channels/{channel_id}:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Get metadata of a channel\n      operationId: getMetadataOfChannel\n      description: Get metadata of a channel\n      tags:\n        - Status\n      parameters:\n        - $ref: '#/components/parameters/channelId'\n      responses:\n        '200':\n          description: OK\n          headers:\n            x-ably-serverid:\n              $ref: '#/components/headers/ServerId'\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ChannelDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n  /channels:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Enumerate all active channels of the application\n      operationId: getMetadataOfAllChannels\n      description: Enumerate all active channels of the application\n      tags:\n        - Status\n      parameters:\n        - in: query\n          name: limit\n          schema:\n            type: integer\n            default: 100\n        - in: query\n          name: prefix\n          schema:\n            type: string\n          description: Optionally limits the query to only those channels whose name starts with the given prefix\n        - in: query\n          name: by\n          schema:\n            type: string\n            enum: [ value, id ]\n          description: optionally specifies whether to return just channel names (by=id) or ChannelDetails (by=value)\n      responses:\n        '2XX':\n          description: OK\n          headers:\n            link:\n              $ref: '#/components/headers/Link'\n          content:\n            application/json:\n              schema:\n                oneOf:\n                  - type: array\n                    items:\n                      $ref: '#/components/schemas/ChannelDetails'\n                  - type: array\n                    items:\n                      type: string\n            application/x-msgpack:\n              schema:\n                oneOf:\n                  - type: array\n                    items:\n                      $ref: '#/components/schemas/ChannelDetails'\n                  - type: array\n                    items:\n                      type: string\n            text/html:\n              schema:\n                type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/deviceRegistrations:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: List devices registered for receiving push notifications\n      operationId: getRegisteredPushDevices\n      description: List of device details of devices registed for push notifications.\n      tags:\n        - Push\n      parameters:\n        - name: deviceId\n          description: Optional filter to restrict to devices associated with that deviceId.\n          in: query\n          schema:\n            type: string\n        - name: clientId\n          in: query\n          description: Optional filter to restrict to devices associated with that clientId.\n          schema:\n            type: string\n        - name: limit\n          in: query\n          description: The maximum number of records to return.\n          schema:\n            type: integer\n            default: 100\n            maximum: 1000\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    post:\n      summary: Register a device for receiving push notifications\n      operationId: registerPushDevice\n      description: Register a device’s details, including the information necessary to deliver push notifications to it. Requires \"push-admin\" capability.\n      tags:\n        - Push\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n          application/x-msgpack:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    delete:\n      summary: Unregister matching devices for push notifications\n      operationId: unregisterAllPushDevices\n      description: Unregisters devices. All their subscriptions for receiving push notifications through channels will also be deleted.\n      tags:\n        - Push\n      parameters:\n        # TODO: Implement a oneOf filter\n        - name: deviceId\n          description: Optional filter to restrict to devices associated with that deviceId. Cannot be used with clientId.\n          in: query\n          schema:\n            type: string\n        - name: clientId\n          in: query\n          description: Optional filter to restrict to devices associated with that clientId. Cannot be used with deviceId.\n          schema:\n            type: string\n      responses:\n        '2XX':\n          description: OK\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/deviceRegistrations/{device_id}:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      operationId: getPushDeviceDetails\n      summary: Get a device registration\n      description: Get the full details of a device.\n      tags:\n        - Push\n      parameters:\n        - $ref: '#/components/parameters/deviceId'\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    put:\n      summary: Update a device registration\n      operationId: putPushDeviceDetails\n      description: Device registrations can be upserted (the existing registration is replaced entirely) with a PUT operation. Only clientId, metadata and push.recipient are mutable.\n      tags:\n        - Push\n      parameters:\n        - $ref: '#/components/parameters/deviceId'\n      requestBody:\n        content:\n          # TODO: Some application of allOf to enforce usage of all details\n          application/json:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n          application/x-msgpack:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n          application/x-www-form-urlencoded:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    patch:\n      summary: Update a device registration\n      operationId: patchPushDeviceDetails\n      description: Specific attributes of an existing registration can be updated. Only clientId, metadata and push.recipient are mutable.\n      tags:\n        - Push\n      parameters:\n        - $ref: '#/components/parameters/deviceId'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n          application/x-msgpack:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n          application/x-www-form-urlencoded:\n            schema:\n              $ref: '#/components/schemas/DeviceDetails'\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    delete:\n      summary: Unregister a single device for push notifications\n      operationId: unregisterPushDevice\n      description: Unregisters a single device by its device ID. All its subscriptions for receiving push notifications through channels will also be deleted.\n      tags:\n        - Push\n      parameters:\n        - $ref: '#/components/parameters/deviceId'\n      responses:\n        '2XX':\n          description: OK\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/deviceRegistrations/{device_id}/resetUpdateToken:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: Reset a registered device's update token\n      operationId: updatePushDeviceDetails\n      description: Gets an updated device details object.\n      tags:\n        - Push\n      parameters:\n        - $ref: '#/components/parameters/deviceId'\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n            text/html:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/channelSubscriptions:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      summary: List channel subscriptions\n      operationId: getPushSubscriptionsOnChannels\n      description: Get a list of push notification subscriptions to channels.\n      tags:\n        - Push\n      parameters:\n        - name: channel\n          in: query\n          description: Filter to restrict to subscriptions associated with that channel.\n          schema:\n            type: string\n        # TODO: Implement a oneOf filter\n        - name: deviceId\n          description: Optional filter to restrict to devices associated with that deviceId. Cannot be used with clientId.\n          in: query\n          schema:\n            type: string\n        - name: clientId\n          in: query\n          description: Optional filter to restrict to devices associated with that clientId. Cannot be used with deviceId.\n          schema:\n            type: string\n        - name: limit\n          in: query\n          description: The maximum number of records to return.\n          schema:\n            type: integer\n            default: 100\n            maximum: 1000\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DeviceDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n    post:\n      summary: Subscribe a device to a channel\n      operationId: subscribePushDeviceToChannel\n      description: Subscribe either a single device or all devices associated with a client ID to receive push notifications from messages sent to a channel.\n      tags:\n        - Push\n      requestBody:\n        content:\n          application/json:\n            schema:\n              oneOf:\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    deviceId:\n                      type: string\n                      description: Must be set when clientId is empty, cannot be used with clientId.\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    clientId:\n                      type: string\n                      description: Must be set when deviceId is empty, cannot be used with deviceId.\n            example:\n              channel: my:channel\n              clientId: myClientId\n          application/x-msgpack:\n            schema:\n              oneOf:\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    deviceId:\n                      type: string\n                      description: Must be set when clientId is empty, cannot be used with clientId.\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    clientId:\n                      type: string\n                      description: Must be set when deviceId is empty, cannot be used with deviceId.\n            example:\n              channel: my:channel\n              clientId: myClientId\n          application/x-www-form-urlencoded:\n            schema:\n              oneOf:\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    deviceId:\n                      type: string\n                      description: Must be set when clientId is empty, cannot be used with clientId.\n                - type: object\n                  properties:\n                    channel:\n                      type: string\n                      description: Channel name.\n                    clientId:\n                      type: string\n                      description: Must be set when deviceId is empty, cannot be used with deviceId.\n            example:\n              channel: my:channel\n              clientId: myClientId\n      responses:\n        '2XX':\n          description: OK\n        default:\n          $ref: '#/components/responses/Error'\n\n    delete:\n      summary: Delete a registered device's update token\n      operationId: deletePushDeviceDetails\n      description: Delete a device details object.\n      tags:\n        - Push\n      parameters:\n        - name: channel\n          in: query\n          description: Filter to restrict to subscriptions associated with that channel.\n          schema:\n            type: string\n        # TODO: Cannot currently use oneOf for below two parameters. If https://github.com/OAI/OpenAPI-Specification/issues/256 is resolved, we should make use of oneOf here.\n        - name: deviceId\n          description: Must be set when clientId is empty, cannot be used with clientId.\n          in: query\n          schema:\n            type: string\n        - name: clientId\n          in: query\n          description: Must be set when deviceId is empty, cannot be used with deviceId.\n          schema:\n            type: string\n      responses:\n        '2XX':\n          description: OK\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/channels:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n    get:\n      summary: List all channels with at least one subscribed device\n      operationId: getChannelsWithPushSubscribers\n      description: Returns a paginated response of channel names.\n      tags:\n        - Push\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: string\n            application/x-msgpack:\n              schema:\n                type: array\n                items:\n                  type: string\n            text/html:\n              schema:\n                type: array\n                items:\n                  type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n  /push/publish:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    post:\n      summary: Publish a push notification to device(s)\n      operationId: publishPushNotificationToDevices\n      description: A convenience endpoint to deliver a push notification payload to a single device or set of devices identified by their client identifier.\n      tags:\n        - Push\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                recipient:\n                  $ref: '#/components/schemas/Recipient'\n                push:\n                  $ref: '#/components/schemas/Push'\n              required:\n                - recipient\n          application/x-msgpack:\n            schema:\n              type: object\n              properties:\n                recipient:\n                  $ref: '#/components/schemas/Recipient'\n                push:\n                  $ref: '#/components/schemas/Push'\n              required:\n                - recipient\n          application/x-www-form-urlencoded:\n            schema:\n              type: object\n              properties:\n                recipient:\n                  $ref: '#/components/schemas/Recipient'\n                push:\n                  $ref: '#/components/schemas/Push'\n              required:\n                - recipient\n      responses:\n        '2XX':\n          description: OK\n        default:\n          $ref: '#/components/responses/Error'\n\n  /keys/{keyName}/requestToken:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    # TODO: Allow for no auth for SignedTokenRequest. May not be possible to specify.\n    post:\n      summary: Request an access token\n      operationId: requestAccessToken\n      description: This is the means by which clients obtain access tokens to use the service. You can see how to construct an Ably TokenRequest in the [Ably TokenRequest spec](https://www.ably.io/documentation/rest-api/token-request-spec) documentation, although we recommend you use an Ably SDK rather to create a TokenRequest, as the construction of a TokenRequest is complex. The resulting token response object contains the token properties as defined in Ably TokenRequest spec. Authentication is not required if using a Signed TokenRequest.\n      tags:\n        - Authentication\n      parameters:\n        - $ref: '#/components/parameters/key_name'\n      requestBody:\n        content:\n          application/json:\n            schema:\n              oneOf:\n                - $ref: '#/components/schemas/TokenRequest'\n                - $ref: '#/components/schemas/SignedTokenRequest'\n            example:\n              keyName: \"YourKey.Name\"\n              timestamp: \"1559124196551\"\n              capability:\n                channel1: [ \"publish\", \"subscribe\" ]\n                wildcard:channels:*: [ \"publish\" ]\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/TokenDetails'\n            # TODO: Verify no x-www-form-urlencoded\n            application/x-msgpack:\n              schema:\n                $ref: '#/components/schemas/TokenDetails'\n        default:\n          $ref: '#/components/responses/Error'\n\n  /stats:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n    get:\n      summary: Retrieve usage statistics for an application\n      operationId: getStats\n      description: The Ably system can be queried to obtain usage statistics for a given application, and results are provided aggregated across all channels in use in the application in the specified period. Stats may be used to track usage against account quotas.\n      tags:\n        - Stats\n      parameters:\n        - $ref: '#/components/parameters/filterStart'\n        - $ref: '#/components/parameters/filterLimit'\n        - $ref: '#/components/parameters/filterEnd'\n        - $ref: '#/components/parameters/filterDirection'\n        - name: unit\n          in: query\n          description: Specifies the unit of aggregation in the returned results.\n          schema:\n            type: string\n            default: minute\n            enum: [ minute, hour, day, month ]\n\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n        default:\n          $ref: '#/components/responses/Error'\n\n  /time:\n    parameters:\n      - $ref: '#/components/parameters/versionHeader'\n      - $ref: '#/components/parameters/responseFormat'\n\n    get:\n      security: []\n      summary: Get the service time\n      operationId: getTime\n      description: This returns the service time in milliseconds since the epoch.\n      tags:\n        - Stats\n      responses:\n        '2XX':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: integer\n            application/x-msgpack:\n              schema:\n                type: array\n                items:\n                  type: integer\n            text/html:\n              schema:\n                type: string\n        default:\n          $ref: '#/components/responses/Error'\n\n# TODO: Better define pagination responses and flow\n# TODO: Links for responses meanings\n",
			"canonicalURL": "/github.com/ably/open-specs@23794da71c558338c80c189da80e2691a821560f/-/blob/definitions/platform-v1.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/ably/open-specs/blob/23794da71c558338c80c189da80e2691a821560f/definitions/platform-v1.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: parameters: \"filterLimit\": parse schema: at definitions/platform-v1.yaml:59:18: parse default: expected type \"integer\", got \"string\""
}