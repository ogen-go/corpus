{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/aws-samples/serverless-coffee-workshop"
		},
		"file": {
			"name": "api.yaml",
			"size": 0,
			"path": "backends/2-config-service/RestAPIs/api.yaml",
			"byteSize": 8623,
			"content": "openapi: \"3.0.1\"\ninfo:\n  title: \"ConfigServiceRESTAPI\"\n  version: \"2021-12-21T15:32:58Z\"\npaths:\n  /config:\n    get:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Empty\"\n\n      x-amazon-apigateway-integration:\n        credentials: \n          Fn::GetAtt: [ConfigRESTApiRole, Arn]\n        httpMethod: \"POST\"\n        uri: \n          Fn::Sub: arn:aws:apigateway:${AWS::Region}:dynamodb:action/Scan\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'GET,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n            responseTemplates:\n              application/json: \"#set($Items = $input.path('$.Items'))\\n$Items\\n\"\n        requestTemplates:\n          application/json: \"{\\n    \\\"TableName\\\": \\\"serverlesspresso-config-table\\\"\\\n            \\n}\"\n        passthroughBehavior: \"when_no_templates\"\n        type: \"aws\"\n    options:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content: {}\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'GET,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n            responseTemplates:\n              application/json: \"{}\\n\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\" : 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\n  /admin-config:\n    get:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Empty\"\n      security: [\n        {\n          \"ServerlespressoAuth\" : [\"openid\", \"aws.cognito.signin.user.admin\"]\n        }\n      ]\n      x-amazon-apigateway-integration:\n        credentials: \n          Fn::GetAtt: [ConfigRESTApiRole, Arn]\n        httpMethod: \"POST\"\n        uri: \n          Fn::Sub: arn:aws:apigateway:${AWS::Region}:dynamodb:action/Scan\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'GET,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n            responseTemplates:\n              application/json: \"#set($Items = $input.path('$.Items'))\\n$Items\\n\"\n        requestTemplates:\n          application/json: \"{\\n    \\\"TableName\\\": \\\"serverlesspresso-config-table\\\"\\\n            \\n}\"\n        passthroughBehavior: \"when_no_templates\"\n        type: \"aws\"\n    options:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content: {}\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'GET,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n            responseTemplates:\n              application/json: \"{}\\n\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\" : 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\n  /store:\n    put:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Empty\"\n      security: [\n        {\n          \"ServerlespressoAuth\" : [\"openid\", \"aws.cognito.signin.user.admin\"]\n        }\n      ]\n      x-amazon-apigateway-integration:\n        credentials: \n          Fn::GetAtt: [ConfigRESTApiRole, Arn]\n        httpMethod: \"POST\"\n        uri: \"arn:aws:apigateway:${AWS::Region}:dynamodb:action/UpdateItem\"\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'GET,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n        requestTemplates:\n          application/json: \"#set($state = $input.params('state'))\\n\\n#if( $state\\\n            \\ == 'open' )\\n  #set($stateBool = true)\\n#else\\n  #set($stateBool = false)\\n\\\n            #end\\n\\n{\\n    \\\"TableName\\\": \\\"serverlesspresso-config-table\\\",\\n   \\\n            \\ \\\"Key\\\": {\\n      \\\"PK\\\": {\\n        \\\"S\\\":\\\"config\\\"\\n        }\\n \\\n            \\   },\\n    \\\"UpdateExpression\\\": \\\"set storeOpen = :openState\\\",\\n  \\\n            \\  \\\"ExpressionAttributeValues\\\": {\\n    \\\":openState\\\": {\\n      \\\"BOOL\\\"\\\n            : $stateBool\\n    }\\n    },\\n    \\\"ReturnValues\\\":\\\"ALL_NEW\\\"\\n}\"\n        passthroughBehavior: \"when_no_templates\"\n        type: \"aws\"\n    options:\n      responses:\n        \"200\":\n          description: \"200 response\"\n          headers:\n            Access-Control-Allow-Origin:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Methods:\n              schema:\n                type: \"string\"\n            Access-Control-Allow-Headers:\n              schema:\n                type: \"string\"\n          content: {}\n      x-amazon-apigateway-integration:\n        responses:\n          default:\n            statusCode: \"200\"\n            responseParameters:\n              method.response.header.Access-Control-Allow-Methods: \"'PUT,OPTIONS'\"\n              method.response.header.Access-Control-Allow-Headers: \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'\"\n              method.response.header.Access-Control-Allow-Origin: \"'*'\"\n            responseTemplates:\n              application/json: \"{}\\n\"\n        requestTemplates:\n          application/json: \"{\\n  \\\"statusCode\\\" : 200\\n}\\n\"\n        passthroughBehavior: \"when_no_match\"\n        type: \"mock\"\ncomponents:\n  schemas:\n    Empty:\n      title: \"Empty Schema\"\n      type: \"object\"\n  securitySchemes:\n    ServerlespressoAuth:\n      type: \"apiKey\"\n      name: \"Authorization\"\n      in: \"header\"\n      x-amazon-apigateway-authtype: \"cognito_user_pools\"\n      x-amazon-apigateway-authorizer:\n        providerARNs:\n        - Fn::GetAtt: [UserPool, Arn]\n        type: \"cognito_user_pools\"\n",
			"canonicalURL": "/github.com/aws-samples/serverless-coffee-workshop@65b8fefbd49fa439d34c8b38476f7fb09c518cee/-/blob/backends/2-config-service/RestAPIs/api.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/aws-samples/serverless-coffee-workshop/blob/65b8fefbd49fa439d34c8b38476f7fb09c518cee/backends/2-config-service/RestAPIs/api.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse path items: path \"/admin-config\": get: security: at backends/2-config-service/RestAPIs/api.yaml:96:36: list of scopes MUST be empty for \"type\" \"apiKey\""
}