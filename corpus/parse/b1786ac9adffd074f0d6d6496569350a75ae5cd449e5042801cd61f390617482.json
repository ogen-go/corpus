{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/stackrox/acs-fleet-manager"
		},
		"file": {
			"name": "fleet-manager-private.yaml",
			"size": 0,
			"path": "openapi/fleet-manager-private.yaml",
			"byteSize": 16910,
			"content": "openapi: 3.0.0 # need this as first line to allow some IDEs to know this is an openapi document.\n# Warning: This file should only be used if the endpoints are not yet ready to be public, or not suitable for public consumption (like the data plane endpoints).\n# In most cases, you shouldn't need to add the endpoints here.\n# Only add endpoints here when it is an explicit requirement, or if you know what you are doing.\n# There should be no duplicated endpoints or schemas in these 2 files. They should only defined in one of them.\ninfo:\n  title: Red Hat Advanced Cluster Security Service Fleet Manager\n  version: 1.4.0\n  description: Red Hat Advanced Cluster Security (RHACS) Service Fleet Manager APIs that are used by internal services e.g fleetshard operators.\nservers:\n  - url: https://api.openshift.com\n    description: Main (production) server\n  - url: https://api.stage.openshift.com\n    description: Staging server\n  - url: http://localhost:8000\n    description: localhost\n  - url: /\n    description: current domain\ntags:\n  - name: Agent Clusters\n    description: \"\"\n\npaths:\n  # Endpoints for data plane communications\n  \"/api/rhacs/v1/agent-clusters/{id}/status\":\n    put:\n      tags:\n        - Agent Clusters\n      parameters:\n        - $ref: \"fleet-manager.yaml#/components/parameters/id\"\n      requestBody:\n        description: Cluster status update data\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/DataPlaneClusterUpdateStatusRequest\"\n        required: true\n      responses:\n        \"200\":\n          description: Cluster status is updated\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                400InvalidIdExample:\n                  $ref: \"#/components/examples/400InvalidIdExample\"\n          description: id value is not valid\n        \"404\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                404Example:\n                  $ref: \"fleet-manager.yaml#/components/examples/404Example\"\n          # This is deliberate to hide the endpoints for unauthorised users\n          description: Auth token is not valid.\n      security:\n        - Bearer: []\n      operationId: updateAgentClusterStatus\n      summary: Update the status of an agent cluster\n\n  \"/api/rhacs/v1/agent-clusters/{id}/centrals/status\":\n    put:\n      tags:\n        - Agent Clusters\n      parameters:\n        - $ref: \"fleet-manager.yaml#/components/parameters/id\"\n      requestBody:\n        description: Centrals status update data\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/DataPlaneCentralStatusUpdateRequest\"\n        required: true\n      responses:\n        \"200\":\n          description: Status is updated for Centrals\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                400InvalidIdExample:\n                  $ref: \"#/components/examples/400InvalidIdExample\"\n          description: id value is not valid\n        \"404\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                404Example:\n                  $ref: \"fleet-manager.yaml#/components/examples/404Example\"\n          # This is deliberate to hide the endpoints for unauthorised users\n          description: Auth token is not valid.\n      security:\n        - Bearer: []\n      operationId: updateCentralClusterStatus\n      summary: Update the status of Centrals on an agent cluster\n\n  \"/api/rhacs/v1/agent-clusters/{id}/centrals\":\n    get:\n      tags:\n        - Agent Clusters\n      parameters:\n        - $ref: \"fleet-manager.yaml#/components/parameters/id\"\n      responses:\n        \"200\":\n          description: The list of the ManagedCentrals for the specified agent cluster\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/ManagedCentralList\"\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                400InvalidIdExample:\n                  $ref: \"#/components/examples/400InvalidIdExample\"\n          description: id value is not valid\n        \"404\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                404Example:\n                  $ref: \"fleet-manager.yaml#/components/examples/404Example\"\n          # This is deliberate to hide the endpoints for unauthorised users\n          description: Auth token is not valid.\n      security:\n        - Bearer: []\n      operationId: getCentrals\n      summary: Get the list of ManagedaCentrals for the specified agent cluster\n\n  \"/api/rhacs/v1/agent-clusters/{id}\":\n    get:\n      tags:\n        - Agent Clusters\n      parameters:\n        - $ref: \"fleet-manager.yaml#/components/parameters/id\"\n      responses:\n        \"200\":\n          description: The Data Plane Cluster Agent configuration\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/DataplaneClusterAgentConfig\"\n        \"400\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                400InvalidIdExample:\n                  $ref: \"#/components/examples/400InvalidIdExample\"\n          description: id value is not valid\n        \"404\":\n          content:\n            application/json:\n              schema:\n                $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n              examples:\n                404Example:\n                  $ref: \"fleet-manager.yaml#/components/examples/404Example\"\n          # This is deliberate to hide the endpoints for unauthorised users\n          description: Auth token is not valid.\n      security:\n        - Bearer: []\n      operationId: getDataPlaneClusterAgentConfig\n      summary: Get the data plane cluster agent configuration\n\ncomponents:\n  schemas:\n    ListReference:\n      required:\n        - kind\n        - items\n      type: object\n      properties:\n        kind:\n          type: string\n\n    PrivateObjectReference:\n      type: object\n      properties:\n        id:\n          type: string\n        kind:\n          type: string\n\n    ResourceList:\n      type: object\n      additionalProperties:\n        type: string\n\n    ResourceRequirements:\n      type: object\n      properties:\n        requests:\n          $ref: \"#/components/schemas/ResourceList\"\n        limits:\n          $ref: \"#/components/schemas/ResourceList\"\n\n    ManagedCentralVersions:\n      type: object\n      properties:\n        central:\n          type: string\n        centralOperator:\n          type: string\n\n    ManagedCentral:\n      allOf:\n        - $ref: \"#/components/schemas/PrivateObjectReference\"\n        - type: object\n          properties:\n            metadata:\n              type: object\n              properties:\n                name:\n                  type: string\n                namespace:\n                  type: string\n                annotations:\n                  type: object\n                  required:\n                    - mas/placementId\n                    - mas/id\n                  properties:\n                    mas/id:\n                      type: string\n                    mas/placementId:\n                      type: string\n                deletionTimestamp:\n                  type: string\n            spec:\n              type: object\n              properties:\n                owners:\n                  type: array\n                  items:\n                    type: string\n                auth:\n                  type: object\n                  properties:\n                    clientSecret:\n                      type: string\n                    clientId:\n                      type: string\n                    ownerUserId:\n                      type: string\n                    ownerOrgId:\n                      type: string\n                    issuer:\n                      type: string\n                uiEndpoint:\n                  type: object\n                  description: 'Handles GUI/CLI/API connections'\n                  properties:\n                    host:\n                      type: string\n                    tls:\n                      type: object\n                      properties:\n                        cert:\n                          type: string\n                        key:\n                          type: string\n                dataEndpoint:\n                  type: object\n                  description: 'Handles Sensor connections'\n                  properties:\n                    host:\n                      type: string\n                versions:\n                  $ref: \"#/components/schemas/ManagedCentralVersions\"\n                central:\n                  type: object\n                  properties:\n                    resources:\n                      $ref: \"#/components/schemas/ResourceRequirements\"\n                scanner:\n                  type: object\n                  properties:\n                    analyzer:\n                      type: object\n                      properties:\n                        scaling:\n                          type: object\n                          properties:\n                            autoScaling:\n                              type: string\n                            replicas:\n                              type: integer\n                              format: int32\n                              minimum: 1\n                            minReplicas:\n                              type: integer\n                              format: int32\n                              minimum: 1\n                            maxReplicas:\n                              type: integer\n                              format: int32\n                              minimum: 1\n                        resources:\n                          $ref: \"#/components/schemas/ResourceRequirements\"\n                    db:\n                      type: object\n                      properties:\n                        host:\n                          type: string\n                        resources:\n                          $ref: \"#/components/schemas/ResourceRequirements\"\n            requestStatus:\n              type: string\n\n    ManagedCentralList:\n      description: \u003e-\n        A list of ManagedCentral\n      allOf:\n        - $ref: \"#/components/schemas/ListReference\"\n        - type: object\n          example:\n            kind: \"ManagedCentralList\"\n            items:\n              $ref: \"#/components/examples/ManagedCentralExample\"\n          properties:\n            items:\n              type: array\n              items:\n                allOf:\n                  - $ref: \"#/components/schemas/ManagedCentral\"\n\n    DataPlaneClusterUpdateStatusRequest:\n      # TODO are there any fields that should be required?\n      # TODO are there any fields that should be nullable? (this is, a pointer in the resulting generated Go code)\n      description: \"Schema for the request to update a data plane cluster's status\"\n      type: object\n      properties:\n        conditions:\n          description: \"The cluster data plane conditions\"\n          type: array\n          items:\n            type: object\n            properties:\n              type:\n                type: string\n              reason:\n                type: string\n              message:\n                type: string\n              status:\n                type: string\n        centralOperator:\n          type: array\n          items:\n            type: object\n            properties:\n              ready:\n                type: boolean\n              version:\n                type: string\n              centralVersions:\n                type: array\n                items:\n                  type: string\n            required:\n              - ready\n              - version\n    DataPlaneCentralStatus:\n      description: \"Schema of the status object for a Central\"\n      type: object\n      properties:\n        conditions:\n          description: \"The status conditions of a Central\"\n          type: array\n          items:\n            type: object\n            properties:\n              type:\n                type: string\n              reason:\n                type: string\n              message:\n                type: string\n              status:\n                type: string\n        versions:\n          description: \"Version information related to a Central\"\n          type: object\n          properties:\n            central:\n              type: string\n            centralOperator:\n              type: string\n        routes:\n          description: \"Routes created for a Central\"\n          type: array\n          items:\n            type: object\n            properties:\n              domain:\n                type: string\n              router:\n                type: string\n      example:\n        $ref: \"#/components/examples/DataPlaneCentralStatusRequestExample\"\n\n    DataPlaneCentralStatusUpdateRequest:\n      description: \"Schema for the request to update the statuses of Central clusters from data plane\"\n      type: object\n      additionalProperties:\n        $ref: \"#/components/schemas/DataPlaneCentralStatus\"\n\n    DataplaneClusterAgentConfig:\n      description: \"Configuration for the data plane cluster agent\"\n      type: object\n      properties:\n        spec:\n          description: \"Data plane cluster agent spec\"\n          type: object\n          properties:\n            observability:\n              description: \"Observability configurations\"\n              type: object\n              properties:\n                accessToken:\n                  type: string\n                  nullable: true\n                channel:\n                  type: string\n                repository:\n                  type: string\n                tag:\n                  type: string\n\n    WatchEvent:\n      required:\n        - type\n      type: object\n      properties:\n        type:\n          type: string\n        error:\n          nullable: true\n          $ref: \"fleet-manager.yaml#/components/schemas/Error\"\n        object:\n          type: object\n          nullable: true\n\n  securitySchemes:\n    Bearer:\n      scheme: bearer\n      bearerFormat: JWT\n      type: http\n\n  examples:\n    ManagedCentralExample:\n      value:\n        id: \"a3a9c5b9-0283-4ff8-9b9e-da2209da17c3\"\n        kind: \"ManagedCentral\"\n        metadata:\n          name: \"example-central\"\n          namespace: \"example-central-a3a9c5b9-0283-4ff8-9b9e-da2209da17c3\"\n          annotations:\n            mas/id: \"a3a9c5b9-0283-4ff8-9b9e-da2209da17c3\"\n            mas/placementId: \"\"\n          deletionTimestamp: \"2022-06-01T11:04:09Z\"\n        spec:\n          owners: [\n            \"central-owner1\"\n          ]\n          auth:\n            clientSecret: \"\"\n            clientId: \"client-id\"\n            ownerUserId: \"f:ac4bcdb5-1fb1-41c5-9323-349698b9b757:username\"\n            orgId: \"13442309\"\n          endpoint:\n            host: \"example-central--rfpsqbvq-em-u-u-z--ymjcwac.example.central.com\"\n            tls:\n              cert: \"\"\n              key: \"\"\n          versions:\n            central: 2.7.0\n            centralOperator: 0.21.2\n          central:\n            resources:\n              requests:\n                cpu: 250m\n                memory: 250Mi\n              limtis:\n                cpu: 1000m\n                memory: 4Gi\n          scanner:\n            analyzer:\n              scaling:\n                autoScaling: enabled\n                replicas: 1\n                minReplicas: 1\n                maxReplicas: 3\n              resources:\n                requests:\n                  cpu: 250m\n                  memory: 100Mi\n                limtis:\n                  cpu: 500m\n                  memory: 2500Mi\n          db:\n            host: dbhost.rhacs-psql-instance\n    DataPlaneCentralStatusRequestExample:\n      value:\n        conditions:\n          - type: Ready\n            reason: CentralInstanceReady\n            message: installing\n            status: \"False\"\n            lastTransitionTime: \"2018-01-01T00:00:00Z\"\n        versions:\n          central: 2.4.1\n          centralOperator: 0.21.2\n    400InvalidIdExample:\n      value:\n        id: \"21\"\n        kind: \"Error\"\n        href: \"/api/rhacs/v1/errors/21\"\n        code: \"RHACS-MGMT-21\"\n        reason: \"Bad request\"\n        operation_id: \"1lWDGuybIrEnxrAem724gqkkiDv\"\n",
			"canonicalURL": "/github.com/stackrox/acs-fleet-manager@aab298397d9907c4fdefc9d7bc2e0be4d6ca13b6/-/blob/openapi/fleet-manager-private.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/stackrox/acs-fleet-manager/blob/aab298397d9907c4fdefc9d7bc2e0be4d6ca13b6/openapi/fleet-manager-private.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"WatchEvent\": parse schema: property \"error\": parse schema: at 1:6260: external \"fleet-manager.yaml\": get: file: local file reference is not allowed"
}