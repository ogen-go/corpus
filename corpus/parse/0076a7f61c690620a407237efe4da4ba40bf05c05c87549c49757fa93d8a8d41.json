{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/interledger/rafiki"
		},
		"file": {
			"name": "id-provider.yaml",
			"size": 0,
			"path": "packages/auth/src/openapi/id-provider.yaml",
			"byteSize": 6389,
			"content": "openapi: 3.1.0\ninfo:\n  title: Rafiki Authorization Server - Identity Provider Connection\n  version: '1.0'\n  license:\n    name: Apache 2.0\n    identifier: Apache-2.0\n  summary: Rafiki Authorization Server - Identity Provider Connection\n  description: 'The Open Payments API is secured via [GNAP](https://datatracker.ietf.org/doc/html/draft-ietf-gnap-core-protocol). This specification describes the connection between the Rafiki Open Payments Authorization Server and an Identity Provider.'\n  contact:\n    email: tech@interledger.org\nservers:\n  - url: 'https://openpayments.guide/auth'\ntags:\n  - name: front-channel\n    description: Redirect URLs\n  - name: back-channel\n    description: Endpoints to request or modify grant information\npaths:\n  '/interact/{id}/{nonce}':\n    get:\n      summary: Start user interaction\n      responses:\n        '302':\n          content:\n            text/html:\n              schema:\n                type: string\n                nullable: true\n          description: Found\n          headers:\n            Location:\n              schema:\n                type: string\n              description: Identity server endpoint\n            Cookie:\n              schema:\n                type: string\n              description: Interaction id\n        '401':\n          description: Unauthorized\n      operationId: get-interact\n      parameters:\n        - schema:\n            type: string\n          name: id\n          in: path\n          required: true\n          description: Interaction id\n        - schema:\n            type: string\n          in: path\n          name: nonce\n          required: true\n          description: 'Unique value to be used in the calculation of the \"hash\" query parameter sent to the callback URI, must be sufficiently random to be unguessable by an attacker.  MUST be generated by the client instance as a unique value for this request.'\n        - schema:\n            type: string\n          name: clientName\n          in: path\n          required: true\n          description: 'Name of the client that created the grant'\n        - schema:\n            type: string\n          name: clientUri\n          in: path\n          required: true\n          description: 'URI of the client that created the grant'\n      description: 'To start the user interaction for grant approval, this endpoint redirects the user to an Identity provider endpoint for authentication.'\n      tags:\n        - front-channel\n  '/interact/{id}/{nonce}/finish':\n    get:\n      summary: Finish user interaction\n      operationId: get-finish-interaction\n      responses:\n        '302':\n          content:\n            text/html:\n              schema:\n                type: string\n                nullable: true\n          description: Found\n          headers:\n            Location:\n              schema:\n                type: string\n              description: Client finish endpoint\n        '401':\n          description: Unauthorized\n      description: \"To finish the user interaction for grant approval, this endpoint redirects the user to the client's finish url.\"\n      parameters:\n        - schema:\n            type: string\n          in: path\n          name: id\n          required: true\n          description: Interaction id\n        - schema:\n            type: string\n          in: path\n          name: nonce\n          required: true\n          description: 'Unique value to be used in the calculation of the \"hash\" query parameter sent to the callback URI, must be sufficiently random to be unguessable by an attacker.  MUST be generated by the client instance as a unique value for this request.'\n      tags:\n        - front-channel\n  '/grant/{id}/{nonce}':\n    get:\n      summary: Lookup Grant\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  access:\n                    $ref: ./schemas.yaml#/components/schemas/access\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      operationId: get-grant\n      description: |\n        The Identity Provider uses this endpoint to requests the grant details associated with the provided `interactId` on the front-channel. It will then display those details to the user to either accept or deny the grant.\n      parameters:\n        - schema:\n            type: string\n          name: id\n          in: path\n          required: true\n          description: Interaction id\n        - schema:\n            type: string\n          in: path\n          name: nonce\n          required: true\n          description: 'Unique value to be used in the calculation of the \"hash\" query parameter sent to the callback URI, must be sufficiently random to be unguessable by an attacker.  MUST be generated by the client instance as a unique value for this request.'\n      tags:\n        - back-channel\n  '/grant/{id}/{nonce}/{choice}':\n    post:\n      summary: Accept or reject a grant\n      operationId: post-grant-choice\n      responses:\n        '202':\n          description: Accepted\n        '400':\n          description: Not Found\n        '401':\n          description: Unauthorized\n        '404':\n          description: Not Found\n      description: The Identity Provider uses this endpoint to submit the user's choice regarding accepting or rejecting a grant to Authorization Server.\n      parameters:\n        - schema:\n            type: string\n          name: id\n          in: path\n          required: true\n          description: Interaction id\n        - schema:\n            type: string\n          in: path\n          name: nonce\n          required: true\n          description: 'Unique value to be used in the calculation of the \"hash\" query parameter sent to the callback URI, must be sufficiently random to be unguessable by an attacker.  MUST be generated by the client instance as a unique value for this request.'\n        - schema:\n            type: string\n            enum:\n              - accept\n              - reject\n          in: path\n          name: choice\n          required: true\n          description: Indicates the consent choice for a grant (i.e. acceptance or rejection)\n      tags:\n        - back-channel\ncomponents:\n  schemas: {}\n  securitySchemes:\n    GNAP:\n      name: Authorization\n      type: apiKey\n      in: header\nsecurity:\n  - GNAP: []\n",
			"canonicalURL": "/github.com/interledger/rafiki@62186dc6b4c92e0c66ceafe65e10a42088a5d6a4/-/blob/packages/auth/src/openapi/id-provider.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/interledger/rafiki/blob/62186dc6b4c92e0c66ceafe65e10a42088a5d6a4/packages/auth/src/openapi/id-provider.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse path items: path \"/grant/{id}/{nonce}\": get: operation \"get-grant\": responses: 200: content: application/json: schema: parse schema: property \"access\": at packages/auth/src/openapi/id-provider.yaml:118:27: $ref: resolve \"./schemas.yaml#/components/schemas/access\": resolve: unexpected type \"!!str\""
}