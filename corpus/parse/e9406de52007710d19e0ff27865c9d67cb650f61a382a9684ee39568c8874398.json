{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/oxidecomputer/omicron"
		},
		"file": {
			"name": "sled-agent.json",
			"size": 0,
			"path": "openapi/sled-agent.json",
			"byteSize": 30149,
			"content": "{\n  \"openapi\": \"3.0.3\",\n  \"info\": {\n    \"title\": \"Oxide Sled Agent API\",\n    \"description\": \"API for interacting with individual sleds\",\n    \"contact\": {\n      \"url\": \"https://oxide.computer\",\n      \"email\": \"api@oxide.computer\"\n    },\n    \"version\": \"0.0.1\"\n  },\n  \"paths\": {\n    \"/disks/{disk_id}\": {\n      \"put\": {\n        \"operationId\": \"disk_put\",\n        \"parameters\": [\n          {\n            \"in\": \"path\",\n            \"name\": \"disk_id\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\",\n              \"format\": \"uuid\"\n            },\n            \"style\": \"simple\"\n          }\n        ],\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/DiskEnsureBody\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"successful operation\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/DiskRuntimeState\"\n                }\n              }\n            }\n          },\n          \"4XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          },\n          \"5XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          }\n        }\n      }\n    },\n    \"/filesystem\": {\n      \"put\": {\n        \"operationId\": \"filesystem_put\",\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/DatasetEnsureBody\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"resource updated\"\n          },\n          \"4XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          },\n          \"5XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          }\n        }\n      }\n    },\n    \"/instances/{instance_id}\": {\n      \"put\": {\n        \"operationId\": \"instance_put\",\n        \"parameters\": [\n          {\n            \"in\": \"path\",\n            \"name\": \"instance_id\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\",\n              \"format\": \"uuid\"\n            },\n            \"style\": \"simple\"\n          }\n        ],\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/InstanceEnsureBody\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"successful operation\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/InstanceRuntimeState\"\n                }\n              }\n            }\n          },\n          \"4XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          },\n          \"5XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          }\n        }\n      }\n    },\n    \"/services\": {\n      \"put\": {\n        \"operationId\": \"services_put\",\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/ServiceEnsureBody\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"resource updated\"\n          },\n          \"4XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          },\n          \"5XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          }\n        }\n      }\n    },\n    \"/update\": {\n      \"post\": {\n        \"operationId\": \"update_artifact\",\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/UpdateArtifact\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"resource updated\"\n          },\n          \"4XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          },\n          \"5XX\": {\n            \"$ref\": \"#/components/responses/Error\"\n          }\n        }\n      }\n    }\n  },\n  \"components\": {\n    \"responses\": {\n      \"Error\": {\n        \"description\": \"Error\",\n        \"content\": {\n          \"application/json\": {\n            \"schema\": {\n              \"$ref\": \"#/components/schemas/Error\"\n            }\n          }\n        }\n      }\n    },\n    \"schemas\": {\n      \"ByteCount\": {\n        \"description\": \"A count of bytes, typically used either for memory or storage capacity\\n\\nThe maximum supported byte count is [`i64::MAX`].  This makes it somewhat inconvenient to define constructors: a u32 constructor can be infallible, but an i64 constructor can fail (if the value is negative) and a u64 constructor can fail (if the value is larger than i64::MAX).  We provide all of these for consumers' convenience.\",\n        \"type\": \"integer\",\n        \"format\": \"uint64\",\n        \"minimum\": 0\n      },\n      \"CrucibleOpts\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"cert_pem\": {\n            \"nullable\": true,\n            \"type\": \"string\"\n          },\n          \"control\": {\n            \"nullable\": true,\n            \"type\": \"string\"\n          },\n          \"key\": {\n            \"nullable\": true,\n            \"type\": \"string\"\n          },\n          \"key_pem\": {\n            \"nullable\": true,\n            \"type\": \"string\"\n          },\n          \"lossy\": {\n            \"type\": \"boolean\"\n          },\n          \"root_cert_pem\": {\n            \"nullable\": true,\n            \"type\": \"string\"\n          },\n          \"target\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"required\": [\n          \"lossy\",\n          \"target\"\n        ]\n      },\n      \"DatasetEnsureBody\": {\n        \"description\": \"Used to request a new partition kind exists within a zpool.\\n\\nMany partition types are associated with services that will be instantiated when the partition is detected.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"address\": {\n            \"type\": \"string\"\n          },\n          \"partition_kind\": {\n            \"$ref\": \"#/components/schemas/DatasetKind\"\n          },\n          \"zpool_uuid\": {\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          }\n        },\n        \"required\": [\n          \"address\",\n          \"partition_kind\",\n          \"zpool_uuid\"\n        ]\n      },\n      \"DatasetKind\": {\n        \"description\": \"The type of a dataset, and an auxiliary information necessary to successfully launch a zone managing the associated data.\",\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"all_addresses\": {\n                \"description\": \"The addresses of all nodes within the cluster.\",\n                \"type\": \"array\",\n                \"items\": {\n                  \"type\": \"string\"\n                }\n              },\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"cockroach_db\"\n                ]\n              }\n            },\n            \"required\": [\n              \"all_addresses\",\n              \"type\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"crucible\"\n                ]\n              }\n            },\n            \"required\": [\n              \"type\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"clickhouse\"\n                ]\n              }\n            },\n            \"required\": [\n              \"type\"\n            ]\n          }\n        ]\n      },\n      \"DiskEnsureBody\": {\n        \"description\": \"Sent from to a sled agent to establish the runtime state of a Disk\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"initial_runtime\": {\n            \"description\": \"Last runtime state of the Disk known to Nexus (used if the agent has never seen this Disk before).\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/DiskRuntimeState\"\n              }\n            ]\n          },\n          \"target\": {\n            \"description\": \"requested runtime state of the Disk\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/DiskStateRequested\"\n              }\n            ]\n          }\n        },\n        \"required\": [\n          \"initial_runtime\",\n          \"target\"\n        ]\n      },\n      \"DiskRequest\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"device\": {\n            \"type\": \"string\"\n          },\n          \"gen\": {\n            \"type\": \"integer\",\n            \"format\": \"uint64\",\n            \"minimum\": 0\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"read_only\": {\n            \"type\": \"boolean\"\n          },\n          \"slot\": {\n            \"$ref\": \"#/components/schemas/Slot\"\n          },\n          \"volume_construction_request\": {\n            \"$ref\": \"#/components/schemas/VolumeConstructionRequest\"\n          }\n        },\n        \"required\": [\n          \"device\",\n          \"gen\",\n          \"name\",\n          \"read_only\",\n          \"slot\",\n          \"volume_construction_request\"\n        ]\n      },\n      \"DiskRuntimeState\": {\n        \"description\": \"Runtime state of the Disk, which includes its attach state and some minimal metadata\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"disk_state\": {\n            \"description\": \"runtime state of the Disk\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/DiskState\"\n              }\n            ]\n          },\n          \"gen\": {\n            \"description\": \"generation number for this state\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/Generation\"\n              }\n            ]\n          },\n          \"time_updated\": {\n            \"description\": \"timestamp for this information\",\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          }\n        },\n        \"required\": [\n          \"disk_state\",\n          \"gen\",\n          \"time_updated\"\n        ]\n      },\n      \"DiskState\": {\n        \"description\": \"State of a Disk (primarily: attached or not)\",\n        \"oneOf\": [\n          {\n            \"description\": \"Disk is being initialized\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"creating\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk is ready but detached from any Instance\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"detached\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk is being attached to the given Instance\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"instance\": {\n                \"type\": \"string\",\n                \"format\": \"uuid\"\n              },\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"attaching\"\n                ]\n              }\n            },\n            \"required\": [\n              \"instance\",\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk is attached to the given Instance\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"instance\": {\n                \"type\": \"string\",\n                \"format\": \"uuid\"\n              },\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"attached\"\n                ]\n              }\n            },\n            \"required\": [\n              \"instance\",\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk is being detached from the given Instance\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"instance\": {\n                \"type\": \"string\",\n                \"format\": \"uuid\"\n              },\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"detaching\"\n                ]\n              }\n            },\n            \"required\": [\n              \"instance\",\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk has been destroyed\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"destroyed\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          },\n          {\n            \"description\": \"Disk is unavailable\",\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"faulted\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          }\n        ]\n      },\n      \"DiskStateRequested\": {\n        \"description\": \"Used to request a Disk state change\",\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"detached\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"instance\": {\n                \"type\": \"string\",\n                \"format\": \"uuid\"\n              },\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"attached\"\n                ]\n              }\n            },\n            \"required\": [\n              \"instance\",\n              \"state\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"destroyed\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"state\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"faulted\"\n                ]\n              }\n            },\n            \"required\": [\n              \"state\"\n            ]\n          }\n        ]\n      },\n      \"Error\": {\n        \"description\": \"Error information from a response.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"error_code\": {\n            \"type\": \"string\"\n          },\n          \"message\": {\n            \"type\": \"string\"\n          },\n          \"request_id\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"message\",\n          \"request_id\"\n        ]\n      },\n      \"Generation\": {\n        \"description\": \"Generation numbers stored in the database, used for optimistic concurrency control\",\n        \"type\": \"integer\",\n        \"format\": \"uint64\",\n        \"minimum\": 0\n      },\n      \"InstanceCpuCount\": {\n        \"description\": \"The number of CPUs in an Instance\",\n        \"type\": \"integer\",\n        \"format\": \"uint16\",\n        \"minimum\": 0\n      },\n      \"InstanceEnsureBody\": {\n        \"description\": \"Sent to a sled agent to establish the runtime state of an Instance\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"initial\": {\n            \"description\": \"Last runtime state of the Instance known to Nexus (used if the agent has never seen this Instance before).\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceHardware\"\n              }\n            ]\n          },\n          \"migrate\": {\n            \"nullable\": true,\n            \"description\": \"If we're migrating this instance, the details needed to drive the migration\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceMigrateParams\"\n              }\n            ]\n          },\n          \"target\": {\n            \"description\": \"requested runtime state of the Instance\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceRuntimeStateRequested\"\n              }\n            ]\n          }\n        },\n        \"required\": [\n          \"initial\",\n          \"target\"\n        ]\n      },\n      \"InstanceHardware\": {\n        \"description\": \"Describes the instance hardware.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"disks\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/DiskRequest\"\n            }\n          },\n          \"nics\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/NetworkInterface\"\n            }\n          },\n          \"runtime\": {\n            \"$ref\": \"#/components/schemas/InstanceRuntimeState\"\n          }\n        },\n        \"required\": [\n          \"disks\",\n          \"nics\",\n          \"runtime\"\n        ]\n      },\n      \"InstanceMigrateParams\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"src_propolis_addr\": {\n            \"type\": \"string\"\n          },\n          \"src_propolis_uuid\": {\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          }\n        },\n        \"required\": [\n          \"src_propolis_addr\",\n          \"src_propolis_uuid\"\n        ]\n      },\n      \"InstanceRuntimeState\": {\n        \"description\": \"Runtime state of the Instance, including the actual running state and minimal metadata\\n\\nThis state is owned by the sled agent running that Instance.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"dst_propolis_uuid\": {\n            \"nullable\": true,\n            \"description\": \"the target propolis-server during a migration of this Instance\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"gen\": {\n            \"description\": \"generation number for this state\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/Generation\"\n              }\n            ]\n          },\n          \"hostname\": {\n            \"description\": \"RFC1035-compliant hostname for the Instance.\",\n            \"type\": \"string\"\n          },\n          \"memory\": {\n            \"description\": \"memory allocated for this Instance\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/ByteCount\"\n              }\n            ]\n          },\n          \"migration_uuid\": {\n            \"nullable\": true,\n            \"description\": \"migration id (if one in process)\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"ncpus\": {\n            \"description\": \"number of CPUs allocated for this Instance\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceCpuCount\"\n              }\n            ]\n          },\n          \"propolis_addr\": {\n            \"nullable\": true,\n            \"description\": \"address of propolis-server running this Instance\",\n            \"type\": \"string\"\n          },\n          \"propolis_uuid\": {\n            \"description\": \"which propolis-server is running this Instance\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"run_state\": {\n            \"description\": \"runtime state of the Instance\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceState\"\n              }\n            ]\n          },\n          \"sled_uuid\": {\n            \"description\": \"which sled is running this Instance\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"time_updated\": {\n            \"description\": \"timestamp for this information\",\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          }\n        },\n        \"required\": [\n          \"gen\",\n          \"hostname\",\n          \"memory\",\n          \"ncpus\",\n          \"propolis_uuid\",\n          \"run_state\",\n          \"sled_uuid\",\n          \"time_updated\"\n        ]\n      },\n      \"InstanceRuntimeStateMigrateParams\": {\n        \"description\": \"Instance runtime state to update for a migration.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"dst_propolis_id\": {\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"migration_id\": {\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          }\n        },\n        \"required\": [\n          \"dst_propolis_id\",\n          \"migration_id\"\n        ]\n      },\n      \"InstanceRuntimeStateRequested\": {\n        \"description\": \"Used to request an Instance state change from a sled agent\\n\\nRight now, it's only the run state and migration id that can be changed, though we might want to support changing properties like \\\"ncpus\\\" here.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"migration_params\": {\n            \"nullable\": true,\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/InstanceRuntimeStateMigrateParams\"\n              }\n            ]\n          },\n          \"run_state\": {\n            \"$ref\": \"#/components/schemas/InstanceStateRequested\"\n          }\n        },\n        \"required\": [\n          \"run_state\"\n        ]\n      },\n      \"InstanceState\": {\n        \"description\": \"Running state of an Instance (primarily: booted or stopped)\\n\\nThis typically reflects whether it's starting, running, stopping, or stopped, but also includes states related to the Instance's lifecycle\",\n        \"type\": \"string\",\n        \"enum\": [\n          \"creating\",\n          \"starting\",\n          \"running\",\n          \"stopping\",\n          \"stopped\",\n          \"rebooting\",\n          \"migrating\",\n          \"repairing\",\n          \"failed\",\n          \"destroyed\"\n        ]\n      },\n      \"InstanceStateRequested\": {\n        \"description\": \"Requestable running state of an Instance.\\n\\nA subset of [`external::InstanceState`].\",\n        \"type\": \"string\",\n        \"enum\": [\n          \"running\",\n          \"stopped\",\n          \"reboot\",\n          \"migrating\",\n          \"destroyed\"\n        ]\n      },\n      \"MacAddr\": {\n        \"title\": \"A MAC address\",\n        \"description\": \"A Media Access Control address, in EUI-48 format\",\n        \"type\": \"string\",\n        \"pattern\": \"^([0-9a-fA-F]{2}:){5}[0-9a-fA-F]{2}$\",\n        \"minLength\": 17,\n        \"maxLength\": 17\n      },\n      \"Name\": {\n        \"title\": \"A name used in the API\",\n        \"description\": \"Names must begin with a lower case ASCII letter, be composed exclusively of lowercase ASCII, uppercase ASCII, numbers, and '-', and may not end with a '-'.\",\n        \"type\": \"string\",\n        \"pattern\": \"[a-z](|[a-zA-Z0-9-]*[a-zA-Z0-9])\",\n        \"maxLength\": 63\n      },\n      \"NetworkInterface\": {\n        \"description\": \"A `NetworkInterface` represents a virtual network interface device.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"description\": {\n            \"description\": \"human-readable free-form text about a resource\",\n            \"type\": \"string\"\n          },\n          \"id\": {\n            \"description\": \"unique, immutable, system-controlled identifier for each resource\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"instance_id\": {\n            \"description\": \"The Instance to which the interface belongs.\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"ip\": {\n            \"description\": \"The IP address assigned to this interface.\",\n            \"type\": \"string\",\n            \"format\": \"ip\"\n          },\n          \"mac\": {\n            \"description\": \"The MAC address assigned to this interface.\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/MacAddr\"\n              }\n            ]\n          },\n          \"name\": {\n            \"description\": \"unique, mutable, user-controlled identifier for each resource\",\n            \"allOf\": [\n              {\n                \"$ref\": \"#/components/schemas/Name\"\n              }\n            ]\n          },\n          \"subnet_id\": {\n            \"description\": \"The subnet to which the interface belongs.\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          },\n          \"time_created\": {\n            \"description\": \"timestamp when this resource was created\",\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          },\n          \"time_modified\": {\n            \"description\": \"timestamp when this resource was last modified\",\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          },\n          \"vpc_id\": {\n            \"description\": \"The VPC to which the interface belongs.\",\n            \"type\": \"string\",\n            \"format\": \"uuid\"\n          }\n        },\n        \"required\": [\n          \"description\",\n          \"id\",\n          \"instance_id\",\n          \"ip\",\n          \"mac\",\n          \"name\",\n          \"subnet_id\",\n          \"time_created\",\n          \"time_modified\",\n          \"vpc_id\"\n        ]\n      },\n      \"ServiceEnsureBody\": {\n        \"description\": \"Used to request that the Sled initialize certain services on initialization.\\n\\nThis may be used to record that certain sleds are responsible for launching services which may not be associated with a partition, such as Nexus.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"services\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/ServiceRequest\"\n            }\n          }\n        },\n        \"required\": [\n          \"services\"\n        ]\n      },\n      \"ServiceRequest\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"addresses\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"name\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"addresses\",\n          \"name\"\n        ]\n      },\n      \"Slot\": {\n        \"description\": \"A stable index which is translated by Propolis into a PCI BDF, visible to the guest.\",\n        \"type\": \"integer\",\n        \"format\": \"uint8\",\n        \"minimum\": 0\n      },\n      \"UpdateArtifact\": {\n        \"description\": \"Description of a single update artifact.\",\n        \"type\": \"object\",\n        \"properties\": {\n          \"kind\": {\n            \"$ref\": \"#/components/schemas/UpdateArtifactKind\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"version\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\"\n          }\n        },\n        \"required\": [\n          \"kind\",\n          \"name\",\n          \"version\"\n        ]\n      },\n      \"UpdateArtifactKind\": {\n        \"description\": \"Kinds of update artifacts, as used by Nexus to determine what updates are available and by sled-agent to determine how to apply an update when asked.\",\n        \"type\": \"string\",\n        \"enum\": [\n          \"zone\"\n        ]\n      },\n      \"VolumeConstructionRequest\": {\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"block_size\": {\n                \"type\": \"integer\",\n                \"format\": \"uint64\",\n                \"minimum\": 0\n              },\n              \"read_only_parent\": {\n                \"nullable\": true,\n                \"allOf\": [\n                  {\n                    \"$ref\": \"#/components/schemas/VolumeConstructionRequest\"\n                  }\n                ]\n              },\n              \"sub_volumes\": {\n                \"type\": \"array\",\n                \"items\": {\n                  \"$ref\": \"#/components/schemas/VolumeConstructionRequest\"\n                }\n              },\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"Volume\"\n                ]\n              }\n            },\n            \"required\": [\n              \"block_size\",\n              \"sub_volumes\",\n              \"type\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"block_size\": {\n                \"type\": \"integer\",\n                \"format\": \"uint64\",\n                \"minimum\": 0\n              },\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"Url\"\n                ]\n              },\n              \"url\": {\n                \"type\": \"string\"\n              }\n            },\n            \"required\": [\n              \"block_size\",\n              \"type\",\n              \"url\"\n            ]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"block_size\": {\n                \"type\": \"integer\",\n                \"format\": \"uint64\",\n                \"minimum\": 0\n              },\n              \"gen\": {\n                \"type\": \"integer\",\n                \"format\": \"uint64\",\n                \"minimum\": 0\n              },\n              \"opts\": {\n                \"$ref\": \"#/components/schemas/CrucibleOpts\"\n              },\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"Region\"\n                ]\n              }\n            },\n            \"required\": [\n              \"block_size\",\n              \"gen\",\n              \"opts\",\n              \"type\"\n            ]\n          }\n        ]\n      }\n    }\n  }\n}"
		}
	},
	"Error": "parse: parse spec: paths: /instances/{instance_id}: put: operation \"instance_put\": requestBody: content: \"application/json\": parse schema: parse schema: resolve \"#/components/schemas/InstanceEnsureBody\": parse schema: property \"initial\": parse schema: allOf: [0]: parse schema: resolve \"#/components/schemas/InstanceHardware\": parse schema: property \"disks\": parse schema: item: parse schema: resolve \"#/components/schemas/DiskRequest\": parse schema: property \"volume_construction_request\": parse schema: resolve \"#/components/schemas/VolumeConstructionRequest\": parse schema: oneOf: [0]: parse schema: property \"read_only_parent\": parse schema: allOf: [0]: parse schema: resolve \"#/components/schemas/VolumeConstructionRequest\": infinite recursion"
}