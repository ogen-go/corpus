{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/NHSDigital/e-referrals-service-api"
		},
		"file": {
			"name": "e-referrals-service-api.yaml",
			"size": 0,
			"path": "specification/e-referrals-service-api.yaml",
			"byteSize": 22394,
			"content": "# This is an OpenAPI Specification (https://swagger.io/specification/)\n# for the e-Referral Service API\n# owned by NHS Digital (https://digital.nhs.uk/)\nopenapi: 3.0.0\nx-nhsd-api-platform:\n  meta:\n    service_name: e-referrals-service-api\n    short_service_name: ers\n    service_base_path: referrals\n    product_display_name: e-Referrals-Service\n    product_description: 'The NHS e-RS vision is to enable local innovation and adoption of paperless referrals. To support this vision NHS Digital have created a set of APIs which provide a well-defined, simple to use data interface to the NHS e-Referral Service (e-RS). See https://developer.nhs.uk/apis/e-Referrals/index.html'\n    pipeline_name_prefix: E-Referrals-Service\ninfo:\n  version: 0.0.1\n  title: e-Referrals Service\n  description: |\n    ## Overview\n    Use this API to create paperless referrals from primary to secondary care with the [e-Referral Service (e-RS)](https://digital.nhs.uk/services/e-referral-service).\n\n    **As a primary care referrer, you can:**\n\n      -\tcreate a new e-referral\n      - search for relevant patient services to create a shortlist\n      -\taccess existing e-referrals\n      -\tcreate a triage request for the Referral Assessment Service (RAS)\n      -\tupload and manage a patient letter or attachments, linking them to a referral\n      -\tretrieve appointment slots and book appointments\n      -\tdefer a booking to a provider if an appointment slot is unavailable\n\n    **As a secondary care provider, you can:**\n\n      -\taccess referrals as a worklist\n      -\tretrieve non-clinical information (meta-data) about the referral\n      -\tretrieve attachments which are linked to a referral or triage (RAS) request\n      -\tretrieve clinical information which has been provided by a referrer\n      -\taccept or reject a referral request\n      -\tretrieve Advice \u0026 Guidance (A\u0026G) conversations and send responses\n      -\tconvert Advice \u0026 Guidance (A\u0026G) conversations into a referral\n\n    **You cannot use this API to:**\n\n      -\tget patient details – instead, use the [[HYPERLINK_PDS]]\n\n    **You can access the following data:**\n\n      -\treferral attachments\n      -\treferral letters\n      -\tappointment slots\n      -\tworklists for referral requests\n      -\tworklists for triage (RAS) requests\n      -\tworklists for Advice and Guidance (A\u0026G) requests\n      -\tconversation histories for Advice and Guidance (A\u0026G) requests\n\n\n    ### Access modes\n    \n    This API has two access modes:\n\n    | Access mode                   | Authentication via    | Functions               | Availability                    |\n    | ----------------------------- | -------------------------- | ----------------------- | ------------------------------- |\n    | Application-restricted, unattended access | [Signed JWT](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/application-restricted-restful-apis-signed-jwt-authentication)    | [A004](#api-Default-a004-retrieve-reference-data), [A005](#api-Default-a005-retrieve-referral-request), [A006](#api-Default-a006-retrieve-attachment), [A007](#api-Default-a007-retrieve-clinical-information), [A024](#api-Default-a024-retrieve-advice-and-guidance), [A025](#api-Default-a025-retrieve-advice-and-guidance-conversation) and [A043](#api-Default-a043-retrieve-advice-and-guidance-overview-pdf) | [In production, beta](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses) |\n    | Healthcare worker, user-restricted access | [CIS2](https://digital.nhs.uk/services/identity-and-access-management/nhs-care-identity-service-2/care-identity-authentication/ways-to-authenticate-with-nhs-cis2)  | All [Endpoints](#api-endpoints) | [In production, beta](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses) |\n\n    ##### Application-restricted, unattended access\n\n    This access mode has been introduced to allow a Partner application which has been [registered with us](https://portal.developer.nhs.uk/create-a-developer-account) and [authenticated via signed JWT](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/application-restricted-restful-apis-signed-jwt-authentication) to interact with a subset of e-RS FHIR API endpoints in an unattended and read-only fashion.\n    Application-restricted, unattended access should only be used when authenticating a human user (for example via smartcard) is not possible.\n    \n    Writing changes (such as Create Referral) are not supported via this access mode.\n\n    ##### Healthcare worker, user-restricted access\n\n    This access mode allows Partner applications to access e-RS FHIR API endpoints by authenticating users with [NHS Care Identity Service 2 (CIS2)](https://digital.nhs.uk/services/identity-and-access-management/nhs-care-identity-service-2/care-identity-authentication/ways-to-authenticate-with-nhs-cis2).\n    \n    This access mode must be used for writing changes (such as Create Referral).\n\n    ## Who can use this API\n\n    You can use this API if you are a software developer wishing to interact with the e-referrals service (e-RS) data, for use in a professional, clinical setting. \n\n    To use this API:\n\n      -\tyou must have justification for doing so\n      -\tyou must register with the [e-RS Partners Service](https://developer-test.nhs.uk/apis/e-Referrals/getstarted_partner_registration.html)\n      -\tas an e-RS Partner, we offer you guidance and support for onboarding via the e-RS Partners Service which can be contacted via emailing [nhserspartners@nhs.net](mailto:nhserspartners@nhs.net)\n      -\tyou must [assure](https://developer.nhs.uk/apis/e-Referrals/assure_compliance_approach.html) your solution before we grant access to live data\n      -\tclinical safety remains your responsibility (and the responsibility of your end user organisations), as laid out in the NHS e-RS Integration API [compliance approach](https://developer.nhs.uk/apis/e-Referrals/assure_compliance_approach.html)\n\n    See the [[HYPERLINK_ONBOARDING]] section below for more information.\n\n\n    ## Related APIs\n\n    [HL7 V3 API](https://digital.nhs.uk/developer/api-catalogue/e-referral-service-hl7-v3) - this API allows you to manage appointment slots for a Patient Administration System (PAS). \n\n\n    ## API status and roadmap\n\n    ### Application-restricted, unattended access\n\n    This access mode is [in production, beta](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses). We are onboarding Partners to use it.\n\n    Please note that it can only be used:\n\n    - when authenticating a human user is not possible\n    - for endpoints that offer read-only functionality\n    - by ‘Provider Organisations’ (currently)\n    - for accessing endpoints [A004](#api-Default-a004-retrieve-reference-data), [A005](#api-Default-a005-retrieve-referral-request), [A006](#api-Default-a006-retrieve-attachment), [A007](#api-Default-a007-retrieve-clinical-information), [A024](#api-Default-a024-retrieve-advice-and-guidance), [A025](#api-Default-a025-retrieve-advice-and-guidance-conversation) and [A043](#api-Default-a043-retrieve-advice-and-guidance-overview-pdf) (currently)\n\n    For more information, please see [Network access](#api-description__network-access).\n\n    ### Healthcare worker, user-restricted access\n\n    This access mode is [in production, beta](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses). We are onboarding Partners to use it.\n    \n    This access mode allows you to use [all endpoints](#api-endpoints) . A human user must be present and authenticated.\n    \n    For more information, please see [Network access](#api-description__network-access).\n\n    ### Roadmap\n\n    For the current e-RS roadmap see [the future of the NHS e-referral service](https://digital.nhs.uk/services/e-referral-service/the-future-of-the-nhs-e-referral-service#future-service-roadmap).\n    \n    ## Service level\n    This API is a gold service, meaning it is operational and supported 24 x 7 x 365.\n\n    For more details, see [service levels](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#service-levels).\n\n    ## Technology\n\n    This API is primarily [RESTful](https://digital.nhs.uk/developer/guides-and-documentation/api-technologies-at-nhs-digital#basic-rest) \n    and based on [FHIR](https://digital.nhs.uk/developer/guides-and-documentation/api-technologies-at-nhs-digital#fhir) global standards for health care data exchange.\n\n    ## Network access\n\n    This API is available on the internet and, indirectly, on the [Health and Social Care Network (HSCN)](https://digital.nhs.uk/services/health-and-social-care-network).\n\n    To use this API with NHS smartcards you do need an HSCN connection, although internet-facing alternatives are available.\n\n    For more details see [Network access for APIs](https://digital.nhs.uk/developer/guides-and-documentation/network-access-for-apis).\n\n\n    ## Security and authorisation\n\n    ### Application-restricted, unattended access\n\n    This access mode is [application-restricted](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation#application-restricted-apis), meaning we authenticate the calling application but not the end user.\n    \n    You can only use this access mode when authenticating a human user (for example via smartcard) is not possible.\n    \n    To use this access mode, use the following security pattern:\n    - [Application-restricted RESTful API - signed JWT authentication](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/application-restricted-restful-apis-signed-jwt-authentication)\n\n    ###  Healthcare worker, user-restricted access\n\n    This access mode is [user-restricted](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation#user-restricted-apis), meaning an end user must be present, authenticated and authorised.\n\n    The end user must be:\n    - present\n    - a healthcare worker\n    - strongly authenticated and authorised by [NHS Care Identity Service 2 (CIS2)](https://digital.nhs.uk/services/identity-and-access-management/nhs-care-identity-service-2/care-identity-authentication/ways-to-authenticate-with-nhs-cis2)\n\n    To use this access mode, use one of the following security patterns:\n    - [user-restricted RESTful API - using NHS CIS2 - combined authentication and authorisation](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation)\n    - [user-restricted RESTful API - using NHS CIS2 - separate authentication and authorisation](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-separate-authentication-and-authorisation)\n    \n    #### Role and Organisation Validation\n    For most e-RS endpoints requests are made in the context of a specific authorised e-RS Role at a specific Organisation for the authenticated user. \n\n    The e-RS Role is supplied to the endpoint via the `NHSD-eRS-Business-Function` request header. \n    \n    The Organisation is supplied to the endpoint via the `NHSD-End-User-Organisation-ODS` request header. \n    \n    Suitable values for these request headers can be obtained from the Practitioner Role Bundle returned by [[HYPERLINK_A030]].\n\n    #### On Behalf Of User\n    If the `SERVICE_PROVIDER_CLINICIAN_ADMIN` role is used then the User ID of the Service Provider Clinician that the Admin is acting on behalf of must be supplied via the `NHSD-eRS-On-Behalf-Of-User-ID` header.\n\n    \"On behalf of\" is only supported for a Service Provider Clinician Admin (SPCA) acting on behalf of a Service Provider Clinician (SPC).\n\n    ## Environments and testing\n\n    | Environment       | Base URL                                                               |\n    | ----------------- | ---------------------------------------------------------------------- |\n    | Sandbox           | `https://sandbox.api.service.nhs.uk/referrals/FHIR` |\n    | Alpha             | See Alpha testing section below |\n    | Integration test  | `https://int.api.service.nhs.uk/referrals/FHIR` |\n    | Production        | `https://api.service.nhs.uk/referrals/FHIR` |\n\n    ### Sandbox testing\n\n    Our [sandbox](https://digital.nhs.uk/developer/guides-and-documentation/testing#sandbox-testing) environment:\n    -\tis for developer education and early testing\n    -\tonly covers a limited set of scenarios\n    -\tis stateless, so does not actually persist any updates\n    -\tis open access, so does not allow you to test authorisation\n\n    Try out the sandbox using our 'Try this API' feature, see the documentation for each endpoint.\n\n    The sandbox will only respond to an input which exactly matches one of the examples provided; it is otherwise stateless.\n\n    ### Alpha testing\n\n    Our [alpha](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses) environment:\n    -\tis available for early developer testing of future functionality  \n    -\tmay experience breaking changes or downtime without advance notice, but only if we cannot avoid it\n    - can be accessed by contacting [nhserspartners@nhs.net](mailto:nhserspartners@nhs.net)\n\n    ### Integration testing\n\n    Our [integration test](https://digital.nhs.uk/developer/guides-and-documentation/testing#integration-testing-with-our-restful-apis) environment:\n      -\tis where the majority of your integration efforts will take place\n      - is where we conduct witness testing for your application\n      -\tis stateful, so data will be persisted\n\n\n    ## Onboarding\n\n    You need to get your software approved by us before it can go live. We call this process onboarding. \n\n    Onboarding essentially involves connecting to the e-RS FHIR API Integration (INT) environment, assuring your solution and going live, in accordance with the [Supplier Conformance Assessment List (SCAL) process](https://digital.nhs.uk/developer/guides-and-documentation/onboarding-process#onboard-using-the-supplier-conformance-assessment-list-scal-process). \n   \n    In order to pass through the onboarding process as efficiently as possible, it is worth planning ahead. \n    \n    When following the general SCAL process, please note:\n    \n    In step 1: to use this API, you need to register with [nhserspartners@nhs.net](mailto:nhserspartners@nhs.net) using [Partner Registration](https://developer.nhs.uk/apis/e-Referrals/getstarted_partner_registration.html) and discuss your use case with us. You must also register with the API Management team via [https://digital.nhs.uk/developer/getting-started](https://digital.nhs.uk/developer/getting-started) to configure your application. \n   \n    In step 2: to request a SCAL, please ensure you have discussed your solution with the Partners service via [nhserspartners@nhs.net](mailto:nhserspartners@nhs.net), who will put you in touch with [ersapi.assurance@nhs.net](mailto:ersapi.assurance@nhs.net) who are responsible for assurance of solutions that integrate with the e-RS FHIR API.\n   \n    In step 8: to organise witness testing of your solution, please liaise with [ersapi.assurance@nhs.net](mailto:ersapi.assurance@nhs.net).\n    \n    In step 11: when submitting your SCAL for review, please liaise with [ersapi.assurance@nhs.net](mailto:ersapi.assurance@nhs.net).\n    \n    In step 12: to obtain a Connection Agreement, please liaise with [liveserviceonboarding@nhs.net](mailto:liveserviceonboarding@nhs.net). You will need to have successfully passed witness testing with [ersapi.assurance@nhs.net](mailto:ersapi.assurance@nhs.net) and obtained a Technical Conformance Certificate (TCC).\n    \n    In step 13: to obtain the End User Organisation Acceptable Use Policy (EUOAUP), please liaise with [liveserviceonboarding@nhs.net](mailto:liveserviceonboarding@nhs.net).\n    \n    In step 14: following receipt, review and acceptance of your signed Connection Agreement, the e-RS FHIR API Partners team will contact you to facilitate production access for your application.\n    \n    ## Errors\n    We use standard HTTP status codes to show whether an API request succeeded or not. They are usually in the range:\n    * 200 to 299 if it succeeded, including code 202 if it was accepted by an API that needs to wait for further action\n    * 400 to 499 if it failed because of a client error by your application\n    * 500 to 599 if it failed because of an error on our server\n    \n    Errors specific to each API are shown in the Endpoints section, under Response. See our [reference guide](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#http-status-codes) for more on errors.\n    \n\n  contact:\n    url: 'https://digital.nhs.uk/developer/help-and-support'\n    email: api.management@nhs.net\n  license:\n    name: MIT\nservers:\n  - url: 'https://sandbox.api.service.nhs.uk/referrals/FHIR'\n    description: Sandbox environment.\n  - url: 'https://int.api.service.nhs.uk/referrals/FHIR'\n    description: Integration test environment.\n  - url: 'https://api.service.nhs.uk/referrals/FHIR'\n    description: 'Production environment. Not yet available.'\npaths:\n  /STU3/ReferralRequest/$ers.createReferral:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a011-create-referral.yaml'\n  /STU3/ReferralRequest/$ers.createReferralAndSendForTriage:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a021-create-referral-request-and-send-for-triage.yaml'\n  /STU3/HealthcareService/$ers.searchHealthcareServicesForPatient:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a010-patient-service-search.yaml'\n  /STU3/CodeSystem/{codeSystemType}:    \n    get:\n      $ref: 'components/stu3/schemas/endpoints/a004-retrieve-reference-data.yaml'\n  /STU3/Slot:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a015-retrieve-appointment-slots.yaml'\n  /R4/PractitionerRole:\n    get:\n      $ref: 'components/r4/schemas/endpoints/a030-retrieve-business-functions.yaml'\n  /STU3/Binary:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a020-upload-file-to-document-store.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.generatePatientLetter:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a019-generate-patient-letter.yaml'\n  /STU3/Binary/{attachmentLogicalID}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a006-retrieve-attachment.yaml'\n  /STU3/ReferralRequest/{ubrn}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a005-retrieve-referral-request.yaml'\n  /STU3/ReferralRequest/{ubrn}/_history/{version}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a005-retrieve-referral-request-versioned.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.maintainReferralLetter:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a012-maintain-referral-letter.yaml'\n  /STU3/Appointment:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a016-book-or-defer-appointment.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.generateCRI:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a007-retrieve-clinical-information.yaml'\n  /STU3/ReferralRequest/$ers.fetchworklist:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a008-retrieve-worklist.yaml'      \n  /STU3/CommunicationRequest/$ers.fetchworklist:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a023-retrieve-a\u0026g-worklist.yaml'   \n  /STU3/CommunicationRequest/{ubrn}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a024-retrieve-advice-and-guidance.yaml'\n  /STU3/CommunicationRequest/{ubrn}/_history/{version}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a024-retrieve-advice-and-guidance-versioned.yaml'\n  /STU3/Communication:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a025-retrieve-advice-and-guidance-conversation.yaml'   \n  /STU3/CommunicationRequest/{ubrn}/$ers.sendCommunicationToRequester:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a026-send-a\u0026g-response.yaml'   \n  /STU3/ReferralRequest/$ers.createFromCommunicationRequestActionLater:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a027-convert-a\u0026g-to-referral.yaml'   \n  /STU3/ReferralRequest/{ubrn}/$ers.recordReviewOutcome:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a028-record-triage-outcome.yaml'   \n  /STU3/ReferralRequest/{ubrn}/$ers.acceptReferral:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a013-accept-referral.yaml'   \n  /STU3/ReferralRequest/{ubrn}/$ers.rejectReferral:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a014-reject-referral.yaml'  \n  /STU3/Task:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a029-available-actions-for-user-list.yaml'  \n  /STU3/ReferralRequest/{ubrn}/$ers.cancelAppointmentActionLater:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a022-cancel-appointment-action-later.yaml' \n  /R4/HealthcareService/{id}:\n    get:\n      $ref: 'components/r4/schemas/endpoints/a033-retrieve-healthcare-service.yaml'\n    head:\n      $ref: 'components/r4/schemas/endpoints/a037-retrieve-healthcare-service-version.yaml'\n  /R4/HealthcareService:\n    get:\n      $ref: 'components/r4/schemas/endpoints/a035-search-for-healthcare-services.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.changeShortlist:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a031-change-shortlist.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.changeShortlistAndSendForTriage:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a032-change-shortlist-and-send-for-triage.yaml'\n  /STU3/Appointment/{id}:\n    put:\n      $ref: 'components/stu3/schemas/endpoints/a034-update-appointment.yaml'\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a038-retrieve-appointment.yaml'\n  /STU3/Appointment/{id}/_history/{version}:\n    get:\n      $ref: 'components/stu3/schemas/endpoints/a038-retrieve-appointment-versioned.yaml'\n  /STU3/ReferralRequest/{ubrn}/$ers.cancelReferral:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a036-cancel-referral.yaml'\n  /R4/Practitioner:\n    get:\n      $ref: 'components/r4/schemas/endpoints/a040-retrieve-practitioner-info.yaml'\n  /STU3/CommunicationRequest/{ubrn}/$ers.generateCRI:\n    post:\n      $ref: 'components/stu3/schemas/endpoints/a043-retrieve-advice-and-guidance-overview-pdf.yaml'    \ncomponents:\n  securitySchemes:\n    bearerAuth:\n      type: http\n      scheme: bearer\n      bearerFormat: JWT\n\n",
			"canonicalURL": "/github.com/NHSDigital/e-referrals-service-api@d000d015429c471282df7f474febcbe32024c6ec/-/blob/specification/e-referrals-service-api.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/NHSDigital/e-referrals-service-api/blob/d000d015429c471282df7f474febcbe32024c6ec/specification/e-referrals-service-api.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse path items: path \"/R4/HealthcareService\": get: at specification/e-referrals-service-api.yaml:348:7: responses: no responses"
}