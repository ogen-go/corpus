{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/GroupePSA/groupepsa.github.io"
		},
		"file": {
			"name": "api-b2b-webhook-template-v2.yaml",
			"size": 0,
			"path": "assets/openapi/api-b2b-webhook-template-v2.yaml",
			"byteSize": 11509,
			"content": "openapi: 3.0.0\r\n\r\nservers:\r\n  - url: 'https://client.base.uri/root'\r\ninfo:\r\n  version: '2.2.0'\r\n  title: Groupe PSA Connected Car B2B API\r\n  description: | \r\n\r\n              # Introduction\r\n\r\n              This is the description of the *Groupe PSA Connected Car V2 B2B API* Monitor Webhook template. The\r\n              specification is  is based on **OpenAPI Specification version 3** and can\r\n              be displayed using [ReDoc](https://github.com/Rebilly/ReDoc) or\r\n              [Swagger](http://swagger.io).\r\n\r\n  license:\r\n    name: Groupe PSA Licence\r\n    url: 'https://www.psa-peugeot-citroen.com/'\r\ntags:\r\n  - name: Webhook\r\n    description: Monitor webhook model.\r\n \r\npaths:\r\n\r\n  '/monitors/webhook':\r\n    post:\r\n      tags:\r\n        - Webhook\r\n      summary: Post a list of monitor events.\r\n      description: |\r\n                    Post a a list of avent raised by a a registered monitor.\r\n      operationId: set\r\n      parameters:\r\n        - $ref: '#/components/parameters/headerAttribute'\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n                $ref: '#/components/schemas/MonitorEvents'\r\n      responses:\r\n        201:\r\n         description: Post Ok.\r\n        default:\r\n          $ref: '#/components/responses/PostErrorResponse'\r\n\r\n \r\ncomponents:\r\n  securitySchemes:\r\n    basicAuth:     # \u003c-- arbitrary name for the security scheme\r\n      type: http\r\n      scheme: basic\r\n  schemas:\r\n    Attributes:\r\n          type: array\r\n          description: \u003e-\r\n            Additional attribute set that was defined when registering the monitor (a set of key / values)\r\n          items:\r\n            type: object\r\n            properties:\r\n              key:\r\n                type: string\r\n              value:\r\n                type: string\r\n            required:\r\n              - key\r\n              - value  \r\n   \r\n  \r\n    MonitorId:\r\n      type: string\r\n      description: The identifier of monitor that raised the event.\r\n      \r\n    MonitorEvents:\r\n      title: MonitorEvents\r\n      description: Monitor event list. This list will contain only one item when the batch-notify (see Monitor API) is not set.\r\n      type: object\r\n      properties:\r\n        monitorId:\r\n           $ref: '#/components/schemas/MonitorId'\r\n        attributes:   \r\n            $ref: '#/components/schemas/Attributes'\r\n       \r\n        events:\r\n              type: array\r\n              items:\r\n                $ref: '#/components/schemas/MonitorEvent'\r\n    \r\n    MonitorEvent:\r\n      title: MonitorEvent\r\n      type: object\r\n      properties:\r\n        fleetId:\r\n          description : Fleet identifier for which the event was raised.\r\n          type : string\r\n        vin:\r\n          description: Vehicle identifier for which the event was raised.\r\n          type: string  \r\n        eventDate:\r\n          description: The date on which the event was raised.\r\n          type: string\r\n          format: dateTime\r\n       # position:\r\n        #  $ref: '#/components/schemas/Position'\r\n       \r\n        values:\r\n          type: array\r\n          description: Values that caused the trigger. If subscribed monitor trigger is not a compound one then the array will contain only one item.\r\n          items:\r\n            type: object\r\n            description: Values pairs that caused the event.\r\n            properties:\r\n              data:\r\n                  type: string\r\n                  enum:\r\n                    - vehicle.alert\r\n                    - vehicle.odometer\r\n                    - vehicle.engines.running\r\n                    - vehicle.engines.thermic.oil.temp\r\n                    - vehicle.energy.electric.level\r\n                    - vehicle.energy.electric.autonomy\r\n                    - vehicle.energy.fuel.level\r\n                    - vehicle.energy.fuel.autonomy\r\n                    - vehicle.energy.charging.status\r\n                    - vehicle.energy.charging.plugged\r\n                    - vehicle.doorsState.lockedState\r\n                    - vehicle.doorsState.opening\r\n                    - vehicle.kinetic.moving\r\n                    - vehicle.kinetic.speed\r\n                    - vehicle.trip\r\n                    - vehicle.maintenance.daysBeforeMaintenance\r\n                    - vehicle.maintenance.mileageBeforeMaintenance\r\n                    - vehicle.safety.beltWarning\r\n                    - environment.air.temp\r\n                    - privacy.state\r\n                    - privacy.driverRequestState\r\n                    - vehicle.drivingBehavior.mode\r\n                    - vehicle.collision.side\r\n                    - vehicle.collision.severity\r\n                    - vehicle.safety.autoECallTriggering\r\n\r\n                \r\n                  description: The monitored data (operand of a trigger).\r\n              value: \r\n                description: Values that caused the trigger. Could be a list of data values in case of 'includedIn' operation is used\r\n                type: object\r\n                properties:\r\n                      type:\r\n                        type: string\r\n                        enum: [string, obj.alert, obj.collision]\r\n                      body:\r\n                        type: object\r\n                        properties:\r\n                          literalValue:\r\n                            type: string\r\n                            description: a string representation of the primitive data value. The client application should be aware of that and should convert it regarding the trigger data type.  \r\n                          objectValue:\r\n                            type: object\r\n                            description: For this object schema definition (based on the type of field), refere to the API Spec definition.\r\n                    \r\n        extensions:\r\n          description: |\r\n              Extended data can be expressed as a list of objects because in some case, a vehicle data state should be expressed as a list of value (such as active alerts at a given time). In this spec, those data are expressed as generic object and the type is provided (see type field) and so  the client application should be aware of that and should convert it regarding this data type.\r\n                |value|description|Related model |\r\n                |----------|:-------------|------:|\r\n                |vehicle.doorsState|Latest know door state (timestamped) before the eventDate|DoorState|\r\n                |vehicle.status|Latest know vehicle status (timestamped) before the eventDate|Status|\r\n                |vehicle.maintenance|Latest know maintenance(timestamped) before the eventDate|Maintenance|\r\n                |vehicle.position|Last vehicle position (timestamped) before the eventDate|Position|\r\n                |vehicle.telemetry${.TelemetryEnum}|Latest known telemetry (timestamped) before the eventDate filtered with type|Telemetry|\r\n                |vehicle.alerts|List of active alerts at the eventDate|Alert|\r\n                |vehicle.collisions|Latest collisions information before or at the eventDate|Collision|\r\n          type: array\r\n          items:\r\n            type: object\r\n            properties:\r\n              type:\r\n                type: string\r\n                description: Speficies the data type of body items. \r\n                enum: [vehicle.doorsState, vehicle.status, vehicle.maintenance,vehicle.position, vehicle.telemetry, vehicle.alerts, vehicle.collisions]\r\n              body:\r\n                type: array\r\n                description: \r\n                  Extended data can be expressed as a list of objects because in some case, a vehicle data state should be expressed as a list of value (such as active alerts at a given time). In this spec, those data are expressed as generic object and the type is provided (see type field) and so  the client application should be aware of that and should convert it regarding this data type.\r\n                items:\r\n                  type: object\r\n                  properties:\r\n                    doorState:\r\n                      type: object\r\n                      description: Return the latest known doors status before or at the eventDate\r\n                    status:\r\n                      type: object\r\n                      description: Return the latest known status before or at the eventDate\r\n                    maintenance:\r\n                      type: object\r\n                      description: Return the latest known maintenance information before or at the eventDate\r\n                    position:\r\n                      type: object  \r\n                      description: Return the latest known position before or at the eventDate\r\n                    telemetry:\r\n                      type: object\r\n                      description: Return the latest known telemtry before or at the eventDate\r\n                    alerts:\r\n                      type: array\r\n                      description: Return all active alerts at the eventDate\r\n                      items:\r\n                        type: object\r\n                    collisions:\r\n                      type: object\r\n                      description: Return the latest collisions (Front/lateral/Rear) status and severity before or at the eventDate\r\n                  \r\n        \r\n        refresh:\r\n          description: |\r\n              Indicates whether the event is a refresh (reminder) one or not.\r\n              * ```false``` means entering the context of the trigger (1st time the trigger evaluated true). \r\n              * ```true```means that is it a reminder event (already within trigger satisfied context).\r\n          type: boolean\r\n\r\n    xError:\r\n      type: object\r\n      description: Detailed error\r\n      properties:\r\n        code:\r\n          description: The application error code (do not confuse with http response code which is handled in http headed)\r\n          type: integer\r\n        debug:\r\n          description: To investigate potential mismatches (such as the soft version or component name..). \r\n          type: string\r\n        message:\r\n          description: A human-readable error message.\r\n          type: string\r\n      example:\r\n        code: 1001\r\n        debug: CMP_001234\r\n        message: Not able to process the post.\r\n        \r\n   \r\n\r\n  ########################### RESPONSES\r\n  \r\n  \r\n  responses:\r\n    PostErrorResponse:\r\n      description: Post event error\r\n      content:\r\n       application/json:\r\n        schema:\r\n          $ref: '#/components/schemas/xError'     \r\n          \r\n          \r\n          \r\n          ################### PARMS\r\n          \r\n          \r\n          \r\n  parameters:\r\n    headerAttribute:\r\n      name: \u003cattribute-key\u003e \r\n      description: |\r\n         An attribute key as specified in the registered monitor additional attributes set that can be used as http header (_can also be used as an **Authorization** parameter specified by the registerer_). The provided attribute value is also set when calling this api. \r\n         \r\n         **Note**:  This parameter is repeated as many times as attributes in the attribute-set declared when registring of the monitor.\r\n      in: header\r\n      required: true\r\n      schema:\r\n        type: string\r\n        \r\n    tokenAuth:\r\n      name: authorization\r\n      description: \u003e-\r\n        HTTP token authentication (Bearer authentication) that should be\r\n        retrived using PSA connection API.\r\n      in: header\r\n      required: true\r\n      schema:\r\n        type: string\r\n        pattern: Bearer (\\w|-|=)*\r\n\r\n \r\n  \r\n    \r\n   \r\n  \r\n    \r\n",
			"canonicalURL": "/github.com/GroupePSA/groupepsa.github.io@362f9744774fd676bd99c6d3d1119683d9b4702e/-/blob/assets/openapi/api-b2b-webhook-template-v2.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/GroupePSA/groupepsa.github.io/blob/362f9744774fd676bd99c6d3d1119683d9b4702e/assets/openapi/api-b2b-webhook-template-v2.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: at 1:15: parameters: \"headerAttribute\": at 1:48: invalid header name \"\u003cattribute-key\u003e\""
}