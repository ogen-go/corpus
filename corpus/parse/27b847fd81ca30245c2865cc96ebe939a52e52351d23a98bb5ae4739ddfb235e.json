{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/CDCgov/prime-reportstream"
		},
		"file": {
			"name": "openapi.yml",
			"size": 0,
			"path": "prime-router/docs/proposals/0004-settings-api/openapi.yml",
			"byteSize": 22934,
			"content": "openapi: 3.0.2\ninfo:\n  title: Prime Data Hub\n  description: A router of public health data from multiple senders and receivers\n  contact:\n    name: USDS at Centers for Disease Control and Prevention\n    url: https://open.cdc.gov\n    email: usds@cdc.gov\n  version: 0.2.0-oas3\npaths:\n\n  # The reports end-point handles the\n  #\n  /reports:\n    post:\n      summary: Post a report to the data hub\n      security:\n        - ApiKeyAuth: []\n      parameters:\n        - in: query\n          name: client\n          description: The client's name that matches the client name in metadata\n          schema:\n            type: string\n          required: true\n          example: simple_report\n        - in: query\n          name: option\n          description: Optional ways to process the request\n          required: false\n          schema:\n            type: string\n            enum:\n              - ValidatePayload # Validate the payload, but do not process. return 200 on OK or 400 on fail\n              - CheckConnections # Health check\n              - SkipSend # Validate and route but do not send reports. Data is kept in the hub.\n          example: ValidatePayload\n        - in: query\n          name: default\n          description: Dynamic default values for an element. ':' or %3A is used to seperate element name and value\n          required: false\n          style: form\n          explode: false\n          schema:\n            type: array\n            items:\n              type: string\n          example: processing_mode_code%3AD\n      requestBody:\n        description: The public health information being routed\n        required: true\n        content:\n          text/csv:\n            schema:\n              type: string\n            example:\n              header1, header2\n\n              value1, value2\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '201':\n          description: Created. A report was created, but items may have been rejected.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '400':\n          description: Invalid request. No report created.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '500':\n          description: Internal Server Error\n\n  # The setting end-point handles the settings for PRIME admins and PHD users\n  #\n  /settings/organizations:\n    get:\n      description: The settings for all organizations of the system. Must have admin access.\n      security:\n        - OAuth2: [ system_admin ]\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Organization'\n\n  /settings/organizations/{organizationName}:\n    get:\n      description: A single organization settings\n      security:\n        - OAuth2: [ read ]\n      parameters:\n        - in: path\n          schema:\n            type: string\n          required: true\n          name: organizationName\n          description: The name of the organization\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Organization'\n    put:\n      description: Create or update the direct settings associated with an organization\n      security:\n        - OAuth2: [ system_admin ]\n      parameters:\n        - in: path\n          required: true\n          schema:\n            type: string\n          name: organizationName\n          description: The name of the organization\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Organization'\n      responses:\n        '200':\n          description: OK, the organization setting was updated\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Organization'\n        '201':\n          description: Created\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Organization'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n    delete:\n      description: Delete an organization (and the associated receivers and senders)\n      security:\n        - OAuth2: [ system_admin ]\n      parameters:\n        - in: path\n          required: true\n          schema:\n            type: string\n          name: organizationName\n          description: The name of the organization\n      responses:\n        '200':\n          description: OK, the organization setting was deleted\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Organization'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n\n  /settings/organizations/{organizationName}/receivers:\n    get:\n      description: A list of receivers and their current settings\n      security:\n          - OAuth2: [ read ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Fetch receivers with this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Receiver'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n\n  /settings/organizations/{organizationName}/receivers/{receiverName}:\n    get:\n      description: The settings of a single of receiver\n      security:\n        - OAuth2: [ read ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Create receivers under this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: receiverName\n          description: The name of the receiver\n          schema:\n            type: string\n          required: true\n          example: elr\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Receiver'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n    put:\n      description: Update a single reciever\n      security:\n        - OAuth2: [ write ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Create receivers under this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: receiverName\n          description: The name of the receiver\n          schema:\n            type: string\n          required: true\n          example: elr\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Receiver'\n      responses:\n        '200':\n          description: OK, the receiver setting was updated\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Receiver'\n        '201':\n          description: Created\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Receiver'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n    delete:\n      description: Delete a receiver\n      security:\n        - OAuth2: [ write ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: the organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: receiverName\n          description: The name of the receiver\n          schema:\n            type: string\n          required: true\n          example: elr\n      responses:\n        '200':\n          description: OK, the receiver was deleted\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Receiver'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n\n  /settings/organizations/{organizationName}/senders:\n    get:\n      description: A list of senders\n      security:\n        - OAuth2: [ read ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Fetch senders with this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Sender'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n\n  /settings/organizations/{organizationName}/senders/{senderName}:\n    get:\n      description: The settings of a single of sender\n      security:\n        - OAuth2: [ read ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Fetch senders with this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: senderName\n          description: The name of a sender to the data hub\n          schema:\n            type: string\n          required: true\n          example: default\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Sender'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n    put:\n      description: Update a single sender\n      security:\n        - OAuth2: [ write ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: Fetch senders with this organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: senderName\n          description: The name of a sender to the data hub\n          schema:\n            type: string\n          required: true\n          example: default\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/Sender'\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Sender'\n        '201':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Sender'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n    delete:\n      description: Delete a sender\n      security:\n        - OAuth2: [ write ]\n      parameters:\n        - in: path\n          name: organizationName\n          description: the organization name\n          schema:\n            type: string\n          required: true\n          example: az-phd\n        - in: path\n          name: senderName\n          description: The name of a sender to the data hub\n          schema:\n            type: string\n          required: true\n          example: default\n      responses:\n        '200':\n          description: OK, the sender was deleted\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Sender'\n        '400':\n          description: Bad Request\n        '401':\n          description: Unauthorized\n\n# Building\ncomponents:\n  schemas:\n    Report:\n      type: object\n      required: [\"id\"]\n      properties:\n        id:\n          description: the id for the report assigned by the Hub\n          type: string\n        reportItemCount:\n          description: total number of individual reports sent to the Hub (in a csv, the number of data lines sent)\n          type: integer\n        destinations:\n          description: where the report is being sent to\n          type: array\n          items:\n            type: string\n        errorCount:\n          description: total errors found during initial validation.  There may be multiple errors per item.\n          type: integer\n        warningCount:\n          description: total warnings found during initial validation.  There may be multiple warnings per item.\n          type: integer\n        errors:\n          description: a list of errors in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/Detail'\n        warnings:\n          description: a list of warnings in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/Detail'\n\n    Detail:\n      type: object\n      properties:\n        scope:\n          type: string\n          description: Does the error apply to one item\n          enum:\n            - Parameter\n            - Report\n            - Item\n        id:\n          type: string\n          description: Depends on scope, either the item's id (message_id) or the report's id\n        detail:\n          type: string\n          description: The details of the error\n\n    SettingMetadata:\n      description: The metadata associated with an setting\n      type: object\n      properties:\n        version:\n          description: the version number of the object\n          type: number\n          readOnly: true\n          example: 11\n        createdAt:\n          description: the time that the particular revision was created\n          type: string\n          format: time-date\n          readOnly: true\n        createdBy:\n          description: the user who created the particular revision\n          type: string\n          readOnly: true\n          example: jj@phd.gov\n\n    Organization:\n      description: An organization connected to data hub\n      type: object\n      required: [\"name\", \"description\", \"jurisdiction\" ]\n      properties:\n        name:\n          description: the unique id for the organization\n          type: string\n          example: az-phd\n        description:\n          description: the displayable description of the organization\n          type: string\n          example: Arizona PHD\n        jurisdiction:\n          type: string\n          enum:\n            - National\n            - State\n            - County\n        stateCode:\n          description: the two letter code for the organization\n          type: string\n          example: AZ\n        countyName:\n          description: the county name (must match FIPS name)\n          type: string\n          example: Pima\n        meta:\n          $ref: '#/components/schemas/SettingMetadata'\n\n    Sender:\n      description: An sender of reports to the data hub\n      type: object\n      required:\n        - name\n        - description\n        - topic\n        - schema\n        - format\n      properties:\n        name:\n          description: Unique name for the senders, includes the orgninzation name\n          type: string\n          example: simple_report.default\n        description:\n          description: Display ready description of the sender\n          type: string\n        topic:\n          description: Topic of for this sender. Must match the supported topics.\n          type: string\n          example: covid-19\n        organizationName:\n          description: Name of the organization that this sender belongs to\n          type: string\n          example: az-phd\n          readOnly: true\n        schema:\n          description: the schema name for this sender\n          example: az-phd-covid-19\n          type: string\n        format:\n          description: the payload format\n          type: string\n          enum:\n            - CSV\n        meta:\n          $ref: '#/components/schemas/SettingMetadata'\n\n    Receiver:\n      description: A receiver of reports from the data hub\n      type: object\n      required:\n        - name\n        - description\n        - topic\n        - jurisdictionalFilter\n        - reportConfiguations\n        - timing\n      properties:\n        name:\n          description: The unique name for the receiver. Should include the organization name as a prefix.\n          type: string\n          example: az-phd.elr\n        description:\n          description: Display ready description of the receiver\n          type: string\n          example: Arizona PHD ELR feed\n        topic:\n          description: The topic of for this receiver. Must match the supported topics.\n          type: string\n          example: covid-19\n        organizationName:\n          description: The name of the organization that this receiver belongs to\n          type: string\n          example: az-phd\n          readOnly: true\n        jurisdictionalFilters:\n          description: What items to include in the report.\n          type: array\n          required:\n            - matchFields\n          items:\n            description: A single filter\n            type: object\n            properties:\n              matchFields:\n                description: What fields to match in the filter\n                type: string\n                enum:\n                  - FACILITY_OR_PATIENT_ADDRESS\n                  - FACILITY_ADDRESS\n                  - FACILITY_NAME\n                  - ABNORMAL_VALUE\n              matchValues:\n                description: What is the value to match against\n                type: array\n                items:\n                  type: string\n              doesNotMatch:\n                description: Ensure that the result does not match\n                type: boolean\n                default: false\n        translations:\n          description: How the report is translated from the sender. A report can be sent in multiple ways.\n          type: array\n          items:\n            anyOf:\n              - $ref: '#/components/schemas/CustomConfiguration'\n              - $ref: '#/components/schemas/StandardHL7Configuration'\n              # TODO: add the email configuration\n            discriminator:\n              propertyName: type\n        timing:\n          description: When the report is sent if not immediately\n          type: object\n          required: [frequency]\n          properties:\n            frequency:\n              description: How often send a report\n              type: string\n              enum:\n                - REAL_TIME\n                - HOURLY\n                - DAILY\n            dailyAt:\n              description: The UTC hour to send a daily batch\n              type: number\n        meta:\n          $ref: '#/components/schemas/SettingMetadata'\n\n    StandardHL7Configuration:\n      description: A standard HL7 configuration\n      type: object\n      required:\n        - type\n        - includeAOE\n        - useBatchHeaders\n        - transport\n      properties:\n        type:\n          description: The discrimenator\n          type: string\n          example: STANDARD_HL7\n        includeAOE:\n          description: Include the AOE\n          type: boolean\n        useBatchHeaders:\n          description: Use BHS and FHS header\n          type: boolean\n        useTestProcessingMode:\n          description: Set a test process mode flag\n          type: boolean\n          default: false\n        receivingApplicationName:\n          description: The receiving application name (needed for HL7 formats)\n          type: string\n          default: null\n        receivingApplicationOID:\n          description: The receiving application OID\n          type: string\n          default: null\n        receivingFacilityName:\n          description: The receiving facility name\n          type: string\n          default: null\n        receivingFacilityOID:\n          description: The receiving facility name\n          type: string\n          default: null\n        transport:\n          oneOf:\n            - $ref: '#/components/schemas/SFTPTransport'\n            - $ref: '#/components/schemas/DownloadTransport'\n\n    CustomConfiguration:\n      description: A custom configuration for a custom schema\n      type: object\n      required:\n        - type\n        - schemaName\n        - format\n        - transport\n      properties:\n        type:\n          description: The discrimenator\n          type: string\n          example: CUSTOM\n        schemaName:\n          description: The name of the custom schema\n          type: string\n        useTestProcessingMode:\n          description: Set a test process mode flag\n          type: boolean\n          default: false\n        format:\n          description: The format of the serializer\n          type: string\n          enum:\n            - CSV\n            - HL7\n        transport:\n          description: The transport to use\n          oneOf:\n            - $ref: '#/components/schemas/SFTPTransport'\n            - $ref: '#/components/schemas/DownloadTransport'\n\n    SFTPTransport:\n      description: Describes a single SFTP connection in all of it variations\n      type: object\n      required:\n        - type\n        - host\n        - port\n        - filePath\n      properties:\n        type:\n          description: The discriminator\n          type: string\n          example: SFTP\n        host:\n          description: Host name and domain\n          type: string\n          example: sftp.phd.gov\n        port:\n          description: The port to use\n          type: number\n          example: 22\n        filePath:\n          description: The file path to place the report\n          type: string\n          example: /in/test\n  # TODO: Add userName and password when the secrets service is supported\n\n    DownloadTransport:\n      description: Make the report available for download. A null transport.\n      type: object\n      required: [type]\n      properties:\n        type:\n          description: The discriminator\n          type: string\n          example: DOWNLOAD\n\n  securitySchemes:\n    ApiKeyAuth:\n      type: apiKey\n      in: header\n      name: x-functions-key\n    OAuth2:\n      type: oauth2\n      flows:\n        authorizationCode:\n          authorizationUrl: https://hhs-prime.okta.com/oauth/authorize\n          tokenUrl: https://hhs-prime.okta.com/oauth/token\n          scopes:\n            read: Grants read access\n            write: Grants write access\n            admin: Grants access to admin operations",
			"canonicalURL": "/github.com/CDCgov/prime-reportstream@6f40815aaec32ecc3dd0c9dbfdcaf02e52cd0ad9/-/blob/prime-router/docs/proposals/0004-settings-api/openapi.yml",
			"externalURLs": [
				{
					"url": "https://github.com/CDCgov/prime-reportstream/blob/6f40815aaec32ecc3dd0c9dbfdcaf02e52cd0ad9/prime-router/docs/proposals/0004-settings-api/openapi.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"Receiver\": parse schema: property \"translations\": parse schema: parse schema: parse schema: parse schema: property \"receivingApplicationName\": at 1:6907: parse default: unexpected default \"null\" value"
}