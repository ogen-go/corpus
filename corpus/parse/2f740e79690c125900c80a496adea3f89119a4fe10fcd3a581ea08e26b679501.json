{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/RedHatInsights/rhsm-subscriptions"
		},
		"file": {
			"name": "internal-subscriptions-sync-api-spec.yaml",
			"size": 0,
			"path": "src/main/spec/internal-subscriptions-sync-api-spec.yaml",
			"byteSize": 5850,
			"content": "openapi: \"3.0.2\"\ninfo:\n  title: \"internal-subscriptions-sync-api\"\n  description: \"REST interface for the internal-subscriptions-sync- service. Please note any deprecated APIs. Our current deprecation policy is to keep deprecated APIs around for at least 6 months.\"\n  version: 1.0.0\n\nservers:\n  - url: /{PATH_PREFIX}/{APP_NAME}/v1\n    variables:\n      PATH_PREFIX:\n        default: api\n      APP_NAME:\n        default: rhsm-subscriptions\n  - url: https://{HOSTNAME}/{PATH_PREFIX}/{APP_NAME}/v1\n    variables:\n      HOSTNAME:\n        enum:\n          - ci.cloud.redhat.com\n          - qa.cloud.redhat.com\n          - stage.cloud.redhat.com\n          - cloud.redhat.com\n        default: ci.cloud.redhat.com\n      PATH_PREFIX:\n        default: api\n      APP_NAME:\n        default: rhsm-subscriptions\n\npaths:\n  /internal/subscriptions/sync/org/{org_id}:\n    description: \"Force sync of subscriptions for given org_id.\"\n    parameters:\n      - name: org_id\n        in: path\n        required: true\n        schema:\n          type: string\n        description: \"The ID for the organization subscriptions to sync\"\n    put:\n      summary: \"Sync all subscriptions for given org_id.\"\n      operationId: forceSyncSubscriptionsForOrg\n      tags:\n        - internalSubscriptions\n      responses:\n        '202':\n          description: \"The request for syncing organization's subscription is processing.\"\n          content:\n            text/plain:\n              schema:\n                type: string\n                example: Sync started.\n        '400':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/BadRequest\"\n        '403':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/Forbidden\"\n        '404':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/ResourceNotFound\"\n        '500':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/InternalServerError\"\n  /internal/subscriptions/awsUsageContext:\n    description: \"Get AWS usage context.\"\n    parameters:\n      - name: accountNumber\n        in: query\n        required: true\n        schema:\n          type: string\n        description: \"Customer's Account Number\"\n      - name: orgId\n        in: query\n        required: true\n        schema:\n          type: string\n        description: \"Customer's Org Id\"\n      - name: date\n        in: query\n        required: true\n        schema:\n          type: string\n          format: date-time\n      - name: productId\n        in: query\n        required: true\n        schema:\n          type: string\n      - name: sla\n        in: query\n        schema:\n          type: string\n      - name: usage\n        in: query\n        schema:\n          type: string\n      - name: awsAccountId\n        in: query\n        schema:\n          type: string\n    get:\n      summary: \"Lookup necessary info to submit a usage record to AWS\"\n      operationId: getAwsUsageContext\n      responses:\n        '200':\n          description: \"Found AWS usage context matching the criteria.\"\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AwsUsageContext'\n        '400':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/BadRequest\"\n        '403':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/Forbidden\"\n        '404':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/ResourceNotFound\"\n        '500':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/InternalServerError\"\n      tags:\n        - internalSubscriptions\n  /internal/subscriptions/terminate/{subscription_id}:\n    description: \"Terminate a subscription with a given end date.\"\n    parameters:\n      - name: subscription_id\n        in: path\n        required: true\n        schema:\n          type: string\n        description: \"Subscription ID to terminate.\"\n    post:\n      operationId: terminateSubscription\n      summary: \"Terminate a subscription.\"\n      parameters:\n        - name: timestamp\n          description: \"The termination timestamp to use.\"\n          in: query\n          required: true\n          schema:\n            type: string\n            format: date-time\n      responses:\n        '200':\n          description: \"The termination request was successful\"\n          content:\n            application/vnd.api+json:\n              schema:\n                $ref: \"#/components/schemas/TerminationRequest\"\n        '400':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/BadRequest\"\n        '403':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/Forbidden\"\n        '404':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/ResourceNotFound\"\n        '500':\n          $ref: \"../../../spec/error-responses.yaml#/$defs/InternalServerError\"\n      tags:\n        - internalSubscriptions\n  /internal-subscription-sync-openapi.json:\n    $ref: \"../../../spec/openapi-paths.yaml#/openapi-json\"\n  /internal-subscription-sync-openapi.yaml:\n    $ref: \"../../../spec/openapi-paths.yaml#/openapi-yaml\"\n\ncomponents:\n  schemas:\n    AwsUsageContext:\n      description: Encapsulates all data needed to map tally snapshot usage to AWS UsageRecords.\n      properties:\n        rhSubscriptionId:\n          type: string\n        customerId:\n          type: string\n        productCode:\n          type: string\n        awsSellerAccountId:\n          type: string\n        subscriptionStartDate:\n          type: string\n          format: date-time\n    TerminationRequest:\n      properties:\n        data:\n          type: object\n          properties:\n            termination_message:\n              type: string\n  securitySchemes:\n    PskIdentity:\n      type: apiKey\n      in: header\n      name: x-rh-swatch-psk\n      description: |\n        Psk header containing Pre Shared Key. Contains an\n        UUID string:\n        ```\n        c9a98753-2092-4617-b226-5c2653330b3d\n        ```\n\nsecurity:\n  - PskIdentity: []\n",
			"canonicalURL": "/github.com/RedHatInsights/rhsm-subscriptions@a7f1109cf8d1b6bafbd0a1f34dc63fa775eb32bb/-/blob/src/main/spec/internal-subscriptions-sync-api-spec.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/RedHatInsights/rhsm-subscriptions/blob/a7f1109cf8d1b6bafbd0a1f34dc63fa775eb32bb/src/main/spec/internal-subscriptions-sync-api-spec.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse operations: path \"/internal-subscription-sync-openapi.json\": at 1:1044: external \"../../../spec/openapi-paths.yaml\": get: file: local file reference is not allowed"
}