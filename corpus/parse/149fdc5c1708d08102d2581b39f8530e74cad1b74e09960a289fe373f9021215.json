{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/pill-city/server"
		},
		"file": {
			"name": "swagger.yaml",
			"size": 0,
			"path": "swagger.yaml",
			"byteSize": 21822,
			"content": "openapi: 3.0.0\nservers:\n  - url: https://api.pill.city/api\n    description: Production\n  - url: http://localhost:5000/api\n    description: Development\ninfo:\n  description: API for an one-of-a-kind social network\n  version: 0.0.1\n  title: Pill.City\n  contact:\n    email: feedback@pill.city\npaths:\n  /signIn:\n    post:\n      summary: Sign in\n      operationId: signIn\n      security: []\n      tags: [\"core\"]\n      requestBody:\n        $ref: '#/components/requestBodies/SignInRequest'\n      responses:\n        '200':\n          $ref: '#/components/responses/SignInSuccessfulResponse'\n        '400':\n          $ref: '#/components/responses/400BadRequest'\n        '401':\n          $ref: '#/components/responses/401Unauthorized'\n\n  /home:\n    get:\n      summary: Get or poll latest home posts\n      operationId: getHome\n      tags: [ \"core\" ]\n      parameters:\n        - in: query\n          name: to_id\n          schema:\n            type: string\n          description: To which post ID should the server poll latest posts on home. If both to_id and from_id are present, to_id will take precedence.\n        - in: query\n          name: from_id\n          schema:\n            type: string\n          description: From which post ID should the server fetch posts on home. If empty, the server will fetch the latest posts.\n      responses:\n        '200':\n          description: Successfully got or polled home posts\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Post'\n        '400':\n          $ref: '#/components/responses/400BadRequest'\n        '401':\n          $ref: '#/components/responses/401Unauthorized'\n  /posts:\n    post:\n      summary: Create a new post\n      operationId: createPost\n      tags: [ \"core\" ]\n      requestBody:\n        $ref: '#/components/requestBodies/CreatePostRequest'\n      responses:\n        '201':\n          $ref: '#/components/responses/CreatePostSuccessfulResponse'\n        '400':\n          $ref: '#/components/responses/400BadRequest'\n        '403':\n          $ref: '#/components/responses/403Forbidden'\n        '404':\n          $ref: '#/components/responses/404NotFound'\n  /post/{postId}:\n    get:\n      summary: Get a post by its ID\n      operationId: getPost\n      tags: [ \"core\" ]\n      parameters:\n        - in: path\n          name: postId\n          schema:\n            type: string\n          required: true\n          description: Post ID\n      responses:\n        '200':\n          description: Successfully got the post\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Post'\n        '401':\n          $ref: '#/components/responses/401Unauthorized'\n  /me:\n    get:\n      summary: Get the logged in user\n      operationId: getMe\n      tags: [ \"core\" ]\n      responses:\n        '200':\n          description: Successfully got the loggined in user\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/User'\n        '401':\n          $ref: '#/components/responses/401Unauthorized'\n  /circles:\n    get:\n        summary: Get a user's circles\n        operationId: getCircles\n        tags: [ \"core\" ]\n        responses:\n          '200':\n            description: Successfully got a user's circles\n            content:\n              application/json:\n                schema:\n                  type: array\n                  items:\n                    $ref: '#/components/schemas/Circle'\n  /availablePlugins:\n    get:\n      summary: Get all available plugins\n      operationId: getAvailablePlugins\n      security: [ ]\n      tags: [ \"core\" ]\n      responses:\n        '200':\n          description: Successfully got all available plugins\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: string\n                example: [ \"cloudemoticon\" ]\n  /plugins:\n    get:\n      summary: Get plugins enabled by the user\n      operationId: getPlugins\n      tags: [ \"core\" ]\n      responses:\n        '200':\n          description: Successfully got list enabled plugins\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: string\n                example: [\"cloudemoticon\"]\n        '400':\n          $ref: '#/components/responses/400BadRequest'\n        '401':\n          $ref: '#/components/responses/401Unauthorized'\n  /plugin/cloudemoticon/emoticons:\n    get:\n      summary: Get emoticons\n      operationId: getEmoticons\n      security: [ ]\n      tags: [\"plugins\"]\n      responses:\n        '200':\n          description: Successfully got emoticons\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/CloudEmoticonRepo'\ncomponents:\n  schemas:\n    User:\n      required:\n        - id\n        - created_at_seconds\n      properties:\n        id:\n          type: string\n          description: The permanent short ID for the user\n          example: kt\n        created_at_seconds:\n          type: number\n          description: In epoch seconds, when the user signed up\n          example: 1631528113\n        avatar_url_v2:\n          $ref: '#/components/schemas/MediaUrlV2'\n        profile_pic:\n          type: string\n          description: User's choice of profile banner. The choices are defined on web frontend.\n          example: pill1.png\n          default: pill1.png\n        display_name:\n          type: string\n          description: User's displayed/regular name. Can be changed.\n          example: KT 一號機\n          default: null\n      type: object\n    ResharedPost:\n      required:\n        - id\n        - created_at_seconds\n        - author\n        - state\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the reshared post\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        created_at_seconds:\n          type: number\n          description: In epoch seconds, when the reshared post was created\n        author:\n          $ref: '#/components/schemas/User'\n        content:\n          type: string\n          description: Text content for the reshared post\n          example: Hello, World!\n          default: ''\n        formatted_content:\n          $ref: '#/components/schemas/FormattedContent'\n        media_urls_v2:\n          type: array\n          description: v2 media URLs for the comment's media\n          items:\n            $ref: '#/components/schemas/MediaUrlV2'\n          default: []\n        poll:\n          nullable: true\n          allOf:\n            - $ref: '#/components/schemas/Poll'\n        state:\n          type: string\n          enum: [ 'visible', 'invisible', 'author_blocked', 'deleted' ]\n          description: State of this entity that UI should show\n    NestedComment:\n      required:\n        - id\n        - created_at_seconds\n        - author\n        - state\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the nested comment\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        created_at_seconds:\n          type: number\n          description: In epoch seconds, when the nested comment was created\n        author:\n          $ref: '#/components/schemas/User'\n        content:\n          type: string\n          description: Text content for the nested comment\n          example: Hello, World!\n          default: ''\n        formatted_content:\n          $ref: '#/components/schemas/FormattedContent'\n        media_urls_v2:\n          type: array\n          description: v2 media URLs for the comment's media\n          items:\n            $ref: '#/components/schemas/MediaUrlV2'\n          default: []\n        reply_to_comment_id:\n          type: string\n          description: The ID of the comment that this comment is replying to\n          default: false\n        state:\n          type: string\n          enum: [ 'visible', 'invisible', 'author_blocked', 'deleted' ]\n          description: State of this entity that UI should show\n    Comment:\n      required:\n        - id\n        - created_at_seconds\n        - author\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the comment\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        created_at_seconds:\n          type: number\n          description: In epoch seconds, when the comment was created\n        author:\n          $ref: '#/components/schemas/User'\n        content:\n          type: string\n          description: Text content for the comment\n          example: Hello, World!\n          default: ''\n        formatted_content:\n          $ref: '#/components/schemas/FormattedContent'\n        media_urls_v2:\n          type: array\n          description: v2 media URLs for the comment's media\n          items:\n            $ref: '#/components/schemas/MediaUrlV2'\n          default: []\n        comments:\n          type: array\n          description: Nested comments for the comment\n          items:\n            $ref: '#/components/schemas/NestedComment'\n        state:\n          type: string\n          enum: [ 'visible', 'invisible', 'author_blocked', 'deleted' ]\n          description: State of this entity that UI should show\n    Circle:\n      required:\n        - id\n        - name\n        - members\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the circle\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        name:\n          type: string\n          description: Circle name\n          example: 圈子\n        members:\n          type: array\n          description: Members of the circle\n          items:\n            $ref: '#/components/schemas/User'\n    AnonymizedCircle:\n      required:\n        - id\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the circle\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        name:\n          type: string\n          description: Circle name. Only contains valid data if the embedding post's author is the circle owner\n          example: 圈子\n    Reaction:\n      required:\n        - id\n        - emoji\n        - author\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the reaction\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        emoji:\n          type: string\n          description: Emoji for the reaction\n          example: 💩\n        author:\n          $ref: '#/components/schemas/User'\n    PollChoice:\n      required:\n        - id\n        - content\n        - media\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the poll choice\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        content:\n          type: string\n          description: Text content for the poll choice\n          example: Choice 1\n        media:\n          type: string\n          format: url\n          description: URL for the poll choice's media\n          example: https://pill-city.s3.us-west-2.amazonaws.com/avatars/kt-1646414449.png\n        media_url_v2:\n          $ref: '#/components/schemas/MediaUrlV2'\n        voters:\n          type: array\n          items:\n            $ref: '#/components/schemas/User'\n          description: User who have voted for this poll choice\n    Poll:\n      properties:\n        choices:\n          type: array\n          items:\n            $ref: '#/components/schemas/PollChoice'\n          description: Choices for this poll\n        close_by_seconds:\n          type: number\n          description: In epoch seconds, by when this poll will close. Default 0 meaning the poll will never close.\n          default: 0\n    Post:\n      required:\n        - id\n        - created_at_seconds\n        - author\n        - is_public\n        - state\n      properties:\n        id:\n          type: string\n          description: Permanent ID for the post\n          example: a3137edb-e629-49ac-b1f1-3343fd97329c\n        created_at_seconds:\n          type: number\n          description: In epoch seconds, when the post was created\n        author:\n          $ref: '#/components/schemas/User'\n        content:\n          type: string\n          description: Text content for the post\n          example: Hello, World!\n          default: ''\n        formatted_content:\n          $ref: '#/components/schemas/FormattedContent'\n        is_public:\n          type: boolean\n          description: Whether the post is publicly accessible on the server\n          example: true\n        reshareable:\n          type: boolean\n          description: Whether the post is publicly reshareable on the server\n          example: true\n          default: false\n        reshared_from:\n          nullable: true\n          allOf:\n            - $ref: '#/components/schemas/ResharedPost'\n        media_urls_v2:\n          type: array\n          description: v2 media URLs for the comment's media\n          items:\n            $ref: '#/components/schemas/MediaUrlV2'\n          default: []\n        reactions:\n          type: array\n          description: Reactions for the post\n          items:\n            $ref: '#/components/schemas/Reaction'\n        comments:\n          type: array\n          description: Comments for the post\n          items:\n            $ref: '#/components/schemas/Comment'\n        circles:\n          type: array\n          description: Circles that the post is published in\n          items:\n            $ref: '#/components/schemas/AnonymizedCircle'\n        is_update_avatar:\n          type: boolean\n          description: Whether the post is an update avatar post\n          default: false\n        poll:\n          nullable: true\n          allOf:\n            - $ref: '#/components/schemas/Poll'\n        link_previews:\n          type: array\n          description: Link previews extracted from the text content\n          items:\n            $ref: '#/components/schemas/LinkPreview'\n          default: [ ]\n        state:\n          type: string\n          enum: ['visible', 'invisible', 'author_blocked', 'deleted']\n          description: State of this entity that UI should show\n    Message:\n      required:\n        - msg\n      properties:\n        msg:\n          type: string\n          description: This is a message\n          example: Human readable message\n    MediaUrlV2:\n      required:\n        - original_url\n        - processed\n      properties:\n        original_url:\n          type: string\n          description: URL to the original media\n        processed:\n          type: boolean\n          description: Whether the media has been processed/optimized\n        processed_url:\n          type: string\n          description: URL to the processed media\n        width:\n          type: number\n          description: Processed media width\n          example: 1920\n        height:\n          type: number\n          description: Processed media height\n          example: 1080\n        dominant_color_hex:\n          type: string\n          description: Processed media dominant color in hex\n          example: 8F4092\n    LinkPreview:\n      required:\n        - url\n        - state\n        - index_start\n        - index_end\n      properties:\n        url:\n          type: string\n          description: The previewed URL\n        title:\n          type: string\n          description: Title for the URL\n        subtitle:\n          type: string\n          description: Subtitle for the URL\n        image_urls:\n          type: array\n          items:\n            type: string\n          description: Image URLs for the URL\n        state:\n          type: string\n          enum: [\"fetching\", \"fetched\", \"errored\"]\n          description: The fetching state of this URL preview\n        errored_next_refetch_seconds:\n          type: number\n          description: If the URL preview fails to fetch, the epoch time in seconds when this URL will be refetched\n        index_start:\n          type: number\n          description: The starting index of the URL in content\n        index_end:\n          type: number\n          description: The ending index of the URL in content, exclusive\n    FormattedContentSegment:\n      description: A segment in a formatted content string\n      required:\n        - content\n        - types\n      properties:\n        content:\n          type: string\n          description: The text content of this segment\n        types:\n          type: array\n          items:\n            type: string\n            enum: [\"strikethrough\", \"bold\", \"italic\", \"url\", \"mention\"]\n          description: The formats for this segment\n        reference:\n          type: integer\n          description: If this segment references external entities such as an URL or mentioned user ID, this is the index of the referenced entity in the parent object's references array\n    FormattedContent:\n      required:\n        - segments\n        - references\n      properties:\n        segments:\n          type: array\n          items:\n            $ref: '#/components/schemas/FormattedContentSegment'\n          description: The segments of this formatted content\n        references:\n          type: array\n          items:\n            type: string\n          description: The external entities that the segments of this formatted content might need to refer to\n    CloudEmoticonEntry:\n      required:\n        - description\n        - emoticon\n      properties:\n        emoticon:\n          type: string\n          description: The emoticon\n          example: (・8・)\n        description:\n          type: string\n          description: Description for the emoticon\n          example: ことり\n    CloudEmoticonCategory:\n      required:\n        - name\n        - entries\n      properties:\n        name:\n          type: string\n          description: The category name\n          example: G+都亡了\n        entries:\n          type: array\n          items:\n            $ref: '#/components/schemas/CloudEmoticonEntry'\n          description: Emoticon entries for the category\n    CloudEmoticonRepo:\n      required:\n        - categories\n        - information\n      properties:\n        categories:\n          type: array\n          items:\n            $ref: '#/components/schemas/CloudEmoticonCategory'\n          description: Emoticon categories for the repo\n        information:\n          type: array\n          items:\n            type: string\n          description: Description for the repo\n          example: [ \"KTachibana\", \"https://ktachibana.party/cloudemoticon/default.json\" ]\n  requestBodies:\n    SignInRequest:\n      content:\n        application/json:\n          schema:\n            required:\n              - id\n              - password\n            properties:\n              id:\n                type: string\n                description: The permanent short ID for the user\n                example: kt\n              password:\n                type: string\n                description: User's password\n                example: thisissupersecure\n    CreatePostRequest:\n      content:\n        application/json:\n          schema:\n            required:\n              - is_public\n              - reshareable\n            properties:\n              content:\n                type: string\n                description: Text content for the post\n                example: 你好，世界！\n              is_public:\n                type: boolean\n                description: Whether the post is public. Overrides circle_ids on retrieving if both are set.\n                example: true\n              circle_ids:\n                type: array\n                items:\n                  type: string\n                description: IDs of circles to publish the post in\n                example: [ \"a3137edb-e629-49ac-b1f1-3343fd97329c\" ]\n              reshareable:\n                type: boolean\n                description: Whether the post is reshareable\n                example: true\n              media_object_names:\n                type: array\n                items:\n                  type: string\n                description: Object names of the uploaded media to attach to the post\n                example: [ \"media/b64bde42-6b29-436f-98a9-5baabcb81e8e.jpeg\" ]\n  responses:\n    SignInSuccessfulResponse:\n      description: Successfully signed in\n      content:\n        application/json:\n          schema:\n            required:\n              - access_token\n              - expires\n            properties:\n              access_token:\n                type: string\n                description: User's bearer token\n                example: xyz.123\n              expires:\n                type: number\n                description: In epoch seconds, when the bearer token will expire\n                example: 1652301806\n    CreatePostSuccessfulResponse:\n      description: Successfully created a post\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Post'\n    400BadRequest:\n      description: Bad request, invalid request body\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Message'\n    401Unauthorized:\n      description: Unauthorized, invalid access token or wrong user ID/password\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Message'\n    403Forbidden:\n      description: Forbidden, not allowed to execute a certain action\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Message'\n    404NotFound:\n      description: Not found, a certain object is not found\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Message'\n  securitySchemes:\n    bearer:\n      type: http\n      scheme: bearer\nsecurity:\n  - bearer: []\n",
			"canonicalURL": "/github.com/pill-city/server@5e775c7683e22d2673fca5a39042c7dd50311d0e/-/blob/swagger.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/pill-city/server/blob/5e775c7683e22d2673fca5a39042c7dd50311d0e/swagger.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"NestedComment\": resolve \"#/components/schemas/NestedComment\": property \"author\": $ref: resolve \"#/components/schemas/User\": property \"display_name\": at swagger.yaml:198:20: parse default: unexpected default \"null\" value"
}