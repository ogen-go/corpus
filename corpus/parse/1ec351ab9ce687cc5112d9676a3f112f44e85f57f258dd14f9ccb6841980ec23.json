{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/haiku/haikudepotserver"
		},
		"file": {
			"name": "user-rating.yaml",
			"size": 0,
			"path": "haikudepotserver-api2/src/main/resources/api2/user-rating.yaml",
			"byteSize": 17289,
			"content": "# Copyright 2021-2022, Andrew Lindesay\n# Distributed under the terms of the MIT License.\n\nopenapi: 3.0.3\ninfo:\n  title: HDS User Rating API\n  version: \"2.0\"\n  description: \u003e\n    This API interface covers all aspects of user ratings of packages.\ntags:\n  - name: user-rating\npaths:\n\n  /__api/v2/user-rating/derive-and-store-user-rating-for-pkg:\n    description: \u003e\n      This method will re-calculate and store the user rating for the nominated packaging.\n    post:\n      tags:\n        - user-rating\n      operationId: deriveAndStoreUserRatingForPkg\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/deriveAndStoreUserRatingForPkgRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            Response of invoking this API\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/deriveAndStoreUserRatingForPkgResponseEnvelope\"\n\n  /__api/v2/user-rating/derive-and-store-user-ratings-for-all-pkgs:\n    description: \u003e\n      This method will trigger the re-calculation of user ratings for all of the packages in the system.\n    post:\n      tags:\n        - user-rating\n      operationId: deriveAndStoreUserRatingsForAllPkgs\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/deriveAndStoreUserRatingsForAllPkgsRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            Response of invoking this API\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/deriveAndStoreUserRatingsForAllPkgsResponseEnvelope\"\n\n  /__api/v2/user-rating/get-user-rating:\n    description: \u003e\n      This will find the user rating identified by the supplied code and will return data pertaining to that\n      or if the user rating was not able to be found for the code supplied then it will throw an instance of\n      {@link ObjectNotFoundException}.  Note that this invocation\n      has no authorization on it; it is effectively public.\n    post:\n      tags:\n        - user-rating\n      operationId: getUserRating\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/getUserRatingRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            Response of invoking this API\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/getUserRatingResponseEnvelope\"\n\n  /__api/v2/user-rating/update-user-rating:\n    description: \u003e\n      This method will update the user rating.  The user rating is identified by the supplied code and the\n      supplied filter describes those properties of the user rating that should be updated.\n    post:\n      tags:\n        - user-rating\n      operationId: updateUserRating\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/updateUserRatingRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            Result of having update the user rating; essentially empty\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/updateUserRatingResponseEnvelope\"\n\n  /__api/v2/user-rating/create-user-rating:\n    description: \u003e\n      This method will create a user rating based on the data provided.  In the result is a code that\n      identifies this rating.\n    post:\n      tags:\n        - user-rating\n      operationId: createUserRating\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/createUserRatingRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            Result of having created the user rating.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/createUserRatingResponseEnvelope\"\n\n  /__api/v2/user-rating/get-user-rating-by-user-and-pkg-version:\n    description: \u003e\n      This will find the user rating identified by the user and the package version.  If\n      not such user rating exists then this method will return a not-found response.\n      Note that there is no authorization on it; it is effectively public.\n    post:\n      tags:\n        - user-rating\n      operationId: getUserRatingByUserAndPkgVersion\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            The user rating.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionResponseEnvelope\"\n\n  /__api/v2/user-rating/search-user-ratings:\n    description: \u003e\n      This method will return user rating search results based on the\n      criteria supplied in the request.\n    post:\n      tags:\n        - user-rating\n      operationId: searchUserRatings\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/searchUserRatingsRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            The search results.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/searchUserRatingsResponseEnvelope\"\n\n  /__api/v2/user-rating/remove-user-rating:\n    description: \u003e\n      This method will delete a user rating so that it is no longer stored.\n    post:\n      tags:\n        - user-rating\n      operationId: removeUserRating\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"#/components/schemas/removeUserRatingRequestEnvelope\"\n      responses:\n        200:\n          description: \u003e\n            The search results.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/removeUserRatingResponseEnvelope\"\n\ncomponents:\n  schemas:\n\n    deriveAndStoreUserRatingForPkgRequestEnvelope:\n      type: object\n      properties:\n        pkgName:\n          type: string\n    deriveAndStoreUserRatingForPkgResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/deriveAndStoreUserRatingForPkgResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    deriveAndStoreUserRatingForPkgResult:\n      type: object\n\n    deriveAndStoreUserRatingsForAllPkgsRequestEnvelope:\n      type: object\n    deriveAndStoreUserRatingsForAllPkgsResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/deriveAndStoreUserRatingsForAllPkgsResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    deriveAndStoreUserRatingsForAllPkgsResult:\n      type: object\n\n    getUserRatingRequestEnvelope:\n      type: object\n      properties:\n        code:\n          type: string\n    getUserRatingResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/getUserRatingResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    getUserRatingResult:\n      type: object\n      properties:\n        code:\n          type: string\n        naturalLanguageCode:\n          type: string\n        user:\n          $ref: \"#/components/schemas/getUserRatingUser\"\n        userRatingStabilityCode:\n          type: string\n        active:\n          type: boolean\n        comment:\n          type: string\n        modifyTimestamp:\n          type: integer\n          format: int64\n        createTimestamp:\n          type: integer\n          format: int64\n        rating:\n          type: integer\n        pkgVersion:\n          $ref: \"#/components/schemas/getUserRatingPkgVersion\"\n    getUserRatingUser:\n      type: object\n      properties:\n        nickname:\n          type: string\n    getUserRatingPkgVersion:\n      type: object\n      properties:\n        repositoryCode:\n          type: string\n          description: \u003e\n            @deprecated please use {@link #repositorySourceCode} instead.\n        repositorySourceCode:\n          type: string\n        architectureCode:\n          type: string\n        major:\n          type: string\n        minor:\n          type: string\n        micro:\n          type: string\n        preRelease:\n          type: string\n        revision:\n          type: integer\n        pkg:\n          $ref: \"#/components/schemas/getUserRatingPkg\"\n    getUserRatingPkg:\n      type: object\n      properties:\n        name:\n          type: string\n\n    updateUserRatingRequestEnvelope:\n      type: object\n      properties:\n        code:\n          type: string\n        active:\n          type: boolean\n        naturalLanguageCode:\n          type: string\n        userRatingStabilityCode:\n          type: string\n        comment:\n          type: string\n        rating:\n          type: integer\n          format: int32\n        filter:\n          type: array\n          items:\n            type: string\n            enum:\n              - ACTIVE\n              - NATURALLANGUAGE\n              - USERRATINGSTABILITY\n              - COMMENT\n              - RATING\n    updateUserRatingResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/updateUserRatingResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    updateUserRatingResult:\n      type: object\n\n    createUserRatingRequestEnvelope:\n      type: object\n      properties:\n        repositoryCode:\n          type: string\n          description: deprecated; use the repositorySourceCode instead\n        repositorySourceCode:\n          type: string\n        naturalLanguageCode:\n          type: string\n        userNickname:\n          type: string\n        userRatingStabilityCode:\n          type: string\n        comment:\n          type: string\n        rating:\n          type: integer\n          format: int32\n        pkgName:\n          type: string\n        pkgVersionArchitectureCode:\n          type: string\n        pkgVersionMajor:\n          type: string\n        pkgVersionMinor:\n          type: string\n        pkgVersionMicro:\n          type: string\n        pkgVersionPreRelease:\n          type: string\n        pkgVersionRevision:\n          type: integer\n          format: int32\n        pkgVersionType:\n          $ref: \"./common.yaml#/components/schemas/pkgVersionType\"\n    createUserRatingResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/createUserRatingResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    createUserRatingResult:\n      type: object\n      properties:\n        code:\n          type: string\n\n    getUserRatingByUserAndPkgVersionRequestEnvelope:\n      type: object\n      properties:\n        repositoryCode:\n          type: string\n          description: deprecated; use the repositorySourceCode instead\n        repositorySourceCode:\n          type: string\n        userNickname:\n          type: string\n        pkgName:\n          type: string\n        pkgVersionArchitectureCode:\n          type: string\n        pkgVersionMajor:\n          type: string\n        pkgVersionMinor:\n          type: string\n        pkgVersionMicro:\n          type: string\n        pkgVersionPreRelease:\n          type: string\n        pkgVersionRevision:\n          type: integer\n          format: int32\n    getUserRatingByUserAndPkgVersionResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    getUserRatingByUserAndPkgVersionResult:\n      type: object\n      properties:\n        code:\n          type: string\n        naturalLanguageCode:\n          type: string\n        user:\n          $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionUser\"\n        userRatingStabilityCode:\n          type: string\n        active:\n          type: boolean\n        comment:\n          type: string\n        modifyTimestamp:\n          type: integer\n          format: int64\n        createTimestamp:\n          type: integer\n          format: int64\n        rating:\n          type: integer\n          format: int32\n        pkgVersion:\n          $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionPkgVersion\"\n    getUserRatingByUserAndPkgVersionUser:\n      type: object\n      properties:\n        nickname:\n          type: string\n    getUserRatingByUserAndPkgVersionPkgVersion:\n      type: object\n      properties:\n        repositoryCode:\n          type: string\n          description: \u003e\n            @deprecated please use {@link #repositorySourceCode} instead.\n        repositorySourceCode:\n          type: string\n        architectureCode:\n          type: string\n        major:\n          type: string\n        minor:\n          type: string\n        micro:\n          type: string\n        preRelease:\n          type: string\n        revision:\n          type: integer\n        pkg:\n          $ref: \"#/components/schemas/getUserRatingByUserAndPkgVersionPkg\"\n    getUserRatingByUserAndPkgVersionPkg:\n      type: object\n      properties:\n        name:\n          type: string\n\n    searchUserRatingsRequestEnvelope:\n      allOf:\n        - $ref: \"./common.yaml#/components/schemas/abstractSearchRequest\"\n        - type: object\n          properties:\n            repositoryCode:\n              type: string\n              description: deprecated; use the repositorySourceCode instead\n            repositorySourceCode:\n              type: string\n            userNickname:\n              description: \u003e\n                When supplied, will constrain the search to only show user ratings\n                that belong to this nominated user.\n              type: string\n            pkgName:\n              type: string\n            pkgVersionArchitectureCode:\n              type: string\n            pkgVersionMajor:\n              type: string\n            pkgVersionMinor:\n              type: string\n            pkgVersionMicro:\n              type: string\n            pkgVersionPreRelease:\n              type: string\n            pkgVersionRevision:\n              type: integer\n              format: int32\n            daysSinceCreated:\n              description: \u003e\n                When supplied, will constrain the search to only show user ratings\n                that have been created since these many days.\n              type: integer\n              format: int32\n    searchUserRatingsResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/searchUserRatingsResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    searchUserRatingsResult:\n      type: object\n      properties:\n        total:\n          type: integer\n          format: int64\n        items:\n          type: array\n          items:\n            type: object\n            properties:\n              code:\n                type: string\n              naturalLanguageCode:\n                type: string\n              userRatingStabilityCode:\n                type: string\n              active:\n                type: boolean\n              comment:\n                type: string\n              modifyTimestamp:\n                type: integer\n                format: int64\n              createTimestamp:\n                type: integer\n                format: int64\n              rating:\n                type: integer\n                format: int32\n              pkgVersion:\n                $ref: \"#/components/schemas/searchUserRatingsPkgVersion\"\n              user:\n                $ref: \"#/components/schemas/searchUserRatingsUser\"\n    searchUserRatingsUser:\n      type: object\n      properties:\n        nickname:\n          type: string\n    searchUserRatingsPkgVersion:\n      type: object\n      properties:\n        repositoryCode:\n          type: string\n          description: \u003e\n            @deprecated please use {@link #repositorySourceCode} instead.\n        repositorySourceCode:\n          type: string\n        architectureCode:\n          type: string\n        major:\n          type: string\n        minor:\n          type: string\n        micro:\n          type: string\n        preRelease:\n          type: string\n        revision:\n          type: integer\n        pkg:\n          $ref: \"#/components/schemas/searchUserRatingsPkg\"\n    searchUserRatingsPkg:\n      type: object\n      properties:\n        name:\n          type: string\n\n    removeUserRatingRequestEnvelope:\n      type: object\n      properties:\n        code:\n          type: string\n    removeUserRatingResponseEnvelope:\n      type: object\n      properties:\n        result:\n          $ref: \"#/components/schemas/removeUserRatingResult\"\n        error:\n          $ref: \"./error.yaml#/components/schemas/error\"\n    removeUserRatingResult:\n      type: object\n",
			"canonicalURL": "/github.com/haiku/haikudepotserver@1913e126b64d3ae2ae32422e4d41c212eb2fcfd6/-/blob/haikudepotserver-api2/src/main/resources/api2/user-rating.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/haiku/haikudepotserver/blob/1913e126b64d3ae2ae32422e4d41c212eb2fcfd6/haikudepotserver-api2/src/main/resources/api2/user-rating.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"createUserRatingRequestEnvelope\": parse schema: property \"pkgVersionType\": at 1:442: parse schema: resolve \"./common.yaml#/components/schemas/pkgVersionType\": external \"./common.yaml\": get: file: local file reference is not allowed"
}