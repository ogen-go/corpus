{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/Som-Energia/somenergia-opendata"
		},
		"file": {
			"name": "openapi.yaml",
			"size": 0,
			"path": "openapi.yaml",
			"byteSize": 41063,
			"content": "# Edits of this spec should be validated using https://editor.swagger.io/\n# TODO:\n# - Error responses\n\nopenapi: 3.0.0\ninfo:\n  title: Som Energia Open Data API\n  version: 0.2.26\n  license:\n    name: GNU Affero General Public License\n    url: http://www.gnu.org/licenses/agpl-3.0.en.html\n  description: |\n    This API can be used to obtain metrics\n    about [Som Energia](https://somenergia.coop)\n    and several related visualizations and widgets.\n\n    Source metric measurements are obtained\n    at **the start** of every **first of month**\n    with **city granularity**.\n    That is the smaller resolution this API provides: month and city.\n    Coarser resolutions in time and space\n    are obtained **by aggregation** of those source measurements.\n\n    Because the measurement for a day is obtained at the begining of that day,\n    a value for 2020-01-01 will include events up to the end of 2019 but none from 2020.\n    Likewise,\n    a value for 2020-02-01 will include events up to the end of January but none about February.\n\n    Be aware that each metric has particular considerations about its meaning and reliability.\n    They are included in the metric description,\n    retrievable by means of the discovery API.\n\n    Glossary:\n\n    - **Metric:** Something to be measured\n    - **Relative metric:** Something available to relativize metrics\n      (population, surface, existing supply points, overall energy consumption...)\n    - **Geolevel:** A geographical partition: country, state, city...\n    - **Region:** Each of the elements of the geolevel.\n      For instance, at country geolevel we have as regions Spain, France...\n\nservers:\n  - url: https://opendata.somenergia.coop/v0.2\n    description: Production server\n  - url: http://localhost:5001/v0.2\n    description: Development server\n\ntags:\n- name: About\n  description: Information about the running API\n- name: Discovery\n  description: \"Discovering the evolving elements of the API: metrics, geolevels...\"\n- name: Numeric data\n  description: Obtaining processable numeric data\n- name: Maps\n  description: Generate geographical distribution maps for the metrics\n\npaths:\n\n  /version:\n    get:\n      summary: API version\n      description: Returns current and oldest backward compatible versions\n      tags: [ About ]\n      parameters:\n      - $ref: '#/components/parameters/query_format_yaml_json'\n      responses:\n        '200':\n          description: Version information\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/VersionInfo'\n              example:\n                version: '0.2.26'\n                compat: '0.2.1'\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/VersionInfo'\n              example:\n                version: '0.2.26'\n                compat: '0.2.1'\n\n  /spec:\n    get:\n      summary: API specification\n      description: API specification using OpenAPI 3.0 in YAML format.\n      tags: [ About ]\n      response:\n        '200':\n          application/yaml:\n            type: object\n\n  /discover/metrics:\n    get:\n      summary: Available metrics\n      tags: [ Discovery ]\n      parameters:\n      - $ref: '#/components/parameters/query_lang'\n      - $ref: '#/components/parameters/query_format_yaml_json'\n      responses:\n        '200':\n          description: Returns the list of available metrics\n          content:\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/MetricsInfo'\n              example:\n                metrics:\n                - id: members\n                  text: 'Members'\n                  description: \"Members of the cooperative at the end of the day.\"\n                - id: contracts\n                  text: 'Contracts'\n                  description: \"Active contracts at the end of the day.\"\n            application/json:\n              schema:\n                $ref: '#/components/schemas/MetricsInfo'\n              example:\n                metrics:\n                - id: members\n                  text: 'Members'\n                  description: \"Members of the cooperative at the end of the day.\"\n                - id: contracts\n                  text: 'Contracts'\n                  description: \"Active contracts at the end of the day.\"\n\n  /discover/geolevel:\n    get:\n      summary: Available geolevels\n      description: Returns the geolevels (short for geographical levels) that can be used in queries. For example, countries, cities...\n      tags: [ Discovery ]\n      parameters:\n      - $ref: '#/components/parameters/query_lang'\n      - $ref: '#/components/parameters/query_format_yaml_json'\n      responses:\n        '200':\n          description: A list of available geolevels\n          content:\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/GeolevelsInfo'\n              example:\n                geolevels:\n                - id: world\n                  text: 'World'\n                  mapable: False\n                - id: country\n                  text: 'Country'\n                  parent: world\n                  plural: countries\n                  mapable: False\n                - id: ccaa\n                  text: 'Autonomous Community'\n                  parent: country\n                  plural: ccaas\n                - id: state\n                  text: 'State'\n                  parent: ccaa\n                  plural: states\n                - id: city\n                  text: 'City'\n                  parent: state\n                  plural: cities\n                  mapable: False\n                - id: localgroup\n                  text: 'Local Group'\n                  parent: world\n                  plural: localgroups\n                  detailed: False\n                  mapable: False\n\n            application/json:\n              schema:\n                $ref: '#/components/schemas/GeolevelsInfo'\n              example:\n                geolevels:\n                - id: world\n                  text: 'World'\n                  mapable: False\n                - id: country\n                  text: 'Country'\n                  parent: world\n                  plural: countries\n                  mapable: False\n                - id: ccaa\n                  text: 'Autonomous Community'\n                  parent: country\n                  plural: ccaas\n                - id: state\n                  text: 'State'\n                  parent: ccaa\n                  plural: states\n                - id: city\n                  text: 'City'\n                  parent: state\n                  plural: cities\n                  mapable: False\n                - id: localgroup\n                  text: 'Local Group'\n                  parent: world\n                  plural: localgroups\n                  detailed: False\n                  mapable: False\n\n  /discover/geolevel/{geolevel}:\n    get:\n      summary: Available geolevels values\n      description: \u003e\n        Returns the available values for a given geographical division.\n      tags: [ Discovery ]\n      parameters:\n      - $ref: '#/components/parameters/path_geolevelOrAlias'\n      - $ref: '#/components/parameters/geofilter_city'\n      - $ref: '#/components/parameters/geofilter_state'\n      - $ref: '#/components/parameters/geofilter_ccaa'\n      - $ref: '#/components/parameters/geofilter_country'\n      - $ref: '#/components/parameters/geofilter_gl'\n      - $ref: '#/components/parameters/query_lang'\n      - $ref: '#/components/parameters/query_format_yaml_json'\n      responses:\n        '200':\n          description: A list of available geolevels\n          content:\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/GeolevelValues'\n              examples:\n                ccaas:\n                  summary: /discover/geolevel/ccaa?lang=es\n                  description: All the CCAA's. Force name translation to Spanish instead of using the browser language.\n                  value:\n                    options:\n                      '01': Andalucia\n                      '02': Aragón\n                      '03': Asturias, Principado de\n                      '04': Baleares, Islas\n                      '05': Canarias\n                      '06': Cantabria\n                      '07': Castilla y León\n                      '08': Castilla - La Mancha\n                      '09': Cataluña\n                      '10': Comunidad Valenciana\n                      '11': Extremadura\n                      '12': Galicia\n                      '13': Madrid, Comunidad de\n                      '14': Murcia, Región de\n                      '15': Navarra, Comunidad Foral de\n                      '16': País Vasco\n                      '17': Rioja, La\n                localgroupsccaa:\n                  summary: \"/discover/geolevel/localgroup?ccaa=09\"\n                  description: All local groups in Catalonia Autonomous Community (INE code 09)\n                  value:\n                    options:\n                      AltPenedes: Alt Penedès\n                      Anoia: Anoia\n                      Badalona: Badalona\n                      Bages: Bages\n                      BaixLlobregat: Baix Llobregat\n                      BaixMontseny: Baix Montseny\n                      BaixValles: Baix Vallès\n                      Barcelona: Barcelona\n                      CastellarValles: Castellar del Vallès\n                      CerdanyolaValles: Cerdanyola del Vallès\n                      Maresme: Maresme\n                      Osona: Osona\n                      Rubi: Rubí\n                      Sabadell: Sabadell\n                      SantCugatValles: Sant Cugat del Vallès\n                      SelvaMaritima: Selva Marítima\n                      Terrassa: Terrassa\n\n\n  /{metric}/by/{geolevel}/on/{ondate}:\n    get:\n      summary: Metric data on a given date\n      description: |\n        Returns the metric\n        computed with the given geographical level of detail\n        on a given date.\n\n        Geographical fliters in the query string\n        restrict the regions to be considered.\n        Filters are additive, a city, the lowest level of detail,\n        is incorporated if it matches any provided filter.\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `world`\n        - `/on/{date}`: when omitted means the latest available date\n\n        Some examples:\n\n        - `/contracts`\n          - Current number of contracts:\n        - `/members/by/state`\n          - Current members at every state:\n        - `/members/by/ccaa/on/2018-02-01`\n          - Members at every CCAA on 2018-02-01:\n        - `/members/by/city?state=01\u0026state=20`\n          - Members by city on Araba and Gipuzcoa provinces:\n\n      tags: [ \"Numeric data\" ]\n      parameters:\n\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_geolevel'\n      - $ref: '#/components/parameters/path_onDate'\n      - $ref: '#/components/parameters/query_lang'\n      - $ref: '#/components/parameters/query_format_yaml_json_tsv'\n      - $ref: '#/components/parameters/geofilter_city'\n      - $ref: '#/components/parameters/geofilter_state'\n      - $ref: '#/components/parameters/geofilter_ccaa'\n      - $ref: '#/components/parameters/geofilter_country'\n      - $ref: '#/components/parameters/geofilter_gl'\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/MultiLevelNumbers'\n              examples:\n                membersByCCAA:\n                  summary: /members/by/ccaa/on/2013-01-01\n                  description: |\n                    Members detailed by CCAA on 2013-01-01\n                  value:\n                    dates:\n                    - 2013-01-01\n                    values:\n                    - 3197\n                    countries:\n                      ES:\n                        name: España\n                        values:\n                        - 3197\n                        ccaas:\n                          '01':\n                            name: Andalucia\n                            values:\n                            - 48\n                          '02':\n                            name: Aragón\n                            values:\n                            - 124\n                          '03':\n                            name: Asturias, Principado de\n                            values:\n                            - 13\n                          '04':\n                            name: Baleares, Islas\n                            values:\n                            - 235\n                          '05':\n                            name: Canarias\n                            values:\n                            - 0\n                          '06':\n                            name: Cantabria\n                            values:\n                            - 12\n                          08:\n                            name: Castilla - La Mancha\n                            values:\n                            - 28\n                          '07':\n                            name: Castilla y León\n                            values:\n                            - 24\n                          09:\n                            name: Cataluña\n                            values:\n                            - 2054\n                          '10':\n                            name: Comunidad Valenciana\n                            values:\n                            - 224\n                          '11':\n                            name: Extremadura\n                            values:\n                            - 14\n                          '12':\n                            name: Galicia\n                            values:\n                            - 24\n                          '13':\n                            name: Madrid, Comunidad de\n                            values:\n                            - 145\n                          '14':\n                            name: Murcia, Región de\n                            values:\n                            - 11\n                          '15':\n                            name: Navarra, Comunidad Foral de\n                            values:\n                            - 151\n                          '16':\n                            name: País Vasco\n                            values:\n                            - 53\n                          '17':\n                            name: Rioja, La\n                            values:\n                            - 37\n            text/tab-separated-values:\n              schema:\n                type: text\n              examples:\n                tsvcitydetail:\n                  summary: /members/by/city/on/2012-01-01/?city=08089\u0026format=tsv\n                  description: |\n                    Members in Gavà at the begining of 2012 using tsv format\n                  value:\n                    \"country_code\\tcountry\\tccaa_code\\tccaa\\tstate_code\\tstate\\tcity_code\\tcity\\t2012-01-01\\n\\\n                     ES\\tEspaña\\t09\\tCatalunya\\t08\\tBarcelona\\t08089\\tGavà\\t32\\n\\\n                     \"\n                tsvccaadetail:\n                  summary: /members/by/state/on/2012-01-01/?ccaa=09\u0026format=tsv\n                  description: |\n                    Members in Catalonia by state at the begining of 2012 using tsv format\n                  value:\n                    \"country_code\\tcountry\\tccaa_code\\tccaa\\tstate_code\\tstate\\t2012-01-01\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t08\\tBarcelona\\t80\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t17\\tGirona\\t15\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t25\\tLleida\\t5\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t43\\tTarragona\\t2\\n\\\n                     \"\n\n\n  /{metric}/by/{geolevel}/{frequency}/from/{fromdate}/to/{todate}:\n    get:\n      summary: Metric data on in a series of dates\n      description: |\n        Returns the metric\n        computed with the given geographical level of detail\n        for a series of dates.\n\n        Geographical fliters in the query string\n        restrict the regions to be considered.\n        Filters are additive, a city, the lowest level of detail,\n        is incorporated if it matches any provided filter.\n\n        Use the filters in the query string to restrict to a group of geographical entities.\n        The filters are additive. That means that any city matching any of the specified values will be counted.\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `world`\n        - `/from/{date}`: when omitted means the first available date\n        - `/to/{date}`: when omitted means the latest available date\n\n        Some examples:\n\n        - `/contracts/yearly`\n          - Evolution of all contracts every year\n        - `/members/monthly/from/2018-01-01/to/2019-01-01`\n          - Monthly evolution of members during 2018\n        - `/members/by/city/yearly/from/2018-01-01?state=01\u0026state=20`\n          - Members by city on Araba (01) and Gipuzcoa (20) provinces every year since 2018\n\n\n      tags: [ \"Numeric data\" ]\n      parameters:\n\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_geolevel'\n      - $ref: '#/components/parameters/path_periodicity'\n      - $ref: '#/components/parameters/path_fromDate'\n      - $ref: '#/components/parameters/path_toDate'\n      - $ref: '#/components/parameters/query_lang'\n      - $ref: '#/components/parameters/query_format_yaml_json_tsv'\n      - $ref: '#/components/parameters/geofilter_city'\n      - $ref: '#/components/parameters/geofilter_state'\n      - $ref: '#/components/parameters/geofilter_ccaa'\n      - $ref: '#/components/parameters/geofilter_country'\n      - $ref: '#/components/parameters/geofilter_gl'\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/yaml:\n              schema:\n                $ref: '#/components/schemas/MultiLevelNumbers'\n              examples:\n                membersByCCAA:\n                  summary: /members/by/ccaa/yearly/from/2010-01-01/to/2013-01-01\n                  description: |\n                    Members detailed by CCAA, evolution from 2010-01-01 2010-01-01 yearly\n                  value:\n                    dates:\n                    - 2010-01-01\n                    - 2011-01-01\n                    - 2012-01-01\n                    - 2013-01-01\n                    values:\n                    - 0\n                    - 0\n                    - 277\n                    - 3197\n                    countries:\n                    ES:\n                        name: España\n                        values:\n                        - 0\n                        - 0\n                        - 277\n                        - 3197\n                        ccaas:\n                        '01':\n                            name: Andalucia\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 48\n                        '02':\n                            name: Aragón\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 124\n                        '03':\n                            name: Asturias, Principado de\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 13\n                        '04':\n                            name: Baleares, Islas\n                            values:\n                            - 0\n                            - 0\n                            - 1\n                            - 235\n                        '05':\n                            name: Canarias\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 0\n                        '06':\n                            name: Cantabria\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 12\n                        08:\n                            name: Castilla - La Mancha\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 28\n                        '07':\n                            name: Castilla y León\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 24\n                        09:\n                            name: Cataluña\n                            values:\n                            - 0\n                            - 0\n                            - 256\n                            - 2054\n                        '10':\n                            name: Comunidad Valenciana\n                            values:\n                            - 0\n                            - 0\n                            - 11\n                            - 224\n                        '11':\n                            name: Extremadura\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 14\n                        '12':\n                            name: Galicia\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 24\n                        '13':\n                            name: Madrid, Comunidad de\n                            values:\n                            - 0\n                            - 0\n                            - 3\n                            - 145\n                        '14':\n                            name: Murcia, Región de\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 11\n                        '15':\n                            name: Navarra, Comunidad Foral de\n                            values:\n                            - 0\n                            - 0\n                            - 6\n                            - 151\n                        '16':\n                            name: País Vasco\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 53\n                        '17':\n                            name: Rioja, La\n                            values:\n                            - 0\n                            - 0\n                            - 0\n                            - 37\n            text/tab-separated-values:\n              schema:\n                type: text\n              examples:\n                tsvseriescitydetail:\n                  summary: /members/by/city/yearly/from/2012-01-01/to/2013-01-01/?city=08089\u0026format=tsv\n                  description: |\n                    Members in Gavà from 2012 to 2013 in tsv format\n\n                    Succesive dates are added as columns\n                  value:\n                    \"country_code\\tcountry\\tccaa_code\\tccaa\\tstate_code\\tstate\\tcity_code\\tcity\\t2012-01-01\\t2013-01-01\\n\\\n                     ES\\tEspaña\\t09\\tCatalunya\\t08\\tBarcelona\\t08089\\tGavà\\t232\\t478\\n\"\n                tsvseriesccaadetail:\n                  summary: /members/by/state/yearly/from/2012-01-01/to/2013-01-01?ccaa=09\u0026format=tsv\n                  description: |\n                    Members in Catalonia by state from 2012 to 2013 using tsv format\n                  value:\n                    \"country_code\\tcountry\\tccaa_code\\tccaa\\tstate_code\\tstate\\t2012-01-01\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t08\\tBarcelona\\t80\\t120\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t17\\tGirona\\t15\\t21\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t25\\tLleida\\t5\\t12\\n\\\n                     ES\\tEspaña\\t09\\tCataluña\\t43\\tTarragona\\t2\\t11\\n\\\n                     \"\n\n  /map/{metric}/by/{geolevel}/on/{ondate}:\n    get:\n      summary: Absolute metric map\n      description: |\n        Returns a map representing the geographical distribution\n        of the metric on a given date.\n\n        Use the geolevel choose the map detail (ccaa, state).\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `ccaa` (Not world!)\n        - `/on/{date}`: when omitted means the latest available date\n\n        [Experimental] You can specify the extent of the map,\n        by default `country=ES`. It will work if a map template\n        for the combination of extent and geolevel exists.\n\n        Examples:\n\n        - `/map/contracts`\n          - Current number of contracts by ccaa\n        - `/map/members/by/state`\n          - Current members at every state\n        - `/map/members/by/ccaa/on/2018-02-01`\n          - Members at every CCAA on 2018-02-01\n        - `/map/members/by/city?localgroup=BaixMontseny`\n          - Current members at every city of Baix Montseny localgroup\n\n      tags: [ \"Maps\" ]\n      parameters:\n\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_mapgeolevel'\n      - $ref: '#/components/parameters/path_onDate'\n      - $ref: '#/components/parameters/mapextent_country'\n      - $ref: '#/components/parameters/mapextent_gl'\n      - $ref: '#/components/parameters/query_lang'\n      responses:\n        '200':\n          description: SVG map\n          content:\n            image/svg+xml:\n              schema:\n                type: string\n\n  /map/{metric}/per/{relativemetric}/by/{geolevel}/on/{ondate}:\n    get:\n      summary: Relative metric map\n      description: |\n        Returns a map representing the geographical distribution at a given date\n        of the metric relative to a reference metric (population).\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `ccaa` (Not world!)\n        - `/from/{date}`: when omitted means the first available date\n        - `/to/{date}`: when omitted means the latest available date\n\n        [Experimental] You can specify the extent of the map,\n        by default `country=ES`. It will work if a map template\n        for the combination of extent and geolevel exists.\n\n      tags: [ \"Maps\" ]\n      parameters:\n\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_relativemetric'\n      - $ref: '#/components/parameters/path_mapgeolevel'\n      - $ref: '#/components/parameters/path_onDate'\n      - $ref: '#/components/parameters/mapextent_country'\n      - $ref: '#/components/parameters/mapextent_gl'\n      - $ref: '#/components/parameters/query_lang'\n      responses:\n        '200':\n          description: SVG map\n          content:\n            image/svg+xml:\n              schema:\n                type: string\n\n  /map/{metric}/by/{geolevel}/{frequency}/from/{fromdate}/to/{todate}:\n    get:\n      summary: Absolute metric map animation\n      description: |\n        Returns an animated map of the evolving geographical distribution\n        for a serie of dates of the metric.\n\n        Use the geolevel choose the map detail (ccaa, state).\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `ccaa` (Not world!)\n        - `/from/{date}`: when omitted means the first available date\n        - `/to/{date}`: when omitted means the latest available date\n\n        [Experimental] You can specify the extent of the map,\n        by default `country=ES`. It will work if a map template\n        for the combination of extent and geolevel exists.\n\n      tags: [ \"Maps\" ]\n      parameters:\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_mapgeolevel'\n      - $ref: '#/components/parameters/path_periodicity'\n      - $ref: '#/components/parameters/path_fromDate'\n      - $ref: '#/components/parameters/path_toDate'\n      - $ref: '#/components/parameters/mapextent_country'\n      - $ref: '#/components/parameters/mapextent_gl'\n      - $ref: '#/components/parameters/query_lang'\n      responses:\n        '200':\n          description: Animated SVG map\n          content:\n            image/svg+xml:\n              schema:\n                type: string\n\n  /map/{metric}/per/{relativemetric}/by/{geolevel}/{frequency}/from/{fromdate}/to/{todate}:\n    get:\n      summary: Relative metric map animation\n      description: |\n        Returns an animated map of the evolving geographical distribution\n        for a serie of dates of the metric relative to the reference metric.\n\n        Use the geolevel choose the map detail (ccaa, state).\n\n        Elidible parts:\n\n        - `/by/{geolevel}`: when omited means `ccaa` (Not world!)\n        - `/from/{date}`: when omitted means the first available date\n        - `/to/{date}`: when omitted means the latest available date\n\n        [Experimental] You can specify the extent of the map,\n        by default `country=ES`. It will work if a map template\n        for the combination of extent and geolevel exists.\n\n      tags: [ \"Maps\" ]\n      parameters:\n      - $ref: '#/components/parameters/path_metric'\n      - $ref: '#/components/parameters/path_relativemetric'\n      - $ref: '#/components/parameters/path_mapgeolevel'\n      - $ref: '#/components/parameters/path_periodicity'\n      - $ref: '#/components/parameters/path_fromDate'\n      - $ref: '#/components/parameters/path_toDate'\n      - $ref: '#/components/parameters/mapextent_country'\n      - $ref: '#/components/parameters/mapextent_gl'\n      - $ref: '#/components/parameters/query_lang'\n      responses:\n        '200':\n          description: Animated SVG map\n          content:\n            image/svg+xml:\n              schema:\n                type: string\n\n\ncomponents:\n  parameters:\n    query_lang:\n      name: lang\n      in: query\n      required: false\n      description: |\n        Language to force for translated texts.\n        If no language is forced, the one in the browser (Accepted-Language header) is taken.\n        If the languange is not one of the supported ones, english is taken by default.\n      schema:\n        type: string\n        nullable: true\n        enum:\n        - ca\n        - gl\n        - eu\n        - es\n        - en\n        - null\n\n    query_format_yaml_json_tsv:\n      name: format\n      in: query\n      required: false\n      description:\n        Format for the result (yaml, json, tsv). yaml if not (properly) specified.\n      schema:\n        type: string\n        nullable: true\n        enum:\n        - tsv\n        - yaml\n        - json\n        - null\n\n    query_format_yaml_json:\n      name: format\n      in: query\n      required: false\n      description:\n        Format for the result (yaml, json). yaml if not (properly) specified.\n      schema:\n        type: string\n        nullable: true\n        enum:\n        - json\n        - yaml\n        - null\n\n    path_metric:\n      name: metric\n      in: path\n      required: true\n      description: |\n        The code of a supported metric (see /discover/metrics)\n      schema:\n        type: string\n        pattern: '[a-z][a-z0-9]+'\n        enum:\n        - contracts\n        - members\n        - selfconsumptioncontracts\n        - newcontracts\n        - newmembers\n        - newselfconsumptioncontracts\n        - canceledcontracts\n        - canceledmembers\n        - canceledselfconsumptioncontracts\n\n    path_relativemetric:\n      name: relativemetric\n      in: path\n      required: true\n      description: |\n        One of the supported metrics to relativize main metrics. (By now just `population`)\n      schema:\n        type: string\n        pattern: '[a-z][a-z0-9]+'\n        enum:\n        - population\n\n    path_geolevel:\n      name: geolevel\n      in: path\n      description: |\n        Geographical level of detail.\n        Use the golevel to get mor geographical detail (country, ccaa, state, city).\n        For just the global numbers, remove the whole `/by/{geolevel}` portion of the path.\n      required: true\n      schema:\n        type: string\n        pattern: '[a-z][a-z0-9]+'\n        default: null\n        nullable: true\n        enum:\n        - country\n        - ccaa\n        - state\n        - city\n        - null\n\n    path_mapgeolevel:\n      name: geolevel\n      in: path\n      description: |\n        Geographical level of detail.\n        Use the golevel to get mor geographical detail (ccaa, state).\n      required: true\n      schema:\n        type: string\n        pattern: '[a-z][a-z0-9]+'\n        enum:\n        - ccaa\n        - state\n        - city\n\n    path_geolevelOrAlias:\n      name: geolevel\n      in: path\n      description: |\n        Geographical detail level, including aliased geolevel alias, like localgroup.\n      required: true\n      schema:\n        type: string\n        pattern: '[a-z][a-z0-9]+'\n        enum:\n        - country\n        - ccaa\n        - state\n        - city\n        - localgroup\n\n    path_periodicity:\n      name: frequency\n      required: true\n      description: |\n        Indicate a date sequence (only first day of the month, year...)\n      in: path\n      schema:\n        type: string\n        enum:\n        - monthly\n        - yearly\n\n    path_onDate:\n      name: ondate\n      required: true\n      description: |\n        Single date, in ISO format (YYYY-MM-DD).\n        To obtain the last available data, remove the whole `/on/:onDate` portion of the path.\n      in: path\n      schema:\n        type: string\n        format: date\n\n    path_fromDate:\n      name: fromdate\n      required: true\n      description: |\n        Earlier date to show, in iso format (YYYY-MM-DD).\n        To set it to the first date available data, remove the whole `/from/{fromdate}` portion of the path.\n      in: path\n      schema:\n        type: string\n        format: date\n\n    path_toDate:\n      name: todate\n      required: true\n      description: |\n        Later date to show, in iso format (YYYY-MM-DD).\n        To set it to the last date available data, remove the whole `/to/{todate}` portion of the path.\n      in: path\n      schema:\n        type: string\n        format: date\n\n    geofilter_city:\n      description: INE codes of cities to be included\n      name: city\n      in: query\n      explode: true\n      schema:\n        $ref: '#/components/schemas/CodeArray'\n\n    geofilter_state:\n      description: INE codes of states to be included\n      name: state\n      in: query\n      explode: true\n      schema:\n        $ref: '#/components/schemas/CodeArray'\n\n    geofilter_ccaa:\n      description: INE codes of CCAAs to be included\n      name: ccaa\n      in: query\n      explode: true\n      schema:\n        $ref: '#/components/schemas/CodeArray'\n\n    geofilter_country:\n      description: ISO codes of countries to be included\n      name: country\n      in: query\n      explode: true\n      schema:\n        $ref: '#/components/schemas/CodeArray'\n\n    geofilter_gl:\n      description: Codes of the local groups to be included\n      name: localgroup\n      in: query\n      explode: true\n      schema:\n        $ref: '#/components/schemas/CodeArray'\n\n    mapextent_country:\n      description: |\n        (Experimental) Set the extent of the map to the country\n\n        This parameter is incompatible with other extent parameters.\n\n        Available value `ES` (the default if no other extent is specified)\n        with `state` or `ccaa` geolevels.\n      name: country\n      in: query\n      schema:\n        $ref: '#/components/schemas/GeoCode'\n\n    mapextent_gl:\n      description: |\n        (Experimental) Set the extent of the map to the local group.\n\n        This parameter is incompatible with other extent parameters.\n\n        Available values `BaixMontseny` and `BaixLlobregat`\n        with `city` geolevel.\n      name: localgroup\n      in: query\n      schema:\n        $ref: '#/components/schemas/GeoCode'\n\n  schemas:\n\n    VersionInfo:\n      type: object\n      properties:\n        version:\n          type: string\n          description: Current API version\n          example: 0.2.26\n        compat:\n          type: string\n          description: Oldest backward compatible version\n          example: 0.2.1\n\n    MetricsInfo:\n      type: object\n      required: [metrics]\n      properties:\n        metrics:\n          type: array\n          items:\n            type: object\n            properties:\n              name:\n                type: string\n                pattern: '[a-z][a-z0-9]+'\n                description: Identifier name used to refer the metric\n              text:\n                type: string\n                description: Translated text name to be shown to the user to refer the metric\n              description:\n                type: string\n                format: CommonMark\n                description: Translated Markdown text describing the metric\n\n\n    GeolevelsInfo:\n      type: object\n      properties:\n        geolevels:\n          type: array\n          items:\n            type: object\n            properties:\n              id:\n                type: string\n                pattern: '[a-z][a-z0-9]+'\n                description: Identifier name used to refer the geolevel\n              text:\n                type: string\n                description: Translated text name to be shown to the user to refer the geolevel\n              description:\n                type: string\n                format: CommonMark\n                description: Translated Markdown text describing the metric\n              plural:\n                type: string\n                pattern: '[a-z][a-z0-9]+'\n                default: id + 's'\n                description: Plural tag to use in structures\n              parent:\n                type: string\n                pattern: '[a-z][a-z0-9]+'\n                description: The parent geolevel id\n                default: null\n              detailed:\n                type: boolean\n                default: True\n                description: Set to false if it is not supported as level of detail for distributions\n              mapable:\n                type: boolean\n                default: True\n                description: Set to false if it is not supported as level of detail for map\n\n    GeolevelValues:\n      description: A list of regions at the specified geolevel\n      type: object\n      properties:\n        options:\n          type: object\n          additionalProperties:\n            type: string\n            description: Translated name of the geolevel region\n          description: Map from geolevel region code to its translated name\n\n    CodeArray:\n      type: array\n      items:\n        $ref: '#/components/schemas/GeoCode'\n\n    GeoCode:\n      type: string\n      pattern: '[a-zA-Z0-9]+'\n\n    NumbersSublevel:\n      type: object\n      properties:\n        name:\n          description: Translated name for the region\n          type: string\n        values:\n          description: Metric value for each date, aggregated for the region\n          type: array\n          items:\n            type: number\n\n    Countries:\n      description: A map of country codes to the details of each country\n      type: object\n      additionalProperties:\n        allOf:\n        - $ref: '#/components/schemas/NumbersSublevel'\n        - type: object\n          properties:\n            ccaas:\n              $ref: '#/components/schemas/CCAAs'\n\n    CCAAs:\n      description: A map of CCAA INE codes to the CCAA detailed values\n      type: object\n      additionalProperties:\n        allOf:\n        - $ref: '#/components/schemas/NumbersSublevel'\n        - type: object\n          properties:\n            states:\n              $ref: '#/components/schemas/States'\n\n    States:\n      description: A map of State INE codes to the state detailed values\n      type: object\n      additionalProperties:\n        allOf:\n        - $ref: '#/components/schemas/NumbersSublevel'\n        - type: object\n          properties:\n            cities:\n              $ref: '#/components/schemas/Cities'\n\n    Cities:\n      description: A map of city INE codes to the city detailed values\n      type: object\n      additionalProperties:\n        $ref: '#/components/schemas/NumbersSublevel'\n\n    MultiLevelNumbers:\n      description: Structured numeric information\n      type: object\n      properties:\n        dates:\n          description: sorted list of dates at which metric is computed\n          type: array\n          items:\n            type: string\n            format: Dates\n        values:\n          description: A list of metric values globally aggregated for each date\n          type: array\n          items:\n            type: number\n        countries:\n          $ref: '#/components/schemas/Countries'\n      required:\n      - dates\n      - values\n\n# vim: et ts=2 sw=2\n",
			"canonicalURL": "/github.com/Som-Energia/somenergia-opendata@4c776cdb8491b8e4bc282a4aa029a645a8a3848f/-/blob/openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/Som-Energia/somenergia-opendata/blob/4c776cdb8491b8e4bc282a4aa029a645a8a3848f/openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"GeolevelsInfo\": resolve \"#/components/schemas/GeolevelsInfo\": property \"geolevels\": items: property \"parent\": at openapi.yaml:1121:26: parse default: unexpected default \"null\" value"
}