{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/JHUAPL/PINE"
		},
		"file": {
			"name": "openapi.yaml",
			"size": 0,
			"path": "backend/pine/backend/annotations/openapi.yaml",
			"byteSize": 8311,
			"content": "# (C) 2021 The Johns Hopkins University Applied Physics Laboratory LLC.\n\nopenapi: \"3.0.2\"\n\nsecurity:\n  - cookieAuth: []\n  - eveBasicAuth: []\n  - vegasBearerAuth: []\n\ntags:\n  - name: annotations\n    description: Operations in the \"annotations\" blueprint.\n\ncomponents:\n\n  schemas:\n\n    WrappedAnnotations:\n      type: object\n      properties:\n        _items:\n          type: array\n          items:\n            $ref: \"../api/components.yaml#/schemas/UserDocumentAnnotation\"\n        _links:\n          $ref: \"../api/components.yaml#/schemas/EveLinks\"\n\npaths:\n\n  /annotations/mine/by_document_id/{doc_id}:\n    get:\n      summary: Get My Document Annotations\n      description: |\n        Get a list of annotations done by the logged in user on a document.\n        \n        Example: `curl -X GET http://localhost:5000/annotations/mine/by_document_id/60d08052f2cb44c51e0af0f1 --cookie session.cookie`\n      operationId: annotations_get_mine\n      tags: [annotations]\n      parameters:\n        - $ref: \"../api/components.yaml#/parameters/docIdParam\"\n      responses:\n        \"200\":\n          description: Successfully found document and got annotations.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/WrappedAnnotations\"\n        \"401\":\n          $ref: \"../api/components.yaml#/responses/NotAuthorized\"\n        \"404\":\n          $ref: \"../api/components.yaml#/responses/DocumentNotFound\"\n        default:\n          $ref: \"../api/components.yaml#/responses/UnexpectedServerError\"\n\n    post:\n      summary: Save My Annotations\n      description: |\n        Change annotations of a document.\n        \n        Example: `curl -X PUT http://localhost:5000/annotations/mine/by_document_id/60d08052f2cb44c51e0af0f1 --cookie session.cookie -H \"Content-type: application/json\" -d '{\"doc\":[\"sci.crypt\", \"talk.politics.misc\"],\"ner\":[{\"end\":365,\"start\":346, \"label\":\"sci.med\"}, {\"start\":475, \"end\":530, \"label\":\"alt.atheism\"}]}'`\n        \n        _Note_: start or end indices in the middle of words might make the UI not show the label.\n        Also, invalid labels are not checked and might cause the UI to freeze.\n      operationId: annotations_save_mine\n      tags: [annotations]\n      parameters:\n        - $ref: \"../api/components.yaml#/parameters/docIdParam\"\n        - name: update_iaa\n          in: query\n          required: false\n          description: Whether to also update IAA reports.\n          schema:\n            type: boolean\n            default: true\n      requestBody:\n        description: The labels to add to the document.\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: \"../api/components.yaml#/schemas/DocumentAnnotations\"\n      responses:\n        \"200\":\n          description: Successfully found document and changed annotations (returns doc_id).\n          content:\n            application/json:\n              schema:\n                type: string\n        \"400\":\n          $ref: \"../api/components.yaml#/responses/InvalidInputParameters\"\n        \"401\":\n          $ref: \"../api/components.yaml#/responses/NotAuthorized\"\n        \"404\":\n          $ref: \"../api/components.yaml#/responses/DocumentNotFound\"\n        default:\n          $ref: \"../api/components.yaml#/responses/UnexpectedServerError\"\n\n  /annotations/mine/by_collection_id/{collection_id}:\n    post:\n      summary: Set Collection Annotations\n      description: |\n        Modify annotations of certain documents in a given collection.\n        \n        Example: `curl -X POST http://localhost:5000/annotations/mine/by_collection_id/60d32ba28d34cf656fed503f --cookie session.cookie -H \"Content-type: application/json\" -d '{\"60d32ba48d34cf656fed504b\": {\"doc\":[\"sci.crypt\", \"talk.politics.misc\"],\"ner\":[[0,4,\"sci.med\"], [0,4,\"alt.atheism\"]]}, \"60d32ba48d34cf656fed504c\": {\"doc\":[], \"ner\":[[0,4,\"sci.med\"]]}}'`\n      operationId: annotations_collection\n      tags: [annotations]\n      parameters:\n        - $ref: \"../api/components.yaml#/parameters/collectionIdParam\"\n        - name: batch_mode\n          required: true\n          description: |\n            Whether or not to send all annotations to the database as one batch or individually.\n            \n            _Note_: Batch mode should ONLY be used if all of the documents have not already been annotated.\n            \n            The versioning of eve will be messed up if batch mode annotates a document with pre-existing annotations (even if old).\n            \n            To be clear, even if a document had annotations that were deleted, using batch mode on that document will cause problems.\n            \n            Conversely, using individual mode (batch_mode = False) can always be done, but will be slower.\n            \n            Another issue with individual mode is with many documents, there will be many backend queries, possibly getting rate limited.\n          schema:\n            type: boolean\n            default: true\n          in: query\n        - name: update_iaa\n          in: query\n          required: false\n          description: Whether to also update IAA reports.\n          schema:\n            type: boolean\n            default: true\n      requestBody:\n        description: The labels to add to the document.\n        required: true\n        content:\n          application/json:\n            schema:\n              description: Mapping from document ID to annotations object.\n              type: object\n              additionalProperties:\n                $ref: \"../api/components.yaml#/schemas/DocumentAnnotations\"\n              example:\n                {\"60d47b4bdbfddb3ca87c7971\": {\"doc\": [\"label1\", \"label2\"],\n                 \"ner\": [[0, 10, \"label1\"], [15, 18, \"label2\"]]}}\n      responses:\n        \"200\":\n          description: Successfully found document and changed annotations (returns annotation ids).\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  type: string\n        \"400\":\n          $ref: \"../api/components.yaml#/responses/InvalidInputParameters\"\n        \"401\":\n          $ref: \"../api/components.yaml#/responses/NotAuthorized\"\n        \"404\":\n          $ref: \"../api/components.yaml#/responses/CollectionNotFound\"\n        default:\n          $ref: \"../api/components.yaml#/responses/UnexpectedServerError\"\n\n  /annotations/others/by_document_id/{doc_id}:\n    get:\n      summary: Get Others' Document Annotations\n      description: |\n        Get a list of annotations done by everyone but me on a document.\n        \n        Example: `curl -X GET http://localhost:5000/annotations/others/by_document_id/60d08052f2cb44c51e0af0f1 --cookie session.cookie`\n      operationId: annotations_others\n      tags: [annotations]\n      parameters:\n        - $ref: \"../api/components.yaml#/parameters/docIdParam\"\n      responses:\n        \"200\":\n          description: Successfully found document and got annotations.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/WrappedAnnotations\"\n        \"401\":\n          $ref: \"../api/components.yaml#/responses/NotAuthorized\"\n        \"404\":\n          $ref: \"../api/components.yaml#/responses/DocumentNotFound\"\n        default:\n          $ref: \"../api/components.yaml#/responses/UnexpectedServerError\"\n\n  /annotations/by_document_id/{doc_id}:\n    get:\n      summary: Get All Document Annotations\n      description: |\n        Get a list of annotations done by everyone on a document.\n        \n        Example: `curl -X GET http://localhost:5000/annotations/by_document_id/60d08052f2cb44c51e0af0f1 --cookie session.cookie`\n      operationId: annotations_all\n      tags: [annotations]\n      parameters:\n        - $ref: \"../api/components.yaml#/parameters/docIdParam\"\n      responses:\n        \"200\":\n          description: Successfully found document and got annotations.\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/WrappedAnnotations\"\n        \"401\":\n          $ref: \"../api/components.yaml#/responses/NotAuthorized\"\n        \"404\":\n          $ref: \"../api/components.yaml#/responses/DocumentNotFound\"\n        default:\n          $ref: \"../api/components.yaml#/responses/UnexpectedServerError\"\n",
			"canonicalURL": "/github.com/JHUAPL/PINE@10fa7710576ff1e1b415406d0b9bf48dba813c81/-/blob/backend/pine/backend/annotations/openapi.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/JHUAPL/PINE/blob/10fa7710576ff1e1b415406d0b9bf48dba813c81/backend/pine/backend/annotations/openapi.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"WrappedAnnotations\": parse schema: property \"_items\": parse schema: item: at 1:81: parse schema: resolve \"../api/components.yaml#/schemas/UserDocumentAnnotation\": external \"../api/components.yaml\": get: file: local file reference is not allowed"
}