{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/NHSDigital/summary-care-record-api"
		},
		"file": {
			"name": "summary-care-record.yaml",
			"size": 0,
			"path": "specification/summary-care-record.yaml",
			"byteSize": 36969,
			"content": "openapi: 3.0.0\ninfo:\n  version: 1.0.0\n  title: Summary Care Record API\n  description: |\n    \n    \u003cdiv class=\"nhsd-m-emphasis-box nhsd-m-emphasis-box--emphasis nhsd-!t-margin-bottom-6\" aria-label=\"Highlighted Information\"\u003e\n        \u003cdiv class=\"nhsd-a-box nhsd-a-box--border-blue\"\u003e\n            \u003cdiv class=\"nhsd-m-emphasis-box__image-box\"\u003e\n                \u003cfigure class=\"nhsd-a-image\"\u003e\n                    \u003cpicture class=\"nhsd-a-image__picture\"\u003e\n                        \u003cimg src=\"//nhs-prod.global.ssl.fastly.net/svg-magic/binaries/content/gallery/icons/info.svg?colour=231f20\" alt=\"\" style=\"object-fit:fill\"\u003e\n                    \u003c/picture\u003e\n                \u003c/figure\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"nhsd-m-emphasis-box__content-box\"\u003e\n                \u003cdiv data-uipath=\"website.contentblock.emphasis.content\" class=\"nhsd-t-word-break\"\u003e\u003cp class=\"nhsd-t-body\"\u003eThis API is initially for use by new market entrant GP IT developers with other use cases to follow later.\u003c/p\u003e\u003c/div\u003e            \n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n    \n    ## Overview\n    Use this API to access or update a patient's [Summary Care Record (SCR)](https://digital.nhs.uk/services/summary-care-records-scr) - an electronic record of important patient information, created from GP medical records. SCRs can be seen and used by authorised staff in other areas of the health and care system involved in the patient's direct care.\n\n    Also use this API to update a patient's consent to share their SCR, and to raise a privacy alert where you have to override a patient's dissent to share their SCR in certain circumstances.\n\n    You can:\n    * get a patient's SCR identifier\n    * get a patient's SCR\n    * upload a patient's SCR\n    * send a privacy alert message, if you have to override a patient's dissent to view their SCR \n    * update a patient's consent to share their SCR\n    \n    ## Who can use this API\n    This API can only be used where there is a legal basis to do so. Make sure you have a valid use case before you go too far with your development. You must do this before you can go live (see ‘Onboarding’ below).\n\n    ## Related APIs\n    To use this API, you need the patient's NHS number, which can be retrieved by using the following API:\n      - [Personal Demographics Service (FHIR) API](https://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir) - use this API to search for patients and retrieve their details.  This API can also be used to update their details in some cases. This is the latest version of the PDS API and is recommended for all new integrators.\n\n    This API has endpoints enabling you to get and set access permissions, the same as the [Access Control Service (ACS) HL7 V3 API](https://digital.nhs.uk/developer/api-catalogue/access-control-service-hl7-v3) which it partly replaces.\n    \n    ## API status and roadmap\n    This API is initially for use by new market entrant GP IT developers with other use cases to follow later.\n    \n    This API is [in development](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#statuses), meaning:\n    - the API is available in our sandbox and integration test environments\n    - the API is not yet available for production use\n    - we might make breaking changes, but only if we cannot avoid it, and we'll give advance notice\n\n    To see our roadmap, or to suggest, comment or vote on features for this API, see our [interactive product backlog](https://nhs-digital-api-management.featureupvote.com/?order=popular\u0026filter=all\u0026tag=scr-fhir-api\u0026deleted=0#controls).\n\n    If you have any other queries, please [contact us](https://digital.nhs.uk/developer/help-and-support).\n\n    ## Technology\n    This API is [RESTful](https://digital.nhs.uk/developer/guides-and-documentation/our-api-technologies#basic-rest).\n\n    It conforms to the [FHIR](https://digital.nhs.uk/developer/guides-and-documentation/our-api-technologies#fhir) global standard for health care data exchange, specifically to [FHIR R4 (v4.0.1)](https://hl7.org/fhir/r4/), except that it does not support the [capabilities](http://hl7.org/fhir/R4/http.html#capabilities) interaction.\n\n    It includes some country-specific FHIR extensions, which are built against [FHIR UK Core](https://digital.nhs.uk/services/fhir-uk-core), specifically [UK.core.r4.v2 2.0.5](https://simplifier.net/packages/uk.core.r4.v2/2.0.5).\n\n    You do not need to know much about FHIR to use this API - FHIR APIs are just RESTful APIs that follow specific rules. In particular:\n        - array names are singular, for example `line` not `lines` for address lines\n        - data items that are country-specific and thus not included in the FHIR global base resources are usually wrapped in an `extension` object\n\n    ## Network access\n    This API is available on the internet and, indirectly, on the [Health and Social Care Network (HSCN)](https://digital.nhs.uk/services/health-and-social-care-network). To use this API with [NHS smartcards](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/nhs-smartcards-for-developers), the end user needs an HSCN connection, although internet-facing alternatives to smartcards are available.\n\n    For more details see [Network access for APIs](https://digital.nhs.uk/developer/guides-and-documentation/network-access-for-apis).\n\n\n    ## Security and authorisation\n    This API is [user-restricted](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation#user-restricted-apis), meaning an end user must be present and authenticated to use it.\n\n    The end user must be:\n    - a healthcare professional\n    - strongly authenticated, using either an [NHS smartcard or a modern alternative](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/nhs-smartcards-for-developers) available via [NHS Care Identity Service 2 (NHS CIS2)](https://digital.nhs.uk/services/nhs-identity)\n\n    The API uses OAuth 2.0 to authorise the calling system. It supports the following security patterns:\n\n    - [user-restricted RESTful API - using NHS CIS2 - combined authentication and authorisation](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation)\n    - [user-restricted RESTful API - using NHS CIS2 - separate authentication and authorisation](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-separate-authentication-and-authorisation)\n\n    For more details, see [user-restricted APIs](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation#user-restricted-apis).\n\n\n    ## Environments and testing\n    | Purpose                                | Base URL                                            |\n    | ---------------------------------------|-----------------------------------------------------|\n    | Sandbox                                | `https://sandbox.api.service.nhs.uk/summary-care-record/FHIR/R4`|\n    | Integration test                       | `https://int.api.service.nhs.uk/summary-care-record/FHIR/R4`    |\n\n\n\n    ### Sandbox testing\n    Our [sandbox environment](https://digital.nhs.uk/developer/guides-and-documentation/testing#sandbox-testing):\n      - is for early developer testing\n      - only covers a limited set of scenarios\n      - is stateless, so it does not actually persist any updates\n      - is open access, so does not allow you to test authorisation\n\n      For more details on sandbox testing, or to try out the sandbox using our \\\"Try this API\\\" feature, see the documentation for each endpoint.\n\n    ### Integration testing\n    Our [integration test environment](https://digital.nhs.uk/developer/guides-and-documentation/testing#integration-testing):\n\n    * is for formal integration testing\n    * is stateful, so persists updates\n    * includes authorisation, with [smartcard](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/nhs-smartcards-for-developers) and non-smartcard options\n\n    It also includes ready-to-use [summary care record test data](https://digital.nhs.uk/developer/api-catalogue/summary-care-record-fhir/summary-care-record-fhir-api-test-data).\n\n    For more details see [integration testing with our RESTful APIs](https://digital.nhs.uk/developer/guides-and-documentation/testing#integration-testing-with-our-restful-apis).   \n\n\n    ## Onboarding\n    You need to get your software approved by us before it can go live with this API. We call this onboarding. The onboarding process can sometimes be quite long, so it’s worth planning well ahead.\n    \n    This API uses our online digital onboarding process.\n    \n    As part of this process, you need to demonstrate that you can manage risks and that your software conforms technically with the requirements for this API.\n    \n    Information on this page might impact the design of your software. For details, see [Onboarding support information](https://digital.nhs.uk/developer/api-catalogue/summary-care-record-fhir/onboarding-support-information).\n    \n    To get started, see [digital onboarding](https://digital.nhs.uk/developer/guides-and-documentation/digital-onboarding).\n    \n    ## Errors\n    We use standard HTTP status codes to show whether an API request succeeded or not. They are usually in the range:\n\n    * 200 to 299 if it succeeded, including code 202 if it was accepted by an API that needs to wait for further action\n    * 400 to 499 if it failed because of a client error by your application\n    * 500 to 599 if it failed because of an error on our server\n    \n    Errors specific to each API are shown in the Endpoints section, under Response. See our [reference guide](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#http-status-codes) for more on errors.\n\n  license:\n    name: MIT\n  contact:\n    name: Summary Care Record FHIR API Support\n    url: 'https://digital.nhs.uk/developer/help-and-support'\n    email: api.management@nhs.net\nx-nhsd-api-platform:\n  meta:\n    name: Summary Care Record API\n    canonical_name: summary-care-record\n    short_name: scr\n    description: This is a generated template API\n    pipeline_name_prefix: \"Summary-Care-Record\"\nservers:\n  - url: 'https://sandbox.api.service.nhs.uk/summary-care-record/FHIR/R4'\n    description: Sandbox environment\n  - url: 'https://int.api.service.nhs.uk/summary-care-record/FHIR/R4'\n    description: Integration test environment.\nx-spec-publication:\n  operation-order:\n  - operations:\n    - method: GET\n      path: /DocumentReference\n    - method: GET\n      path: /Bundle\n    - method: POST\n      path: /Bundle\n    - method: POST\n      path: /AuditEvent\n    - method: POST\n      path: /$setPermission\npaths:\n  /Bundle:\n    post:\n      description: |\n        ## Overview\n        Use this endpoint to upload the details of patient's Summary Care Record.\n\n        To execute the upload you must provide patient's NHS number.\n        In case of an update, before executing the request, latest UUID must be obtained using GET /DocumentReference endpoint\n        and set inside the request body.\n\n        ## Sandbox test scenarios\n        You can test the following scenarios in our sandbox environment:\n        \n        | Scenario                          | Request                                           | Response                                                                                                                              |\n        | ----------------------------------| ------------------------------------------------- | -------------------- |\n        | Happy path                        | `Patient.identifier.value`=`9000000009`           | HTTP Status 201      |\n        | No patient's consent to store SCR | `Patient.identifier.value`=`9111231130`           | HTTP Status 403      |\n      \n      summary: Upload patient's Summary Care Record\n      operationId: upload-scr\n      parameters:\n        - $ref: '#/components/parameters/BearerAuthorization'\n        - $ref: '#/components/parameters/CorrelationID'\n        - $ref: '#/components/parameters/RequestID'\n        - $ref: '#/components/parameters/RoleID'\n        - $ref: '#/components/parameters/ContentType'\n      requestBody:\n        required: true\n        content:\n          application/fhir+json:\n            schema:\n              $ref: components/schemas/UploadBundle.yaml\n            example:\n              $ref: components/examples/UploadScrBundle.json\n      responses:\n        \"201\":\n          description: SCR successfully uploaded\n        \"4XX\":\n          description: |\n            An error occurred as follows:\n\n            | HTTP status | Issue severity | Issue code    | Description |\n            | ----------- | -------------- | ------------- | --------------------------------------------- |\n            | 400         | error          | invalid       | Bad request, error in business logic on the client's side |\n            | 401         | error          | forbidden     | Unauthorized, access token missing, invalid or expired |\n            | 403         | error          | forbidden     | There's no patient's consent to store SCR |\n            | 415         | error          | not-supported | Unsupported Media Type, Content-Type header is invalid or missing |\n            | 429         | error          | -             | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits). |\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: invalid\n                    details:\n                      text: \"[PSIS-30134] - Duplicate event with eventId FFFBB3CF-62F3-11EC-BCD6-024734D13536 and nhsNumber 9111231130.\"\n        \"500\":\n          description: Internal Server Error\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcomeInternalServerError.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: unknown\n                    details:\n                      coding:\n                        system: \"https://fhir.nhs.uk/CodeSystem/Spine-ErrorOrWarningCode\"\n                        version: 1\n                        code: UNKNOWN_ERROR\n                        display: Unknown Error\n                    diagnostics: \"An unknown error occurred processing this request. Contact us for assistance diagnosing this issue: https://digital.nhs.uk/developer/help-and-support. (Message ID: rrt-4161241190348351641-b-geu2-4210-928960-20)\"\n        \"503\":\n          description: Service unavailable\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: transient\n                    details:\n                      \"text\": \"Code: 502, Display: Service Not Available\"\n        \"504\":\n          description: |\n            The request timed out during processing. This does not imply the request has failed or been rejected.\n            Re-send the request using the same `X-Request-ID` value. Wait 5 seconds before the first retried request.\n            Where multiple retries are necessary, adopt an exponential back-off approach.\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: transient\n                    details:\n                      text: Request processing timed out. Spine POST + polling GET has timed out\n    get:\n      description: |\n        ## Overview\n        Use this endpoint to retrieve the details of a patient's most recent Summary Care Record.\n\n        You must specify the NHS number and the UUID of the latest Summary Care Record of this patient. This UUID should be obtained using the GET /DocumentReference endpoint.\n\n        If you specify an out-of-date UUID, this endpoint returns a Bundle with 0 entries.\n\n        ## Sandbox test scenarios\n        You can test the following scenarios in our sandbox environment:\n\n        | Scenario                         | Request                                                                                                                             | Response                          |\n        | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------|---------------------------------- |\n        | Happy path                       | `composition.identifier`=`FA60BE64-1F34-11EB-A2A8-000C29A364EB` `composition.subject:Patient.identifier`=`9000000009`               | HTTP Status 200 - Full Bundle     |\n        | No results                       | `composition.identifier`=`81CC2DA0-8882-11EB-B538-0800200C9A66` `composition.subject:Patient.identifier`=`9000000033`               | HTTP Status 200 - Empty Bundle    |\n        \n      summary: Get patient's Summary Care Record\n      operationId: get-scr\n      parameters:\n        - $ref: '#/components/parameters/BearerAuthorization'\n        - $ref: '#/components/parameters/CorrelationID'\n        - $ref: '#/components/parameters/RequestID'\n        - in: query\n          name: composition.identifier\n          description: Latest Patient's Summary Care Record identifier. Can be obtained using GET /DocumentReference endpoint.\n          example: FA60BE64-1F34-11EB-A2A8-000C29A364EB\n          required: true\n          schema:\n            type: string\n        - in: query\n          name: composition.subject:Patient.identifier\n          description: The patient's NHS number. Must be preceded with FHIR identifier (eg.\"composition.subject:Patient.identifier=https://fhir.nhs.uk/Id/nhs-number|9000000009\")\n          example: https://fhir.nhs.uk/Id/nhs-number|9000000009\n          required: true\n          schema:\n            type: string\n\n      responses:\n        \"200\":\n          description: SCR successfully returned\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/GetScrBundle.yaml\n              example:\n                $ref: components/examples/GetScrBundle.json\n        \"4XX\":\n          description: |\n            An error occurred as follows:\n\n            | HTTP status | Issue severity | Issue code    | Description |\n            | ----------- | -------------- | ------------- | --------------------------------------------- |\n            | 400         | error          | invalid       | Bad request, error in business logic on the client's side |\n            | 401         | error          | forbidden     | Unauthorized, access token missing, invalid or expired |\n            | 403         | error          | forbidden     | There's no patient's consent to store SCR |\n            | 429         | error          | -             | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits). |\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: forbidden\n                    details:\n                      text: \"Code: 420, Display: Business condition related to access control  which prevents the action being performed by PSIS;Code: 30418, Display: [PSIS-30418] - ACF does not permit access to resource\"\n        \"500\":\n          description: Internal Server Error\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcomeInternalServerError.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: unknown\n                    details:\n                      coding:\n                        system: \"https://fhir.nhs.uk/CodeSystem/Spine-ErrorOrWarningCode\"\n                        version: 1\n                        code: UNKNOWN_ERROR\n                        display: Unknown Error\n                    diagnostics: \"An unknown error occurred processing this request. Contact us for assistance diagnosing this issue: https://digital.nhs.uk/developer/help-and-support. (Message ID: rrt-4161241190348351641-b-geu2-4210-928960-20)\"\n        \"503\":\n          description: Service unavailable\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: transient\n                    details:\n                      \"text\": \"Code: 502, Display: Service Not Available\"\n  /DocumentReference:\n    get:\n      summary: Get patient's latest Summary Care Record identifier\n      operationId: get-scr-id\n      description: |\n        ## Overview\n        Use this endpoint to retrieve UUID of patient's latest record.\n        The UUID is required to retrieve the Summary Care Record details using GET /Bundle endpoint\n        and to update the details of patient's Summary Care Record using POST /Bundle endpoint.\n        \n        This endpoint also returns patient’s consent status in the securityLabel attribute of a successful API response.\n\n        To get the information you must provide patient's NHS number.\n        When no NHS Number is supplied in the patient query parameter, 400 HTTP status is returned.\n\n        ## Sandbox test scenarios\n        You can test the following scenarios in our sandbox environment:\n        \n        | Scenario                          | Request                           | Response                           |\n        | ----------------------------------| --------------------------------- | ---------------------------------- |\n        | Happy path                        | `nhs-number=9000000009`           | HTTP Status 200 - Full Bundle      |\n        | Empty result                      | `nhs-number=9000000033`           | HTTP Status 200 - Empty Bundle     |\n        \n      parameters:\n        - $ref: '#/components/parameters/BearerAuthorization'\n        - $ref: '#/components/parameters/CorrelationID'\n        - $ref: '#/components/parameters/RequestID'\n        - $ref: '#/components/parameters/RoleID'\n        - in: query\n          name: patient\n          description: The patient's NHS number. Must be preceded with FHIR identifier (eg.\"patient=https://fhir.nhs.uk/Id/nhs-number|9000000009\")\n          required: true\n          example: https://fhir.nhs.uk/Id/nhs-number|9000000009\n          schema:\n            type: string\n            \n        - in: query\n          name: type\n          description: General Practice Summary snomed code. Must be equal \"type=http://snomed.info/sct|196981000000101\"\n          required: false\n          example: http://snomed.info/sct|196981000000101\n          schema:\n            type: string\n          \n        - in: query\n          name: _sort\n          description: Defines how Patient's SCR list should be sorted in order to retrieve the latest one. The only supported value is _sort=date. If a different value is provided HTTP 400 Bad Request will be returned.\n          required: false\n          example: date\n          schema:\n            type: string\n             \n        - in: query\n          name: _count\n          description: Defines the number of latest patient SCR IDs that sgould be retrieved. Currently the only supported value is _count=1. If a different value is provided HTTP 400 Bad Request will be returned.\n          required: false\n          example: 1\n          schema:\n            type: integer\n              \n      responses:\n        \"200\":\n          description: Success response\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/DocumentReferenceBundle.yaml\n              example:\n                $ref: components/examples/DocumentReferenceBundle.json\n        \"4XX\":\n          description: |\n            An error occurred as follows:\n\n            | HTTP status | Issue severity | Issue code    | Description |\n            | ----------- | -------------- | ------------- | --------------------------------------------- |\n            | 400         | error          | invalid       | Bad request, error in business logic on the client's side |\n            | 401         | error          | forbidden     | Unauthorized, access token missing, invalid or expired |\n            | 403         | error          | forbidden     | There's no patient's consent to store SCR |\n            | 429         | error          | -             | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits). |\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: forbidden\n                    details:\n                      text: Invalid access token\n        \"500\":\n          description: Internal Server Error\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcomeInternalServerError.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: unknown\n                    details:\n                      coding:\n                        system: \"https://fhir.nhs.uk/CodeSystem/Spine-ErrorOrWarningCode\"\n                        version: 1\n                        code: UNKNOWN_ERROR\n                        display: Unknown Error\n                    diagnostics: \"An unknown error occurred processing this request. Contact us for assistance diagnosing this issue: https://digital.nhs.uk/developer/help-and-support. (Message ID: rrt-4161241190348351641-b-geu2-4210-928960-20)\"\n        \"503\":\n          description: Service unavailable\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: transient\n                    details:\n                      \"text\": \"Code: 502, Display: Service Not Available\"\n  /$setPermission:\n    post:\n      summary: Update patient's consent to share SCR\n      operationId: acs\n      description: |\n        ## Overview\n        Use this endpoint to update the Permission to share the GP Summaries\n\n        ## Sandbox test scenarios\n        You can test the following scenarios in our sandbox environment:\n\n        | Scenario                         | Request                                                                      | Response             |\n        | -------------------------------- | ---------------------------------------------------------------------------- | -------------------- |\n        | Happy path                       | `NHSD-Session-URID`=`555254240100`; `nhsNumber`=`9000000009`                 | HTTP Status 201      |\n        | Patient not found                | `NHSD-Session-URID`=`555254240100`; `nhsNumber`=`9111231130`                 | HTTP Status 400      |\n        \n      parameters:\n        - $ref: '#/components/parameters/BearerAuthorization'\n        - $ref: '#/components/parameters/CorrelationID'\n        - $ref: '#/components/parameters/RequestID'\n        - $ref: '#/components/parameters/RoleID'\n        - $ref: '#/components/parameters/ContentType'\n      requestBody:\n        required: true\n        content:\n          application/fhir+json:\n            schema:\n              $ref: components/schemas/Parameters.yaml\n            example:\n              $ref: components/examples/SetPermission.json\n      responses: \n        \"201\": \n          description: Permission successfully updated\n        \"4XX\":\n          description: |\n            An error occurred as follows:\n\n            | HTTP status | Issue severity | Issue code    | Description |\n            | ----------- | -------------- | ------------- | --------------------------------------------- |\n            | 400         | error          | invalid       | Bad request, error in business logic on the client's side |\n            | 401         | error          | forbidden     | Unauthorized, access token missing, invalid or expired |\n            | 415         | error          | not-supported | Unsupported Media Type, Content-Type header is invalid or missing |\n            | 429         | error          | -             | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits). |\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: not-supported\n                    details:\n                      text: Content type 'text/plain' not supported\n        \"500\":\n          description: Internal Server Error\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcomeInternalServerError.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: unknown\n                    details:\n                      coding:\n                        system: \"https://fhir.nhs.uk/CodeSystem/Spine-ErrorOrWarningCode\"\n                        version: 1\n                        code: UNKNOWN_ERROR\n                        display: Unknown Error\n                    diagnostics: \"An unknown error occurred processing this request. Contact us for assistance diagnosing this issue: https://digital.nhs.uk/developer/help-and-support. (Message ID: rrt-4161241190348351641-b-geu2-4210-928960-20)\"\n\n  /AuditEvent:\n    post:\n      summary: Send a privacy alert message\n      operationId: alert\n      description: |\n        ## Overview\n        Use this endpoint to send a privacy alert where it is necessary to override patient's dissent to share their SCR in certain circumstances.\n\n        ## Sandbox test scenarios\n        You can test the following scenarios in our sandbox environment:\n\n        | Scenario                         | Request                                  | Response             |\n        | -------------------------------- | ---------------------------------------- | -------------------- |\n        | Happy path                       | `nhsNumber`=`9000000009`                 | HTTP Status 201      |\n        \n      parameters:\n        - $ref: '#/components/parameters/BearerAuthorization'\n        - $ref: '#/components/parameters/CorrelationID'\n        - $ref: '#/components/parameters/RequestID'\n        - $ref: '#/components/parameters/RoleID'\n        - $ref: '#/components/parameters/ContentType'\n      requestBody:\n        required: true\n        content:\n          application/fhir+json:\n            schema:\n              $ref: components/schemas/AuditEvent.yaml\n            example:\n              $ref: components/examples/AuditEvent.json\n      responses:\n        \"201\":\n          description: Success response\n        \"4XX\":\n          description: |\n            An error occurred as follows:\n\n            | HTTP status | Issue severity | Issue code    | Description |\n            | ----------- | -------------- | ------------- | --------------------------------------------- |\n            | 400         | error          | invalid       | Bad request, error in business logic on the client's side |\n            | 401         | error          | forbidden     | Unauthorized, access token missing, invalid or expired |\n            | 415         | error          | not-supported | Unsupported Media Type, Content-Type header is invalid or missing |\n            | 429         | error          | -             | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits). |\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcome.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: invalid\n                    details:\n                      text: NHS number missing\n        \"500\":\n          description: Internal Server Error\n          content:\n            application/fhir+json:\n              schema:\n                $ref: components/schemas/OperationOutcomeInternalServerError.yaml\n              example:\n                resourceType: OperationOutcome\n                issue:\n                  - severity: error\n                    code: unknown\n                    details:\n                      coding:\n                        system: \"https://fhir.nhs.uk/CodeSystem/Spine-ErrorOrWarningCode\"\n                        version: 1\n                        code: UNKNOWN_ERROR\n                        display: Unknown Error\n                    diagnostics: \"An unknown error occurred processing this request. Contact us for assistance diagnosing this issue: https://digital.nhs.uk/developer/help-and-support. (Message ID: rrt-4161241190348351641-b-geu2-4210-928960-20)\"\ncomponents:\n  parameters:\n    BearerAuthorization:\n      in: header\n      name: Authorization\n      description: |\n        An [OAuth 2.0 bearer token](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation#user-restricted-apis).\n        Required in all environments except sandbox.\n      required: true\n      schema:\n        type: string\n        format: '^Bearer\\ [[:ascii:]]+$'\n        example: 'Bearer g1112R_ccQ1Ebbb4gtHBP1aaaNM'\n    CorrelationID:\n      in: header\n      name: X-Correlation-ID\n      required: false\n      description: |\n        A globally unique identifier (GUID) for the request, which we use to trace the request if you contact our helpdesk.\n\n        Mirrored back in a response header.\n\n        Avoid `.` characters.\n      schema:\n        type: string\n        example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA\n    RequestID:\n      in: header\n      name: X-Request-ID\n      required: false\n      description: |\n        A globally unique identifier (GUID) for the request, which we use to de-duplicate repeated requests.\n\n        Must be a universally unique identifier (UUID) (ideally version 4).\n        If you re-send a failed request, use the same value in this header.\n        Mirrored back in a response header.\n      schema:\n        type: string\n        pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'\n        example: 60E0B220-8136-4CA5-AE46-1D97EF59D068\n\n    RoleID:\n      in: header\n      name: NHSD-Session-URID\n      description: |\n\n        The user role ID (URID) for the current session. Also known as a user role profile ID (URPID).\n\n        This header is optional.\n\n        In user-restricted access mode if you send this header it must be valid for the logged-in user. See [determin the user's role](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation#step-7-determine-the-user-s-role) for guidance.\n\n      required: false\n      schema:\n        type: string\n        pattern: '^[0-9]+$'\n        example: '555021935107'\n    ContentType:\n      in: header\n      name: Content-Type\n      description: |\n        Used to indicate what type of data is actually sent\n      required: true\n      schema:\n        type: string\n        example: 'application/fhir+json'\n",
			"canonicalURL": "/github.com/NHSDigital/summary-care-record-api@7a21151c49f84b37de5fe1282b9c98df593c7bc5/-/blob/specification/summary-care-record.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/NHSDigital/summary-care-record-api/blob/7a21151c49f84b37de5fe1282b9c98df593c7bc5/specification/summary-care-record.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse path items: path \"/AuditEvent\": post: operation \"alert\": requestBody: parse content: application/fhir+json: schema: parse schema: $ref: resolve \"components/schemas/AuditEvent.yaml\": property \"subtype\": items: property \"code\": at https://raw.githubusercontent.com/NHSDigital/summary-care-record-api/7a21151c49f84b37de5fe1282b9c98df593c7bc5/specification/components/schemas/AuditEvent.yaml:52:17: parse enum values: parse value \"1\": expected type \"string\", got \"number\""
}