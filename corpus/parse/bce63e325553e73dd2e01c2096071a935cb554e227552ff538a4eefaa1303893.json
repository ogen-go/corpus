{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/interledger/rafiki"
		},
		"file": {
			"name": "token-introspection.yaml",
			"size": 0,
			"path": "packages/auth/src/openapi/token-introspection.yaml",
			"byteSize": 5993,
			"content": "openapi: 3.1.0\ninfo:\n  title: Rafiki Authorization Server - Resource Server Connection\n  version: '1.0'\n  license:\n    name: Apache 2.0\n    identifier: Apache-2.0\n  summary: Rafiki Authorization Server - Resource Server Connection\n  description: 'The Open Payments API is secured via [GNAP](https://datatracker.ietf.org/doc/html/draft-ietf-gnap-core-protocol). This specification describes the connection between the Rafiki Open Payments Authorization Server and the Rafiki Open Payments Resource Server, which is an opinionated version of the [Grant Negotiation and Authorization Protocol Resource Server Connections](https://datatracker.ietf.org/doc/html/draft-ietf-gnap-resource-servers).'\n  contact:\n    email: tech@interledger.org\nservers:\n  - url: 'https://openpayments.guide/auth'\ntags:\n  - name: introspection\n    description: Token introspection\npaths:\n  /introspect:\n    parameters: []\n    post:\n      summary: Introspect Access Token\n      operationId: post-introspect\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  active:\n                    type: boolean\n                  grant:\n                    type: string\n                  access:\n                    $ref: ./schemas.yaml#/components/schemas/access\n                  key:\n                    $ref: '#/components/schemas/key'\n                  client_id:\n                    type: string\n                    description: Opaque client identifier.\n                required:\n                  - active\n              examples:\n                Token Introspection:\n                  value:\n                    active: true\n                    grant: 1ee48d97-8fa1-4ab4-b89d-95284b665517\n                    access:\n                      - type: outgoing-payment\n                        actions:\n                          - create\n                          - read\n                        identifier: 'https://openpayments.guide/alice'\n                        limits:\n                          interval: 'R12/2019-08-24T14:15:22Z/P1M'\n                          receiver: 'https://openpayments.guide/bob/incoming-payments/48884225-b393-4872-90de-1b737e2491c2'\n                          sendAmount:\n                            value: '500'\n                            assetCode: USD\n                            assetScale: 2\n                    key:\n                      proof: httpsig\n                      jwk:\n                        alg: EdDSA\n                        kid: 20f24ce2-a5f6-4f28-bf7d-ed52d0490187\n                        kty: OKP\n                        use: sig\n                        crv: Ed25519\n                        x: AAAAC3NzaC1lZDI1NTE5AAAAIK0wmN/Cr3JXqmLW7u+g9pTh+wyqDHpSQEIQczXkVx9q\n                    client_id: 581a1dd9-aef5-4b1a-9d78-c1afc4a5fdbf\n        '404':\n          description: Not Found\n      description: Introspect an access token to get grant details.\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                access_token:\n                  type: string\n                  description: The access token value presented to the RS by the client instance.\n                proof:\n                  type: string\n                  description: The proofing method used by the client instance to bind the token to the RS request.\n                resource_server:\n                  oneOf:\n                    - $ref: '#/components/schemas/key'\n                    - type: string\n                  description: 'The identification used to authenticate the resource server making this call, either by value or by reference.'\n                access:\n                  $ref: ./schemas.yaml#/components/schemas/access\n              required:\n                - access_token\n                - resource_server\n            examples:\n              Introspect token:\n                value:\n                  access_token: OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0\n                  proof: httpsig\n                  resource_server: 7C7C4AZ9KHRS6X63AJAO\n      tags:\n        - introspection\ncomponents:\n  schemas:\n    key:\n      title: key\n      type: object\n      description: A key presented by value MUST be a public key.\n      properties:\n        proof:\n          type: string\n          enum:\n            - httpsig\n          description: The form of proof that the client instance will use when presenting the key.\n        jwk:\n          type: object\n          properties:\n            kid:\n              type: string\n            alg:\n              type: string\n              description: 'The cryptographic algorithm family used with the key. The only allowed value is `EdDSA`. '\n              enum:\n                - EdDSA\n            use:\n              type: string\n              enum:\n                - sig\n            kty:\n              type: string\n              enum:\n                - OKP\n            crv:\n              type: string\n              enum:\n                - Ed25519\n            x:\n              type: string\n              pattern: '^[a-zA-Z0-9-_]+$'\n              description: The base64 url-encoded public key.\n          required:\n            - kid\n            - alg\n            - kty\n            - crv\n            - x\n          title: Ed25519 Public Key\n          description: A JWK representation of an Ed25519 Public Key\n          examples:\n            - kid: key-1\n              use: sig\n              kty: OKP\n              crv: Ed25519\n              x: 11qYAYKxCrfVS_7TyWQHOg7hcvPapiMlrwIaaPcHURo\n            - kid: '2022-09-02'\n              use: sig\n              kty: OKP\n              crv: Ed25519\n              x: oy0L_vTygNE4IogRyn_F5GmHXdqYVjIXkWs2jky7zsI\n      required:\n        - proof\n        - jwk\n  securitySchemes:\n    GNAP:\n      name: Authorization\n      type: apiKey\n      in: header\nsecurity:\n  - GNAP: []\n",
			"canonicalURL": "/github.com/interledger/rafiki@62186dc6b4c92e0c66ceafe65e10a42088a5d6a4/-/blob/packages/auth/src/openapi/token-introspection.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/interledger/rafiki/blob/62186dc6b4c92e0c66ceafe65e10a42088a5d6a4/packages/auth/src/openapi/token-introspection.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse path items: path \"/introspect\": post: operation \"post-introspect\": requestBody: parse content: application/json: schema: parse schema: property \"access\": at packages/auth/src/openapi/token-introspection.yaml:93:25: $ref: resolve \"./schemas.yaml#/components/schemas/access\": resolve: unexpected type \"!!str\""
}