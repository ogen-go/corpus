{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/CDCgov/prime-reportstream"
		},
		"file": {
			"name": "reports.yml",
			"size": 0,
			"path": "prime-router/docs/api/reports.yml",
			"byteSize": 7335,
			"content": "openapi: 3.0.2\ninfo:\n  title: Prime ReportStream\n  description: A router of public health data from multiple senders and receivers\n  contact:\n    name: USDS at Centers for Disease Control and Prevention\n    url: https://reportstream.cdc.gov\n    email: reportstream@cdc.gov\n  version: 0.2.0-oas3\npaths:\n\n  # The reports end-point handles data payload submissions to ReportStream.\n  #\n  /reports:\n    post:\n      summary: Post a report to the data hub\n      security:\n        - ApiKeyAuth: []\n      parameters:\n        - in: query\n          name: client\n          description: The client's name that matches the client name in metadata\n          schema:\n            type: string\n          required: true\n          example: simple_report\n        - in: query\n          name: option\n          description: Optional ways to process the request\n          required: false\n          schema:\n            type: string\n            enum:\n              - ValidatePayload # Validate the payload, but do not process. return 200 on OK or 400 on fail\n              - CheckConnections # Health check\n              - SendImmediately # Send the reports immediately, skip batching and timing\n              - SkipSend # Validate and route but do not send reports. Data is kept in the hub.\n          example: ValidatePayload\n        - in: query\n          name: default\n          description: Dynamic default values for an element. ':' or %3A is used to seperate element name and value\n          required: false\n          style: form\n          explode: false\n          schema:\n            type: array\n            items:\n              type: string\n          example: processing_mode_code%3AD\n        - in: query\n          name: routeTo\n          description: A comma speparated list of receiver names. Limit the list of possible receivers to these receivers.\n          required: false\n          schema:\n            type: array\n            items:\n              type: string\n          example: fl-phd.elr,fl-phd.download\n        - in: query\n          name: processing\n          description: \"'sync' or 'async'. defaults to 'sync'. Determines if the incoming message will follow the sync or async process\"\n          required: false\n          schema:\n              type: string\n          example: async\n        - in: query\n          name: payloadName\n          description: Optional string name for the data payload submitted.   Typically a filename or other name useful to the sender's record-keeping.  Tracked, but not used, by ReportStream.  Must never include PII/PHI.\n          required: false\n          schema:\n            type: string\n          example: C:/foo/bar/baz/quux/myfile.hl7\n      requestBody:\n        description: The public health information being routed\n        required: true\n        content:\n          text/csv:\n            schema:\n              type: string\n            example:\n              header1, header2\n\n              value1, value2\n      responses:\n        '200':\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '201':\n          description: Created. A report was created, but items may have been rejected.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '400':\n          description: Invalid request. No report created.\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Report'\n        '500':\n          description: Internal Server Error\n\n# Building\ncomponents:\n  schemas:\n    Report:\n      type: object\n      required: [\"id\"]\n      properties:\n        id:\n          description: the id for the report assigned by the Hub\n          type: string\n        timestamp:\n          description: the timestamp for this report submission\n          type: string\n          format: date-time\n        topic:\n          description: the topic configured for the client organization sender\n          type: string\n        reportItemCount:\n          description: total number of individual reports sent to the Hub (in a csv, the number of data lines sent)\n          type: integer\n        destinations:\n          description: where the report is being sent to\n          type: array\n          items:\n            $ref: '#/components/schemas/Destination'\n        destinationCount:\n          description: total destinations recieving the report(s)\n          type: integer\n        routing:\n          description: The receiver destination names for each item in the report. This is displayed when verbose=true is present on the query string.\n          type: array\n          items:\n            $ref: '#/components/schemas/ItemRouting'\n        errorCount:\n          description: total errors found during initial validation.  There may be multiple errors per item.\n          type: integer\n        warningCount:\n          description: total warnings found during initial validation.  There may be multiple warnings per item.\n          type: integer\n        errors:\n          description: a list of errors in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/Detail'\n        warnings:\n          description: a list of warnings in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/Detail'\n\n    Detail:\n      type: object\n      properties:\n        scope:\n          type: string\n          description: Does the error apply to one item\n          enum:\n            - Parameter\n            - Report\n            - Item\n        id:\n          type: string\n          description: Depends on scope, either the item's id (message_id) or the report's id\n        detail:\n          type: string\n          description: The details of the error\n\n    Destination:\n      type: object\n      properties:\n        organization:\n          type: string\n          description: The name of the organization reciving the report\n        organization_id:\n          type: string\n          description: The organization id (i.e. {state abbreviation}-phd)\n        service:\n          type: string\n          description: The service used for delivering the report\n        filteredReportRows:\n          type: array\n          description: \"Information about the rows filtered from the report due to quality.\"\n          items:\n            type: string\n        sending_at:\n          type: string\n          format: date-time\n          description: The time at which the report will be sent\n        itemCount:\n          type: integer\n          description: The number of reports being sent to this destination\n\n    ItemRouting:\n      type: object\n      properties:\n        reportIndex:\n          type: integer\n          description: the index of the item in the submitted report (0 based)\n        trackingId:\n          type: string\n          description: The tracking id provided by the sender defined in the schema, null otherwise\n        destinations:\n          description: The organization and service destinations\n          type: array\n          items:\n            type: string\n\n  securitySchemes:\n    ApiKeyAuth:\n      $ref: 'https://raw.githubusercontent.com/CDCgov/prime-reportstream/master/prime-router/docs/api/components/security_schemes.yml#/ApiKeyAuth'\n",
			"canonicalURL": "/github.com/CDCgov/prime-reportstream@51d8587ca4287484d017e728502eeeec150f05cb/-/blob/prime-router/docs/api/reports.yml",
			"externalURLs": [
				{
					"url": "https://github.com/CDCgov/prime-reportstream/blob/51d8587ca4287484d017e728502eeeec150f05cb/prime-router/docs/api/reports.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse operations: path \"/reports\": at 1:3411: post: at 1:3419: security: parse security scheme \"ApiKeyAuth\": at 1:2943: : unknown security scheme type \"\""
}