{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/dianagudu/motley_cue"
		},
		"file": {
			"name": "openapi.yml",
			"size": 0,
			"path": "doc/source/api/openapi.yml",
			"byteSize": 22864,
			"content": "openapi: 3.0.2\ninfo:\n  title: motley_cue\n  description: A service for mapping OIDC identities to local identities\n  version: 0.3.0\npaths:\n  /user:\n    get:\n      tags:\n        - user\n      summary: Read Root\n      description: 'Retrieve user API information:\n\n\n        * description\n\n        * available endpoints\n\n        * security'\n      operationId: read_root_user_get\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema: {}\n  /user/get_status:\n    get:\n      tags:\n        - user\n      summary: Get Status\n      description: 'Get information about your local account:\n\n\n        * **state**: one of the supported states, such as deployed, not_deployed,\n        suspended.\n\n        * **message**: could contain additional information, such as the local username\n\n\n        Requires an authorised user.'\n      operationId: get_status_user_get_status_get\n      parameters:\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FeudalResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Get Status User Get Status Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Get Status User Get Status Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Get Status User Get Status Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /user/deploy:\n    get:\n      tags:\n        - user\n      summary: Deploy\n      description: 'Provision a local account.\n\n\n        Requires an authorised user.'\n      operationId: deploy_user_deploy_get\n      parameters:\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FeudalResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Deploy User Deploy Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Deploy User Deploy Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Deploy User Deploy Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /user/suspend:\n    get:\n      tags:\n        - user\n      summary: Suspend\n      description: 'Suspends a local account.\n\n\n        Requires an authorised user.'\n      operationId: suspend_user_suspend_get\n      parameters:\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FeudalResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Suspend User Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Suspend User Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Suspend User Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /user/generate_otp:\n    get:\n      tags:\n        - user\n      summary: Generate Otp\n      description: 'Generates and stores a new one-time password, using token as shared\n        secret.\n\n\n        Requires an authorised user.'\n      operationId: generate_otp_user_generate_otp_get\n      parameters:\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/OTPResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Generate Otp User Generate Otp Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Generate Otp User Generate Otp Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Generate Otp User Generate Otp Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /admin:\n    get:\n      tags:\n        - admin\n      summary: Read Root\n      description: 'Retrieve admin API information:\n\n\n        * description\n\n        * available endpoints\n\n        * security'\n      operationId: read_root_admin_get\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema: {}\n  /admin/suspend:\n    get:\n      tags:\n        - admin\n      summary: Suspend\n      description: 'Suspends a local account mapped to given OIDC account -- uniquely\n\n        identified by issuer and subject claims.\n\n\n        Requires a user with admin rights.\n\n        '\n      operationId: suspend_admin_suspend_get\n      parameters:\n        - description: sub claim of the user to be suspended\n          required: true\n          schema:\n            title: Sub\n            type: string\n            description: sub claim of the user to be suspended\n          name: sub\n          in: query\n        - description: OIDC provider of user to be suspended\n          required: true\n          schema:\n            title: Iss\n            type: string\n            description: OIDC provider of user to be suspended\n          name: iss\n          in: query\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FeudalResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Suspend Admin Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Suspend Admin Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Suspend Admin Suspend Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /admin/resume:\n    get:\n      tags:\n        - admin\n      summary: Resume\n      description: 'Resumes a suspended local account mapped to given OIDC account\n        -- uniquely\n\n        identified by issuer and subject claims.\n\n\n        Requires a user with admin rights.\n\n        '\n      operationId: resume_admin_resume_get\n      parameters:\n        - description: sub claim of the user to be suspended\n          required: true\n          schema:\n            title: Sub\n            type: string\n            description: sub claim of the user to be suspended\n          name: sub\n          in: query\n        - description: OIDC provider of user to be suspended\n          required: true\n          schema:\n            title: Iss\n            type: string\n            description: OIDC provider of user to be suspended\n          name: iss\n          in: query\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FeudalResponse'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Resume Admin Resume Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Resume Admin Resume Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Resume Admin Resume Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /:\n    get:\n      summary: Read Root\n      description: 'Retrieve general API information:\n\n\n        * description\n\n        * available endpoints\n\n        * security'\n      operationId: read_root__get\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema: {}\n  /info:\n    get:\n      summary: Info\n      description: 'Retrieve service-specific information:\n\n\n        * login info\n\n        * supported OPs'\n      operationId: info_info_get\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Info'\n  /info/authorisation:\n    get:\n      summary: Info Authorisation\n      description: 'Retrieve authorisation information for specific OP.\n\n\n        Requires:\n\n\n        * that the OP is supported\n\n        * authentication with this OP'\n      operationId: info_authorisation_info_authorisation_get\n      parameters:\n        - description: OIDC Access Token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/InfoAuthorisation'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Info Authorisation Info Authorisation Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Info Authorisation Info Authorisation Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Info Authorisation Info Authorisation Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\n  /verify_user:\n    get:\n      summary: Verify User\n      description: 'Verify that the authenticated user has a local account with the\n        given **username**.\n\n\n        Requires the user to be authorised on the service.\n\n        '\n      operationId: verify_user_verify_user_get\n      parameters:\n        - description: username to compare to local username\n          required: true\n          schema:\n            title: Username\n            type: string\n            description: username to compare to local username\n          name: username\n          in: query\n        - description: OIDC Access Token or valid one-time token\n          required: true\n          schema:\n            title: Authorization\n            type: string\n            description: OIDC Access Token or valid one-time token\n          name: Authorization\n          in: header\n      responses:\n        '200':\n          description: Successful Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/VerifyUser'\n        '401':\n          description: Unauthorized\n          content:\n            application/json:\n              schema:\n                title: Response 401 Verify User Verify User Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '403':\n          description: Forbidden\n          content:\n            application/json:\n              schema:\n                title: Response 403 Verify User Verify User Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '404':\n          description: Not Found\n          content:\n            application/json:\n              schema:\n                title: Response 404 Verify User Verify User Get\n                anyOf:\n                  - $ref: '#/components/schemas/ClientError'\n                  - $ref: '#/components/schemas/FlaatError'\n        '422':\n          description: Validation Error\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HTTPValidationError'\n      security:\n        - HTTPBearer: []\ncomponents:\n  schemas:\n    ClientError:\n      title: ClientError\n      required:\n        - detail\n      type: object\n      properties:\n        detail:\n          title: Detail\n          type: string\n    FeudalResponse:\n      title: FeudalResponse\n      required:\n        - state\n        - message\n      type: object\n      properties:\n        state:\n          title: State\n          type: string\n          example: deployed\n        message:\n          title: Message\n          type: string\n          example: User was created and was added to groups wlcg.\n        credentials:\n          title: Credentials\n          type: object\n          default: {}\n          example:\n            commandline: ssh wlcg001@localhost\n            description: Local SSH Test Service\n            login_help: Login via `mccli ssh {login_host}`.\n            ssh_host: localhost\n            ssh_user: wlcg001\n    FlaatError:\n      title: FlaatError\n      required:\n        - error\n        - error_description\n        - error_details\n      type: object\n      properties:\n        error:\n          title: Error\n          type: string\n        error_description:\n          title: Error Description\n          type: string\n        error_details:\n          title: Error Details\n          type: string\n    HTTPValidationError:\n      title: HTTPValidationError\n      type: object\n      properties:\n        detail:\n          title: Detail\n          type: array\n          items:\n            $ref: '#/components/schemas/ValidationError'\n    Info:\n      title: Info\n      required:\n        - login_info\n        - supported_OPs\n      type: object\n      properties:\n        login_info:\n          title: Login Info\n          type: object\n          example:\n            description: Local SSH Test Service\n            login_help: Login via `mccli ssh {login_host}`.\n            ssh_host: localhost\n        supported_OPs:\n          title: Supported Ops\n          type: array\n          items: {}\n          example:\n            - https://aai.egi.eu/oidc\n            - https://login.helmholtz.de/oauth2\n    InfoAuthorisation:\n      title: InfoAuthorisation\n      required:\n        - OP\n        - authorisation_type\n        - authorisation_info\n      type: object\n      properties:\n        OP:\n          title: Op\n          type: string\n          example: https://wlcg.cloud.cnaf.infn.it/\n        authorisation_type:\n          title: Authorisation Type\n          type: string\n          example: VO-based\n        authorisation_info:\n          title: Authorisation Info\n          type: string\n          example: Users who are in one of the supported VOs are authorised\n        supported_VOs:\n          title: Supported Vos\n          type: array\n          items: {}\n          default: []\n          example:\n            - /wlcg\n        audience:\n          title: Audience\n          anyOf:\n            - type: string\n            - type: array\n              items:\n                type: string\n          default: ''\n          example: ssh_localhost\n    OTPResponse:\n      title: OTPResponse\n      required:\n        - supported\n      type: object\n      properties:\n        supported:\n          title: Supported\n          type: boolean\n          example: true\n        successful:\n          title: Successful\n          type: boolean\n          default: false\n          example: true\n    ValidationError:\n      title: ValidationError\n      required:\n        - loc\n        - msg\n        - type\n      type: object\n      properties:\n        loc:\n          title: Location\n          type: array\n          items:\n            type: string\n        msg:\n          title: Message\n          type: string\n        type:\n          title: Error Type\n          type: string\n    VerifyUser:\n      title: VerifyUser\n      required:\n        - state\n        - verified\n      type: object\n      properties:\n        state:\n          title: State\n          type: string\n          example: deployed\n        verified:\n          title: Verified\n          type: boolean\n          example: true\n  securitySchemes:\n    HTTPBearer:\n      type: http\n      description: OIDC Access Token\n      scheme: bearer\n",
			"canonicalURL": "/github.com/dianagudu/motley_cue@7b5babecb14e0dbd58bd2f687aa4b064f018bd83/-/blob/doc/source/api/openapi.yml",
			"externalURLs": [
				{
					"url": "https://github.com/dianagudu/motley_cue/blob/7b5babecb14e0dbd58bd2f687aa4b064f018bd83/doc/source/api/openapi.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: schemas: \"FeudalResponse\": resolve \"#/components/schemas/FeudalResponse\": property \"credentials\": at doc/source/api/openapi.yml:659:20: parse default: unexpected type: \"object\""
}