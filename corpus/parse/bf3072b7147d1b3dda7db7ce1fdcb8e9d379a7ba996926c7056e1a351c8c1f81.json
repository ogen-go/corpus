{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/CDCgov/prime-reportstream"
		},
		"file": {
			"name": "waters-reports.yml",
			"size": 0,
			"path": "prime-router/docs/api/waters-reports.yml",
			"byteSize": 8823,
			"content": "openapi: \"3.0.3\"\ninfo:\n  title: ReportStream Reports API\n  version: \"1.0\"\n  contact:\n    name: USDS at Centers for Disease Control and Prevention\n    url: https://open.cdc.gov\n    email: usds@cdc.gov\npaths:\n  /api/waters/reports:\n    post:\n      description: submit a report to be routed\n      security:\n        - OAuth2: [ system_admin ]\n      parameters:\n        - name: processing\n          in: query\n          description: flag for processing the report in a different manner\n          schema:\n            type: string\n            enum: [ async ]\n      requestBody:\n        description: The public health information being routed\n        required: true\n        content:\n          text/csv:\n            schema:\n              type: string\n              format: hl7\n              example:\n                Patient_last_name,Patient_first_name\n                tests,Jordan\n      responses:\n        '200':\n          description: the detailed report history object\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DetailedSubmissionHistory'\n        '401':\n          description: unknown or invalid sender\n  /api/waters/report/{id}/history:\n    get:\n      description: return detailed history of a single submitted report\n      security:\n        - OAuth2: [ user ]\n      parameters:\n        - name: id\n          in: path\n          description: a valid UUID or actionId (aka submissionId)\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: the detailed report history object\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DetailedSubmissionHistory'\n        '401':\n          description: unauthorized\n        '404':\n          description: either there is no report with the given id or the report is not a submission\n        '500':\n          description: unable to fetch history due to Data Access Exception\ncomponents:\n  schemas:\n    DetailedSubmissionHistory:\n      type: object\n      properties:\n        submissionId:\n          description: the row number for this report's action log\n          type: integer\n        timestamp:\n          description: the timestamp for this report submission\n          type: string\n          format: date-time\n        sender:\n          description: the name of the sender account\n          type: string\n        httpStatus:\n          description: response given to the sender upon submission\n          type: integer\n        id:\n          description: the uuid for this submission\n          type: string\n          format: uuid\n        topic:\n          description: the schema topic (e.g. COVID-19, Flu)\n          type: string\n        reportItemCount:\n          description: total number of individual reports sent to the Hub (in a csv, the number of data lines sent)\n          type: integer\n        overallStatus:\n          description: the step in the delivery process for a submission\n          type: string\n          enum:\n            - Error\n            - Received\n            - Not Delivering\n            - Waiting to Deliver\n            - Partially Delivered\n            - Delivered\n        plannedCompletionAt:\n          description: when this submission is expected to finish sending\n          type: string\n          format: date-time\n        actualCompletionAt:\n          description: marks the actual time this submission finished sending\n          type: string\n          format: date-time\n        errorCount:\n          description: total errors found during initial validation.  There may be multiple errors per item.\n          type: integer\n        warningCount:\n          description: total warnings found during initial validation.  There may be multiple warnings per item.\n          type: integer\n        destinations:\n          description: where the report is being sent to\n          type: array\n          items:\n            $ref: '#/components/schemas/Destination'\n        errors:\n          description: a list of errors in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/ErrorWarningLog'\n        warnings:\n          description: a list of warnings in the report\n          type: array\n          items:\n            $ref: '#/components/schemas/ErrorWarningLog'\n        externalName:\n          description: the input report's external name\n          type: string\n        destinationCount:\n          description: total destinations recieving the report(s)\n          type: integer\n    Destination:\n      type: object\n      properties:\n        organization:\n          type: string\n          description: the name of the organization reciving the report\n        organization_id:\n          type: string\n          description: the organization id (i.e. {state abbreviation}-phd)\n        service:\n          type: string\n          description: the service used for delivering the report\n        itemCount:\n          type: integer\n          description: the number of items being sent to this destination\n        itemCountBeforeQualityFiltering:\n          type: integer\n          description: the number of items available for this destination prior to quality filtering\n        sending_at:\n          type: string\n          format: date-time\n          description: The time at which the report will be sent\n        filteredReportRows:\n          type: array\n          description: \"Information about the rows filtered from the report due to quality.\"\n          items:\n            type: string\n        filteredReportItems:\n          description: list of the filtering actions that resulted in items being removed\n          type: array\n          items:\n            $ref: '#/components/schemas/FilteredReportItem'\n        sentReports:\n          description: reports that have been sent to this destination as part of the submission being looked at\n          type: array\n          items:\n            $ref: '#/components/schemas/ReportLog'\n        downloadedReports:\n          description: reports for this destination that have been downloaded as part of the submission being looked at\n          type: array\n          items:\n            $ref: '#/components/schemas/ReportLog'\n    FilteredReportItem:\n      type: object\n      properties:\n        filterType:\n          description: the filter type being used\n          type: string\n          enum:\n            - jurisdictionalFilter\n            - qualityFilter\n            - routingFilter\n            - processingModeFilter\n        filterName:\n          description: the name of the filter function that removed the rows\n          type: string\n          enum:\n            - filterByCounty\n            - matches\n            - doesNotMatch\n            - orEquals\n            - hasValidDataFor\n            - hasAtLeastOneOf\n            - atLeastOneHasValue\n            - allowAll\n            - allowNone\n            - isValidCLIA\n        filteredTrackingElement:\n          description: the trackingElement value of the items removed\n          type: string\n        filterArgs:\n          description: the arguments used in the filter function\n          type: array\n          items:\n            type: string\n        message:\n          description: user-friendly explanation of the filtering action\n          type: string\n    ReportLog:\n      type: object\n      properties:\n        reportId:\n          description: the uuid for this report\n          type: string\n          format: uuid\n        externalName:\n          description: name of the hl7 file version of this report\n          type: string\n        createdAt:\n          description: the time at which this report was sent/downloaded\n          type: string\n          format: date-time\n        itemCount:\n          description: number of items in this report\n          type: integer\n    ErrorWarningLog:\n      type: object\n      properties:\n        scope:\n          description: how wide-randing is this log?\n          type: string\n          enum:\n            - parameter\n            - report\n            - item\n        indices:\n          description: for item scope, list of the index of each log that hit this particular error/warning\n          type: array\n          items:\n            type: integer\n        trackingIds:\n          description: for item scope, list of tracking ids for matching logs\n          type: array\n          items:\n            type: string\n        field:\n          description: field that triggered the error/warning\n          type: string\n        message:\n          description: user-friendly explanation of the error/warning\n          type: string\n\n  securitySchemes:\n    OAuth2:\n      $ref: 'https://raw.githubusercontent.com/CDCgov/prime-reportstream/master/prime-router/docs/api/components/security_schemes.yml#/OAuth2'\n",
			"canonicalURL": "/github.com/CDCgov/prime-reportstream@51d8587ca4287484d017e728502eeeec150f05cb/-/blob/prime-router/docs/api/waters-reports.yml",
			"externalURLs": [
				{
					"url": "https://github.com/CDCgov/prime-reportstream/blob/51d8587ca4287484d017e728502eeeec150f05cb/prime-router/docs/api/waters-reports.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse operations: paths: /api/waters/report/{id}/history: get: security: parse security scheme \"OAuth2\": : unknown security scheme type \"\""
}