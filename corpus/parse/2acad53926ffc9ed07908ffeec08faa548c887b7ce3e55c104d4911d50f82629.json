{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/bangumi/server"
		},
		"file": {
			"name": "private.yaml",
			"size": 0,
			"path": "openapi/private.yaml",
			"byteSize": 7124,
			"content": "openapi: 3.0.2\ninfo:\n  title: \"Bangumi Private API\"\n  version: \"\"\n  description: \"`next.bgm.tv` 域名不支持跨域，\"\nservers:\n  - url: https://next.bgm.tv\n    description: Production server\n\nx-parameters:\n  default_query_limit: &default_query_limit\n    required: false\n    schema:\n      title: Limit\n      maximum: 50\n      minimum: 1\n      type: integer\n      default: 30\n    name: limit\n    description: 分页参数\n    in: query\n\n  default_query_offset: &default_query_offset\n    required: false\n    schema:\n      title: Offset\n      minimum: 0\n      type: integer\n      default: 0\n    description: 分页参数\n    name: offset\n    in: query\n\ntags:\n  - name: Auth\n\npaths:\n  \"/p/login\":\n    post:\n      tags:\n        - Auth\n      summary: 登录\n      operationId: login\n      description: |\n        `h-captcha-response` 是 [hCaptcha 的验证码](https://docs.hcaptcha.com/#add-the-hcaptcha-widget-to-your-webpage)\n\n        site key 是 `4874acee-9c6e-4e47-99ad-e2ea1606961f`\n      requestBody:\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - email\n                - password\n                - h-captcha-response\n              properties:\n                email:\n                  type: string\n                password:\n                  type: string\n                h-captcha-response:\n                  type: string\n      responses:\n        \"200\":\n          description: \"账号密码正确，设置 Cookies\"\n          headers:\n            Set-Cookie:\n              description: 设置 cookies session\n              schema:\n                type: string\n                example: sessionID=abcde12345; Path=/; HttpOnly\n          content:\n            application/json:\n              schema:\n                \"$ref\": \"#/components/schemas/User\"\n\n        \"400\":\n          description: 请求错误或者验证码错误\n          content:\n            application/json:\n              example:\n                \"title\": \"Bad Request\"\n                \"details\":\n                  - \"Email为必填字段\"\n                  - \"Password为必填字段\"\n                  - \"HCaptchaResponse为必填字段\"\n                \"description\": \"can't validate request body\"\n              schema:\n                title: ErrorDetail\n                required:\n                  - title\n                  - description\n                  - detail\n                type: object\n                properties:\n                  title:\n                    title: Title\n                    type: string\n                  description:\n                    title: Description\n                    type: string\n                  detail:\n                    title: Detail\n                    type: array\n                    items:\n                      type: string\n\n        \"401\":\n          description: 账号或密码错误\n          content:\n            application/json:\n              schema:\n                title: ErrorDetail\n                required:\n                  - title\n                  - description\n                  - detail\n                type: object\n                properties:\n                  title:\n                    title: Title\n                    type: string\n                  description:\n                    title: Description\n                    type: string\n                  detail:\n                    title: Detail\n                    type: object\n                    properties:\n                      \"remain\":\n                        type: integer\n                        description: 剩余可用登录次数。\n\n        \"415\":\n          description: \"content-type 不是 `application/json`\"\n\n        \"422\":\n          description: \"JSON 语法错误\"\n\n        \"502\":\n          description: hCaptcha HTTP 请求失败\n\n  \"/p/logout\":\n    post:\n      tags:\n        - Auth\n      summary: 登出\n      operationId: logout\n      security:\n        - CookiesSession: []\n      responses:\n        \"204\":\n          description: \"正常登出\"\n\n        \"401\":\n          description: 用户未登录或者 session 已失效\n\n  \"/p/me\":\n    get:\n      tags:\n        - Auth\n      summary: 获取当前用户\n      operationId: getCurrentUser\n      security:\n        - CookiesSession: []\n      responses:\n        \"200\":\n          description: \"返回当前用户\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/User\"\n        \"401\":\n          description: 用户未登录或者 session 已失效\n\n  \"/p/groups/{name}\":\n    get:\n      tags:\n        - 小组\n      summary: 获取小组首页信息\n      operationId: getGroupProfileByName\n      parameters:\n        - name: name\n          in: path\n          schema:\n            type: string\n          description: \"小组名，类似于 `https://bgm.tv/groups/boring` 的 `boring`\"\n          required: true\n      responses:\n        \"200\":\n          description: \"返回当前用户\"\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Group\"\n        \"404\":\n          description: 小组不存在\n\n  \"/p/groups/{name}/members\":\n    get:\n      tags:\n        - 小组\n      summary: 获取小组成员信息\n      operationId: listGroupMembersByName\n      parameters:\n        - name: name\n          in: path\n          schema:\n            type: string\n          description: \"小组名，类似于 `https://bgm.tv/groups/boring` 的 `boring`\"\n          required: true\n        - name: type\n          in: query\n          schema:\n            type: string\n            default: \"all\"\n            enum:\n              - mod\n              - normal\n              - all\n          description: 成员类型，默认为 `all`\n          required: true\n        - *default_query_limit\n        - *default_query_offset\n      responses:\n        \"200\":\n          description: \"列出用户\"\n          content:\n            application/json:\n              schema:\n                title: Paged[GroupMember]\n                allOf:\n                  - $ref: \"#/components/schemas/Paged\"\n                  - type: object\n                    properties:\n                      data:\n                        title: Data\n                        type: array\n                        items:\n                          \"$ref\": \"#/components/schemas/GroupMember\"\n\n        \"404\":\n          description: 小组不存在\n\ncomponents:\n  schemas:\n    User:\n      $ref: \"./components/user.yaml\"\n    Group:\n      $ref: \"./components/private/group.yaml\"\n    Avatar:\n      $ref: \"./components/avatar.yaml\"\n    ErrorDetail:\n      $ref: \"./components/error_detail.yaml\"\n    Paged:\n      type: object\n      properties:\n        total:\n          title: Total\n          type: integer\n        limit:\n          title: Limit\n          type: integer\n        offset:\n          title: Offset\n          type: integer\n    GroupMember:\n      type: array\n      items:\n        \"$ref\": \"./components/private/group_member.yaml\"\n  securitySchemes:\n    CookiesSession:\n      name: sessionID\n      type: apiKey\n      in: cookie\n",
			"canonicalURL": "/github.com/bangumi/server@b053b42c1f504c78269c87321d5b6f0f1cd91a07/-/blob/openapi/private.yaml",
			"externalURLs": [
				{
					"url": "https://github.com/bangumi/server/blob/b053b42c1f504c78269c87321d5b6f0f1cd91a07/openapi/private.yaml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse components: at 1:15: schemas: \"User\": parse schema: resolve \"./components/user.yaml\": external \"./components/user.yaml\": file: local file reference is not allowed"
}