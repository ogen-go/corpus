{
	"File": {
		"__typename": "FileMatch",
		"repository": {
			"name": "github.com/gravitee-io/gravitee-docs"
		},
		"file": {
			"name": "swagger.yml",
			"size": 0,
			"path": "am/current/uma2/swagger.yml",
			"byteSize": 15823,
			"content": "#\n# Copyright (C) 2015 The Gravitee team (http://gravitee.io)\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\nopenapi: 3.0.0\ninfo:\n  title: Gravitee.io - Access Management - UMA 2.0 API\n  description: |\n    Gravitee.io - Access Management - User Managed Access (UMA) 2.0 API\n    Defines an extension OAuth 2.0 grant type to allow resource owner to\n    manage fine grained permissions to their resources.\n  version: 2.10.x\n  contact:\n    email: contact@graviteesource.com\n  license:\n    name: Apache 2.0\n    url: http://www.apache.org/licenses/LICENSE-2.0.html\n\nservers:\n  - url: https://auth.gravitee.io/{domain}/oauth\n    variables:\n      domain:\n        default: unknown\n\npaths:\n  #Protection API - Resource registration\n  \"/uma/protection/resource_set\":\n    get:\n      tags:\n        - Protection API - Resource registration\n      summary: List resource set belonging to current resource owner and client.\n      responses:\n        200:\n          description: Ok\n          content:\n            \"application/json\":\n              schema:\n                type: array\n                items:\n                  type: string\n                example:\n                  - \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n                  - \"90344694-0479-4ad8-b338-020d840b2cd3\"\n                  - \"027f039d-e213-4004-9f13-1eba0e25146f\"\n                  - \"a972436a-2ab2-4f31-a435-beae54b84b74\"\n                  - \"77256629-4ede-4083-a0a3-b4b94cf0949b\"\n                  - \"1a1c5230-a5a3-4752-96ce-03e9f26cc37d\"\n        204:\n          description: No content\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    post:\n      tags:\n        - Protection API - Resource registration\n      summary: Adds a new resource description to the authorization server.\n      requestBody:\n        $ref: \"#/components/requestBodies/Resource\"\n      responses:\n        201:\n          description: Created\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/Resource\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n  \"/uma/protection/resource_set/{resource_id}\":\n    get:\n      tags:\n        - Protection API - Resource registration\n      summary: Get resource description\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n      responses:\n        200:\n          description: Ok\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Resource\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    put:\n      tags:\n        - Protection API - Resource registration\n      summary: Update resource description\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n      requestBody:\n        $ref: \"#/components/requestBodies/Resource\"\n      responses:\n        200:\n          description: Ok\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/Resource\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    delete:\n      tags:\n        - Protection API - Resource registration\n      summary: Delete resource description\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n      responses:\n        204:\n          description: No content\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n  #Protection API - Access Policies\n  \"/uma/protection/resource_set/{resource_id}/policies\":\n    get:\n      tags:\n        - Protection API - Resource access policies\n      summary: List resource's access policies\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n      responses:\n        200:\n          description: Ok\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: \"#/components/schemas/AccessPolicy\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    post:\n      tags:\n        - Protection API - Resource access policies\n      summary: Create access policy\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n      requestBody:\n        $ref: \"#/components/requestBodies/AccessPolicy\"\n      responses:\n        201:\n          description: Created\n          content:\n            \"application/json\":\n              schema:\n                $ref: \"#/components/schemas/AccessPolicy\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n  \"/uma/protection/resource_set/{resource_id}/policies/{policy_id}\":\n    get:\n      tags:\n        - Protection API - Resource access policies\n      summary: Get access policy description\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        - in: path\n          name: policy_id\n          description: access policy identifier\n          required: true\n          schema:\n            type: string\n          example: \"8de2b2d0-a580-6017-b0d2-eed7df99e1b6\"\n      responses:\n        200:\n          description: Ok\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/AccessPolicy\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    put:\n      tags:\n        - Protection API - Resource access policies\n      summary: Update access policy\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        - in: path\n          name: policy_id\n          description: access policy identifier\n          required: true\n          schema:\n            type: string\n          example: \"8de2b2d0-a580-6017-b0d2-eed7df99e1b6\"\n      requestBody:\n        $ref: \"#/components/requestBodies/AccessPolicy\"\n      responses:\n        200:\n          description: Ok\n          content:\n            application/json:\n              schema:\n                $ref: \"#/components/schemas/AccessPolicy\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n    delete:\n      tags:\n        - Protection API - Resource access policies\n      summary: Delete access policy\n      parameters:\n        - in: path\n          name: resource_id\n          description: resource identifier\n          required: true\n          schema:\n            type: string\n          example: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        - in: path\n          name: policy_id\n          description: access policy identifier\n          required: true\n          schema:\n            type: string\n          example: \"8de2b2d0-a580-6017-b0d2-eed7df99e1b6\"\n      responses:\n        204:\n          description: No content\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n  #Protection API - Permissions\n  \"/uma/protection/permission\":\n    post:\n      tags:\n        - Protection API - Permission Request\n      summary: Request permission to access to one or more registered resources.\n      requestBody:\n        $ref: \"#/components/requestBodies/Permission\"\n      responses:\n        201:\n          description: Created\n          content:\n            \"application/json\":\n              schema:\n                type: object\n                properties:\n                  ticket:\n                    type: string\n                example:\n                  ticket: \"d2d04c4e-e7ff-4817-9820-198bf7c859dc\"\n        401:\n          $ref: \"#/components/responses/Unauthorized\"\n        403:\n          $ref: \"#/components/responses/Forbidden\"\n\nsecurity:\n  - PAT:\n      - uma_protection\n\ncomponents:\n  # security: scheme definition\n  securitySchemes:\n    PAT:\n      type: oauth2\n      flows:\n        authorizationCode:\n          authorizationUrl: https://${host}/${basePath}/oauth/authorize\n          tokenUrl: https://${host}/${basePath}/oauth/token\n          scopes:\n            uma_protection: UMA Protection Api Token (PAT) scope\n  # Request bodies definition\n  requestBodies:\n    # Request for resource registration\n    Resource:\n      description: |\n        If the request is successful, the resource is thereby registered and the authorization server will respond with an HTTP 2xx status\n        and include a Location header of the associated resource, as well as and an _id parameter into the response body.\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/Resource_body\"\n    # Request for resource access policies\n    AccessPolicy:\n      description: |\n        If the request is successful, the access policy is thereby registered and the authorization server will respond with an HTTP 2xx status\n        and include a Location header of the associated access policy.\n      content:\n        application/json:\n          schema:\n            $ref: \"#/components/schemas/AccessPolicy_body\"\n    Permission:\n      description: |\n        Request one or more permissions, _(resource identifiers and corresponding scopes)_ with the authorization server on the client's behalf.\n        If the request is successful, the authorization server will respond with an HTTP 200 and include a permission ticket in return.\n        This permission ticket will later be used to consume the oauth 2.0 token endpoint.\n      content:\n        application/json:\n          schema:\n            oneOf:\n              - $ref: \"#/components/schemas/Permission_single_resource\"\n              - $ref: \"#/components/schemas/Permission_multiple_resource\"\n  # Responses bodies definition\n  responses:\n    Unauthorized:\n      description: Unauthorized\n      content:\n        \"application/json\":\n          schema:\n            $ref: \"#/components/schemas/Oauth2Error\"\n    Forbidden:\n      description: Forbidden\n      content:\n        \"application/json\":\n          schema:\n            $ref: \"#/components/schemas/Oauth2Error\"\n    InvalidRequest:\n      description: Invalid Request\n      content:\n        \"application/json\":\n          schema:\n            $ref: \"#/components/schemas/Oauth2Error\"\n  # Other object format definition\n  schemas:\n    # Schema for error response body\n    Oauth2Error:\n      type: object\n      properties:\n        error:\n          type: string\n        error_description:\n          type: string\n        error_uri:\n          type: string\n      required:\n        - error\n    # Schema with body resource input fields\n    Resource_body:\n      type: object\n      properties:\n        resource_scopes:\n          type: array\n          items:\n            type: string\n        description:\n          type: string\n        icon_uri:\n          type: string\n        name:\n          type: string\n        type:\n          type: string\n      example:\n        name: \"2020 summer holidays album\"\n        type: \"album\"\n        icon_uri: \"https://resource_server.domain.com/icon/album\"\n        description: \"Give access to Alice's album content\"\n        resource_scopes: [\"view\",\"edit\",\"resize\",\"print\"]\n    # Schema with body resource response fields\n    Resource:\n      type: object\n      properties:\n        _id:\n          type: string\n        user_access_policy_uri:\n          type: string\n      allOf:\n        - $ref: \"#/components/schemas/Resource_body\"\n      example:\n        _id: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        user_access_policy_uri: \"https://authorization_server.domain.com/policies\"\n        name: \"2020 summer holidays album\"\n        type: \"album\"\n        icon_uri: \"https://resource_server.domain.com/icon/album\"\n        description: \"Give access to Alice's album content\"\n        resource_scopes: [\"view\",\"edit\",\"resize\",\"print\"]\n      required:\n        - _id\n    # Schema with body access policy input fields\n    AccessPolicy_body:\n      type: object\n      properties:\n        name:\n          type: string\n        description:\n          type: string\n        type:\n          type: string\n          enum: [\"groovy\"]\n        condition:\n          type: string\n      example:\n        name: \"Resource access policy name\"\n        description: \"Give access to Alice's album content\"\n        type: \"groovy\"\n        condition: \"{ \\\"script\\\": \\\"my script\\\" }\"\n    # Schema with body access response fields\n    AccessPolicy:\n      type: object\n      properties:\n        id:\n          type: string\n        name:\n          type: string\n        description:\n          type: string\n        type:\n          type: string\n          enum: [\"groovy\"]\n        condition:\n          type: string\n      allOf:\n        - $ref: \"#/components/schemas/AccessPolicy_body\"\n      example:\n        id: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        name: \"Resource access policy name\"\n        description: \"Give access to Alice's album content\"\n        type: \"groovy\"\n        condition: \"{ \\\"script\\\": \\\"my script\\\" }\"\n      required:\n        - id\n        - name\n        - description\n        - type\n        - condition\n    # Single resource permission request\n    Permission_single_resource:\n      type: object\n      properties:\n        resource_id:\n          type: string\n        resource_scopes:\n          type: array\n          items:\n            type: string\n      required:\n        - resource_id\n        - resource_scopes\n      example:\n        resource_id: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n        resource_scopes: [\"view\",\"edit\",\"resize\"]\n    # Multiple resource permission request\n    Permission_multiple_resource:\n      type: array\n      items:\n        $ref: \"#/components/schemas/Permission_single_resource\"\n      example:\n        - resource_id: \"9ca2a1d0-a310-4011-a0d2-eed7df99e1b6\"\n          resource_scopes:  [\"view\",\"edit\",\"resize\"]\n        - resource_id: \"90344694-0479-4ad8-b338-020d840b2cd3\"\n          resource_scopes:  [\"upload\",\"download\"]\n",
			"canonicalURL": "/github.com/gravitee-io/gravitee-docs@fb4cdee18199aaf611346ab4fe89770ebf5d29c0/-/blob/am/current/uma2/swagger.yml",
			"externalURLs": [
				{
					"url": "https://github.com/gravitee-io/gravitee-docs/blob/fb4cdee18199aaf611346ab4fe89770ebf5d29c0/am/current/uma2/swagger.yml",
					"serviceKind": "GITHUB"
				}
			]
		}
	},
	"Error": "parse: parse spec: parse operations: path \"/uma/protection/permission\": post: security: parse security scheme \"PAT\": oauth2: flow \"authorizationCode\": at 1:4543: \"tokenUrl\" MUST be in the form of a URL: parse \"https://${host}/${basePath}/oauth/token\": invalid character \"{\" in host name"
}